{
  "version": 3,
  "sources": ["../../@fancyapps/ui/src/shared/utils/isPlainObject.js", "../../@fancyapps/ui/src/shared/utils/extend.js", "../../@fancyapps/ui/src/shared/utils/canUseDOM.js", "../../@fancyapps/ui/src/shared/utils/setFocusOn.js", "../../@fancyapps/ui/src/shared/utils/resolve.js", "../../@fancyapps/ui/src/shared/Base/Base.js", "../../@fancyapps/ui/src/shared/utils/round.js", "../../@fancyapps/ui/src/shared/utils/isScrollable.js", "../../@fancyapps/ui/src/shared/utils/ResizeObserver.js", "../../@fancyapps/ui/src/shared/utils/PointerTracker.js", "../../@fancyapps/ui/src/shared/utils/getTextNodeFromPoint.js", "../../@fancyapps/ui/src/shared/utils/getDimensions.js", "../../@fancyapps/ui/src/Panzoom/plugins/index.js", "../../@fancyapps/ui/src/Panzoom/Panzoom.js", "../../@fancyapps/ui/src/shared/utils/throttle.js", "../../@fancyapps/ui/src/Carousel/plugins/Navigation/Navigation.js", "../../@fancyapps/ui/src/Carousel/plugins/Dots/Dots.js", "../../@fancyapps/ui/src/Carousel/plugins/Sync/Sync.js", "../../@fancyapps/ui/src/Carousel/plugins/index.js", "../../@fancyapps/ui/src/Carousel/l10n/en.js", "../../@fancyapps/ui/src/Carousel/Carousel.js", "../../@fancyapps/ui/src/Fancybox/plugins/ScrollLock/ScrollLock.js", "../../@fancyapps/ui/src/Fancybox/plugins/Thumbs/Thumbs.js", "../../@fancyapps/ui/src/Fancybox/plugins/Html/Html.js", "../../@fancyapps/ui/src/Fancybox/plugins/Image/Image.js", "../../@fancyapps/ui/src/Fancybox/plugins/Hash/Hash.js", "../../@fancyapps/ui/src/shared/utils/Fullscreen.js", "../../@fancyapps/ui/src/shared/utils/Slideshow.js", "../../@fancyapps/ui/src/Fancybox/plugins/Toolbar/Toolbar.js", "../../@fancyapps/ui/src/Fancybox/plugins/index.js", "../../@fancyapps/ui/src/Fancybox/l10n/en.js", "../../@fancyapps/ui/src/Fancybox/Fancybox.js"],
  "sourcesContent": ["/**\n * Check to see if an object is a plain object (created using \"{}\" or \"new Object\").\n * @param {*} obj Variable of any type\n * @returns {Boolean}\n */\nexport const isPlainObject = (obj) => {\n  return (\n    // separate from primitives\n    typeof obj === \"object\" &&\n    // is obvious\n    obj !== null &&\n    // separate instances (Array, DOM, ...)\n    obj.constructor === Object &&\n    // separate build-in like Math\n    Object.prototype.toString.call(obj) === \"[object Object]\"\n  );\n};\n", "import { isPlainObject } from \"./isPlainObject.js\";\n\n/**\n * Merge the contents of two or more objects together into the first object.\n * If passing \"true\" for first argument, the merge becomes recursive (aka. deep copy).\n * @param  {...any} args\n * @returns {Object}\n */\nexport const extend = (...args) => {\n  let deep = false;\n\n  if (typeof args[0] == \"boolean\") {\n    deep = args.shift();\n  }\n\n  let result = args[0];\n\n  if (!result || typeof result !== \"object\") {\n    throw new Error(\"extendee must be an object\");\n  }\n\n  const extenders = args.slice(1);\n  const len = extenders.length;\n\n  for (let i = 0; i < len; i++) {\n    const extender = extenders[i];\n\n    for (let key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        const value = extender[key];\n\n        if (deep && (Array.isArray(value) || isPlainObject(value))) {\n          const base = Array.isArray(value) ? [] : {};\n\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n\n  return result;\n};\n", "/**\r\n * Detect if rendering from the client or the server\r\n */\r\nexport const canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\r\n", "import { canUseDOM } from \"./canUseDOM.js\";\r\n\r\nlet preventScrollSupported = null;\r\n\r\nexport const FOCUSABLE_ELEMENTS = [\r\n  \"a[href]\",\r\n  \"area[href]\",\r\n  'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\r\n  \"select:not([disabled]):not([aria-hidden])\",\r\n  \"textarea:not([disabled]):not([aria-hidden])\",\r\n  \"button:not([disabled]):not([aria-hidden])\",\r\n  \"iframe\",\r\n  \"object\",\r\n  \"embed\",\r\n  \"video\",\r\n  \"audio\",\r\n  \"[contenteditable]\",\r\n  '[tabindex]:not([tabindex^=\"-\"]):not([disabled]):not([aria-hidden])',\r\n];\r\n\r\nexport const setFocusOn = (node) => {\r\n  if (!node || !canUseDOM) {\r\n    return;\r\n  }\r\n\r\n  if (preventScrollSupported === null) {\r\n    document.createElement(\"div\").focus({\r\n      get preventScroll() {\r\n        preventScrollSupported = true;\r\n\r\n        return false;\r\n      },\r\n    });\r\n  }\r\n\r\n  try {\r\n    if (node.setActive) {\r\n      // IE/Edge\r\n      node.setActive();\r\n    } else if (preventScrollSupported) {\r\n      // Modern browsers\r\n      node.focus({ preventScroll: true });\r\n    } else {\r\n      // Safari does not support `preventScroll` option\r\n      // https://bugs.webkit.org/show_bug.cgi?id=178583\r\n\r\n      // Save position\r\n      const scrollTop = window.pageXOffset || document.body.scrollTop;\r\n      const scrollLeft = window.pageYOffset || document.body.scrollLeft;\r\n\r\n      node.focus();\r\n\r\n      document.body.scrollTo({\r\n        top: scrollTop,\r\n        left: scrollLeft,\r\n        behavior: \"auto\",\r\n      });\r\n    }\r\n  } catch (e) {}\r\n};\r\n", "/**\n * Access nested JavaScript objects by string path.\n * Example: `resolve(\"a.b.c\", {a:{b:{c:\"d\"}})` would return `d`\n * @param {String} path\n * @param {Object} obj\n * @returns {*}\n */\nexport const resolve = function (path, obj) {\n  return path.split(\".\").reduce(function (prev, curr) {\n    return prev && prev[curr];\n  }, obj);\n};\n", "import { extend } from \"../utils/extend.js\";\nimport { resolve } from \"../utils/resolve.js\";\nimport { isPlainObject } from \"../utils/isPlainObject.js\";\n\n/**\n * Base class, all components inherit from this class\n */\nexport class Base {\n  /**\n   * Base constructor\n   * @param {Object} [options] - Options as `key: value` pairs\n   */\n  constructor(options = {}) {\n    this.options = extend(true, {}, options);\n\n    this.plugins = [];\n    this.events = {};\n\n    // * Prefill with initial events\n    for (const type of [\"on\", \"once\"]) {\n      for (const args of Object.entries(this.options[type] || {})) {\n        this[type](...args);\n      }\n    }\n  }\n\n  /**\n   * Retrieve option value by key, supports subkeys\n   * @param {String} key Option name\n   * @param {*} [fallback] Fallback value for non-existing key\n   * @returns {*}\n   */\n  option(key, fallback, ...rest) {\n    // Make sure it is string\n    key = String(key);\n\n    let value = resolve(key, this.options);\n\n    // Allow to have functions as options\n    if (typeof value === \"function\") {\n      value = value.call(this, this, ...rest);\n    }\n\n    return value === undefined ? fallback : value;\n  }\n\n  /**\n   * Simple l10n support - replaces object keys\n   * found in template with corresponding values\n   * @param {String} str String containing values to localize\n   * @param {Array} params Substitute parameters\n   * @returns {String}\n   */\n  localize(str, params = []) {\n    str = String(str).replace(/\\{\\{(\\w+).?(\\w+)?\\}\\}/g, (match, key, subkey) => {\n      let rez = \"\";\n\n      // Plugins have `Plugin.l10n.KEY`\n      if (subkey) {\n        rez = this.option(`${key[0] + key.toLowerCase().substring(1)}.l10n.${subkey}`);\n      } else if (key) {\n        rez = this.option(`l10n.${key}`);\n      }\n\n      if (!rez) {\n        rez = match;\n      }\n\n      for (let index = 0; index < params.length; index++) {\n        rez = rez.split(params[index][0]).join(params[index][1]);\n      }\n\n      return rez;\n    });\n\n    str = str.replace(/\\{\\{(.*)\\}\\}/, (match, key) => {\n      return key;\n    });\n\n    return str;\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  on(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.on(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listeners = (this.events[item] = this.events[item] || []);\n\n        if (listeners.indexOf(callback) == -1) {\n          listeners.push(callback);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Subscribe to an event only once\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  once(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.once(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listener = (...details) => {\n          this.off(item, listener);\n          callback.call(this, this, ...details);\n        };\n\n        listener._ = callback;\n\n        this.on(item, listener);\n      });\n\n    return this;\n  }\n\n  /**\n   * Unsubscribe event with name and callback\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  off(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.off(...args);\n      }\n\n      return;\n    }\n\n    name.split(\" \").forEach((item) => {\n      const listeners = this.events[item];\n\n      if (!listeners || !listeners.length) {\n        return this;\n      }\n\n      let index = -1;\n\n      for (let i = 0, len = listeners.length; i < len; i++) {\n        const listener = listeners[i];\n\n        if (listener && (listener === callback || listener._ === callback)) {\n          index = i;\n          break;\n        }\n      }\n\n      if (index != -1) {\n        listeners.splice(index, 1);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Emit an event.\n   * If present, `\"*\"` handlers are invoked after name-matched handlers.\n   * @param {String} name\n   * @param  {...any} details\n   * @returns {Boolean}\n   */\n  trigger(name, ...details) {\n    for (const listener of [...(this.events[name] || [])].slice()) {\n      if (listener && listener.call(this, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    // A wildcard \"*\" event type\n    for (const listener of [...(this.events[\"*\"] || [])].slice()) {\n      if (listener && listener.call(this, name, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Add given plugins to this instance,\n   * this will end up calling `attach` method of each plugin\n   * @param {Object} Plugins\n   * @returns {Object}\n   */\n  attachPlugins(plugins) {\n    const newPlugins = {};\n\n    for (const [key, Plugin] of Object.entries(plugins || {})) {\n      // Check if this plugin is not disabled by option\n      if (this.options[key] !== false && !this.plugins[key]) {\n        // Populate options with defaults from the plugin\n        this.options[key] = extend({}, Plugin.defaults || {}, this.options[key]);\n\n        // Initialise plugin\n        newPlugins[key] = new Plugin(this);\n      }\n    }\n\n    for (const [key, plugin] of Object.entries(newPlugins)) {\n      plugin.attach(this);\n    }\n\n    this.plugins = Object.assign({}, this.plugins, newPlugins);\n\n    return this;\n  }\n\n  /**\n   * Remove all plugin instances from this instance,\n   * this will end up calling `detach` method of each plugin\n   * @returns {Object}\n   */\n  detachPlugins() {\n    for (const key in this.plugins) {\n      let plugin;\n\n      if ((plugin = this.plugins[key]) && typeof plugin.detach === \"function\") {\n        plugin.detach(this);\n      }\n    }\n\n    this.plugins = {};\n\n    return this;\n  }\n}\n", "/**\n * Round half up; to be more specific and to ensure things like 1.005 round correctly\n * @param {Float} value\n * @param {Integer} precision\n * @returns {Float}\n */\nexport const round = (value, precision = 10000) => {\n  value = parseFloat(value) || 0;\n\n  return Math.round((value + Number.EPSILON) * precision) / precision;\n};\n", "/**\n * Check if  element has scrollable content\n * @param {Node} node\n * @returns {Boolean}\n */\nexport const hasScrollbars = function (node) {\n  const overflowY = getComputedStyle(node)[\"overflow-y\"],\n    overflowX = getComputedStyle(node)[\"overflow-x\"],\n    vertical = (overflowY === \"scroll\" || overflowY === \"auto\") && Math.abs(node.scrollHeight - node.clientHeight) > 1,\n    horizontal = (overflowX === \"scroll\" || overflowX === \"auto\") && Math.abs(node.scrollWidth - node.clientWidth) > 1;\n\n  return vertical || horizontal;\n};\n\n/**\n * Check if element or one of the parents is scrollable\n * @param {Node} node  DOM Node element\n * @returns {Boolean}\n */\nexport const isScrollable = function (node) {\n  if (!node || !(typeof node === \"object\" && node instanceof Element) || node === document.body) {\n    return false;\n  }\n\n  if (node.__Panzoom) {\n    return false;\n  }\n\n  if (hasScrollbars(node)) {\n    return node;\n  }\n\n  return isScrollable(node.parentNode);\n};\n", "/**\n * ResizeObserver Polyfill\n */\nexport const ResizeObserver =\n  (typeof window !== \"undefined\" && window.ResizeObserver) ||\n  class {\n    constructor(callback) {\n      this.observables = [];\n      // Array of observed elements that looks like this:\n      // [{\n      //   el: domNode,\n      //   size: {height: x, width: y}\n      // }]\n      this.boundCheck = this.check.bind(this);\n      this.boundCheck();\n      this.callback = callback;\n    }\n\n    observe(el) {\n      if (this.observables.some((observable) => observable.el === el)) {\n        return;\n      }\n\n      const newObservable = {\n        el: el,\n        size: {\n          height: el.clientHeight,\n          width: el.clientWidth,\n        },\n      };\n\n      this.observables.push(newObservable);\n    }\n\n    unobserve(el) {\n      this.observables = this.observables.filter((obj) => obj.el !== el);\n    }\n\n    disconnect() {\n      this.observables = [];\n    }\n\n    check() {\n      const changedEntries = this.observables\n        .filter((obj) => {\n          const currentHeight = obj.el.clientHeight;\n          const currentWidth = obj.el.clientWidth;\n          if (obj.size.height !== currentHeight || obj.size.width !== currentWidth) {\n            obj.size.height = currentHeight;\n            obj.size.width = currentWidth;\n            return true;\n          }\n        })\n        .map((obj) => obj.el);\n\n      if (changedEntries.length > 0) {\n        this.callback(changedEntries);\n      }\n\n      window.requestAnimationFrame(this.boundCheck);\n    }\n  };\n", "class Pointer {\r\n  constructor(nativePointer) {\r\n    this.id = self.Touch && nativePointer instanceof Touch ? nativePointer.identifier : -1;\r\n\r\n    this.pageX = nativePointer.pageX;\r\n    this.pageY = nativePointer.pageY;\r\n\r\n    this.clientX = nativePointer.clientX;\r\n    this.clientY = nativePointer.clientY;\r\n  }\r\n}\r\n\r\nconst getDistance = (a, b) => {\r\n  if (!b) {\r\n    return 0;\r\n  }\r\n\r\n  return Math.sqrt((b.clientX - a.clientX) ** 2 + (b.clientY - a.clientY) ** 2);\r\n};\r\n\r\nconst getMidpoint = (a, b) => {\r\n  if (!b) {\r\n    return a;\r\n  }\r\n\r\n  return {\r\n    clientX: (a.clientX + b.clientX) / 2,\r\n    clientY: (a.clientY + b.clientY) / 2,\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => \"changedTouches\" in event;\r\n\r\nclass PointerTracker {\r\n  constructor(_element, { start = () => true, move = () => {}, end = () => {} } = {}) {\r\n    this._element = _element;\r\n\r\n    this.startPointers = [];\r\n    this.currentPointers = [];\r\n\r\n    this._pointerStart = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      const pointer = new Pointer(event);\r\n\r\n      if (this.currentPointers.some((p) => p.id === pointer.id)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerStart(pointer, event)) {\r\n        return;\r\n      }\r\n\r\n      window.addEventListener(\"mousemove\", this._move);\r\n      window.addEventListener(\"mouseup\", this._pointerEnd);\r\n    };\r\n\r\n    this._touchStart = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerStart(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._move = (event) => {\r\n      const previousPointers = this.currentPointers.slice();\r\n      const changedPointers = isTouchEvent(event)\r\n        ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n        : [new Pointer(event)];\r\n\r\n      const trackedChangedPointers = [];\r\n\r\n      for (const pointer of changedPointers) {\r\n        const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n        if (index < 0) {\r\n          continue;\r\n        }\r\n\r\n        trackedChangedPointers.push(pointer);\r\n\r\n        this.currentPointers[index] = pointer;\r\n      }\r\n\r\n      this._moveCallback(previousPointers, this.currentPointers.slice(), event);\r\n    };\r\n\r\n    this._triggerPointerEnd = (pointer, event) => {\r\n      const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n      if (index < 0) {\r\n        return false;\r\n      }\r\n\r\n      this.currentPointers.splice(index, 1);\r\n      this.startPointers.splice(index, 1);\r\n\r\n      this._endCallback(pointer, event);\r\n\r\n      return true;\r\n    };\r\n\r\n    this._pointerEnd = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerEnd(new Pointer(event), event)) {\r\n        return;\r\n      }\r\n\r\n      window.removeEventListener(\"mousemove\", this._move, { passive: false });\r\n      window.removeEventListener(\"mouseup\", this._pointerEnd, { passive: false });\r\n    };\r\n\r\n    this._touchEnd = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerEnd(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._startCallback = start;\r\n    this._moveCallback = move;\r\n    this._endCallback = end;\r\n\r\n    this._element.addEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.addEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.addEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.addEventListener(\"touchend\", this._touchEnd);\r\n    this._element.addEventListener(\"touchcancel\", this._touchEnd);\r\n  }\r\n\r\n  stop() {\r\n    this._element.removeEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.removeEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.removeEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.removeEventListener(\"touchend\", this._touchEnd);\r\n    this._element.removeEventListener(\"touchcancel\", this._touchEnd);\r\n\r\n    window.removeEventListener(\"mousemove\", this._move);\r\n    window.removeEventListener(\"mouseup\", this._pointerEnd);\r\n  }\r\n\r\n  _triggerPointerStart(pointer, event) {\r\n    if (!this._startCallback(pointer, event)) {\r\n      return false;\r\n    }\r\n\r\n    this.currentPointers.push(pointer);\r\n    this.startPointers.push(pointer);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport { PointerTracker, getDistance, getMidpoint };\r\n", "/**\n * Get element child node at the given coordinates\n * @param {Element} HTML element\n * @param {Float|Integer} x\n * @param {Float|Integer} y\n * @returns {Node|Boolean}}\n */\nexport const getTextNodeFromPoint = (element, x, y) => {\n  const nodes = element.childNodes;\n  const range = document.createRange();\n\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n\n    if (node.nodeType !== Node.TEXT_NODE) {\n      continue;\n    }\n\n    range.selectNodeContents(node);\n\n    const rect = range.getBoundingClientRect();\n\n    if (x >= rect.left && y >= rect.top && x <= rect.right && y <= rect.bottom) {\n      return node;\n    }\n  }\n\n  return false;\n};\n", "/**\n * Get actual width of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullWidth = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalWidth || 0),\n    parseFloat((elem.width && elem.width.baseVal && elem.width.baseVal.value) || 0),\n    parseFloat(elem.offsetWidth || 0),\n    parseFloat(elem.scrollWidth || 0)\n  );\n};\n\n/**\n * Get actual height of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullHeight = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalHeight || 0),\n    parseFloat((elem.height && elem.height.baseVal && elem.height.baseVal.value) || 0),\n    parseFloat(elem.offsetHeight || 0),\n    parseFloat(elem.scrollHeight || 0)\n  );\n};\n\n/**\n * Calculate bounding size to fit dimensions while preserving aspect ratio\n * @param {Number} srcWidth\n * @param {Number} srcHeight\n * @param {Number} maxWidth\n * @param {Number} maxHeight\n * @returns {Object}\n */\nexport const calculateAspectRatioFit = (srcWidth, srcHeight, maxWidth, maxHeight) => {\n  const ratio = Math.min(maxWidth / srcWidth || 0, maxHeight / srcHeight);\n\n  return { width: srcWidth * ratio || 0, height: srcHeight * ratio || 0 };\n};\n", "export const Plugins = {};\n", "import { extend } from \"../shared/utils/extend.js\";\nimport { round } from \"../shared/utils/round.js\";\nimport { isScrollable } from \"../shared/utils/isScrollable.js\";\n\nimport { ResizeObserver } from \"../shared/utils/ResizeObserver.js\";\nimport { PointerTracker, getMidpoint, getDistance } from \"../shared/utils/PointerTracker.js\";\n\nimport { getTextNodeFromPoint } from \"../shared/utils/getTextNodeFromPoint.js\";\n\nimport { getFullWidth, getFullHeight, calculateAspectRatioFit } from \"../shared/utils/getDimensions.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\nconst defaults = {\n  // Enable touch guestures\n  touch: true,\n\n  // Enable zooming\n  zoom: true,\n\n  // Enable pinch gesture to zoom in/out using two fingers\n  pinchToZoom: true,\n\n  // Disable dragging if scale level is equal to value of `baseScale` option\n  panOnlyZoomed: false,\n\n  // Lock axis while dragging,\n  // possible values: false | \"x\" | \"y\" | \"xy\"\n  lockAxis: false,\n\n  // * All friction values are inside [0, 1) interval,\n  // * where 0 would change instantly, but 0.99 would update extremely slowly\n\n  // Friction while panning/dragging\n  friction: 0.64,\n\n  // Friction while decelerating after drag end\n  decelFriction: 0.88,\n\n  // Friction while scaling\n  zoomFriction: 0.74,\n\n  // Bounciness after hitting the edge\n  bounceForce: 0.2,\n\n  // Initial scale level\n  baseScale: 1,\n\n  // Minimum scale level\n  minScale: 1,\n\n  // Maximum scale level\n  maxScale: 2,\n\n  // Default scale step while zooming\n  step: 0.5,\n\n  // Allow to select text,\n  // if enabled, dragging will be disabled when text selection is detected\n  textSelection: false,\n\n  // Add `click` event listener,\n  // possible values: true | false | function | \"toggleZoom\"\n  click: \"toggleZoom\",\n\n  // Add `wheel` event listener,\n  // possible values: true | false | function |  \"zoom\"\n  wheel: \"zoom\",\n\n  // Value for zoom on mouse wheel\n  wheelFactor: 42,\n\n  // Number of wheel events after which it should stop preventing default behaviour of mouse wheel\n  wheelLimit: 5,\n\n  // Class name added to `$viewport` element to indicate if content is draggable\n  draggableClass: \"is-draggable\",\n\n  // Class name added to `$viewport` element to indicate that user is currently dragging\n  draggingClass: \"is-dragging\",\n\n  // Content will be scaled by this number,\n  // this can also be a function which should return a number, for example:\n  // ratio: function() { return 1 / (window.devicePixelRatio || 1) }\n  ratio: 1,\n};\n\nexport class Panzoom extends Base {\n  /**\n   * Panzoom constructor\n   * @constructs Panzoom\n   * @param {HTMLElement} $viewport Panzoom container\n   * @param {Object} [options] Options for Panzoom\n   */\n  constructor($container, options = {}) {\n    super(extend(true, {}, defaults, options));\n\n    this.state = \"init\";\n\n    this.$container = $container;\n\n    // Bind event handlers for referencability\n    for (const methodName of [\"onLoad\", \"onWheel\", \"onClick\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.initLayout();\n\n    this.resetValues();\n\n    this.attachPlugins(Panzoom.Plugins);\n\n    this.trigger(\"init\");\n\n    this.updateMetrics();\n\n    this.attachEvents();\n\n    this.trigger(\"ready\");\n\n    if (this.option(\"centerOnStart\") === false) {\n      this.state = \"ready\";\n    } else {\n      this.panTo({\n        friction: 0,\n      });\n    }\n\n    $container.__Panzoom = this;\n  }\n\n  /**\n   * Create references to container, viewport and content elements\n   */\n  initLayout() {\n    const $container = this.$container;\n\n    // Make sure content element exists\n    if (!($container instanceof HTMLElement)) {\n      throw new Error(\"Panzoom: Container not found\");\n    }\n\n    const $content = this.option(\"content\") || $container.querySelector(\".panzoom__content\");\n\n    // Make sure content element exists\n    if (!$content) {\n      throw new Error(\"Panzoom: Content not found\");\n    }\n\n    this.$content = $content;\n\n    let $viewport = this.option(\"viewport\") || $container.querySelector(\".panzoom__viewport\");\n\n    if (!$viewport && this.option(\"wrapInner\") !== false) {\n      $viewport = document.createElement(\"div\");\n      $viewport.classList.add(\"panzoom__viewport\");\n\n      $viewport.append(...$container.childNodes);\n\n      $container.appendChild($viewport);\n    }\n\n    this.$viewport = $viewport || $content.parentNode;\n  }\n\n  /**\n   * Restore instance variables to default values\n   */\n  resetValues() {\n    this.updateRate = this.option(\"updateRate\", /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) ? 250 : 24);\n\n    this.container = {\n      width: 0,\n      height: 0,\n    };\n\n    this.viewport = {\n      width: 0,\n      height: 0,\n    };\n\n    this.content = {\n      // Full content dimensions (naturalWidth/naturalHeight for images)\n      origWidth: 0,\n      origHeight: 0,\n\n      // Current dimensions of the content\n      width: 0,\n      height: 0,\n\n      // Current position; these values reflect CSS `transform` value\n      x: this.option(\"x\", 0),\n      y: this.option(\"y\", 0),\n\n      // Current scale; does not reflect CSS `transform` value\n      scale: this.option(\"baseScale\"),\n    };\n\n    // End values of current pan / zoom animation\n    this.transform = {\n      x: 0,\n      y: 0,\n      scale: 1,\n    };\n\n    this.resetDragPosition();\n  }\n\n  /**\n   * Handle `load` event\n   * @param {Event} event\n   */\n  onLoad(event) {\n    this.updateMetrics();\n\n    this.panTo({ scale: this.option(\"baseScale\"), friction: 0 });\n\n    this.trigger(\"load\", event);\n  }\n\n  /**\n   * Handle `click` event\n   * @param {Event} event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (document.activeElement && document.activeElement.closest(\"[contenteditable]\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (\n      this.option(\"textSelection\") &&\n      window.getSelection().toString().length &&\n      !(event.target && event.target.hasAttribute(\"data-fancybox-close\"))\n    ) {\n      event.stopPropagation();\n      return;\n    }\n\n    const rect = this.$content.getClientRects()[0];\n\n    // Check if container has changed position (for example, when current instance is inside another one)\n    if (this.state !== \"ready\") {\n      if (\n        this.dragPosition.midPoint ||\n        Math.abs(rect.top - this.dragStart.rect.top) > 1 ||\n        Math.abs(rect.left - this.dragStart.rect.left) > 1\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        return;\n      }\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"click\") === \"toggleZoom\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.zoomWithClick(event);\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   * @param {Event} event\n   */\n  onWheel(event) {\n    if (this.trigger(\"wheel\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"wheel\")) {\n      this.zoomWithWheel(event);\n    }\n  }\n\n  /**\n   * Change zoom level depending on scroll direction\n   * @param {Event} event `wheel` event\n   */\n  zoomWithWheel(event) {\n    if (this.changedDelta === undefined) {\n      this.changedDelta = 0;\n    }\n\n    const delta = Math.max(-1, Math.min(1, -event.deltaY || -event.deltaX || event.wheelDelta || -event.detail));\n    const scale = this.content.scale;\n\n    let newScale = (scale * (100 + delta * this.option(\"wheelFactor\"))) / 100;\n\n    if (\n      (delta < 0 && Math.abs(scale - this.option(\"minScale\")) < 0.01) ||\n      (delta > 0 && Math.abs(scale - this.option(\"maxScale\")) < 0.01)\n    ) {\n      this.changedDelta += Math.abs(delta);\n      newScale = scale;\n    } else {\n      this.changedDelta = 0;\n      newScale = Math.max(Math.min(newScale, this.option(\"maxScale\")), this.option(\"minScale\"));\n    }\n\n    if (this.changedDelta > this.option(\"wheelLimit\")) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (newScale === scale) {\n      return;\n    }\n\n    const rect = this.$content.getBoundingClientRect();\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.zoomTo(newScale, { x, y });\n  }\n\n  /**\n   * Change zoom level depending on click coordinates\n   * @param {Event} event `click` event\n   */\n  zoomWithClick(event) {\n    const rect = this.$content.getClientRects()[0];\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.toggleZoom({ x, y });\n  }\n\n  /**\n   * Attach load, wheel and click event listeners, initialize `resizeObserver` and `PointerTracker`\n   */\n  attachEvents() {\n    this.$content.addEventListener(\"load\", this.onLoad);\n\n    this.$container.addEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.addEventListener(\"click\", this.onClick, { passive: false });\n\n    this.initObserver();\n\n    const pointerTracker = new PointerTracker(this.$container, {\n      start: (pointer, event) => {\n        if (!this.option(\"touch\")) {\n          return false;\n        }\n\n        if (this.velocity.scale < 0) {\n          return false;\n        }\n\n        const target = event.composedPath()[0];\n\n        if (!pointerTracker.currentPointers.length) {\n          const ignoreClickedElement =\n            [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n          if (ignoreClickedElement) {\n            return false;\n          }\n\n          // Allow text selection\n          if (this.option(\"textSelection\") && getTextNodeFromPoint(target, pointer.clientX, pointer.clientY)) {\n            return false;\n          }\n        }\n\n        if (isScrollable(target)) {\n          return false;\n        }\n\n        if (this.trigger(\"touchStart\", event) === false) {\n          return false;\n        }\n\n        if (event.type === \"mousedown\") {\n          event.preventDefault();\n        }\n\n        this.state = \"pointerdown\";\n\n        this.resetDragPosition();\n\n        this.dragPosition.midPoint = null;\n        this.dragPosition.time = Date.now();\n\n        return true;\n      },\n      move: (previousPointers, currentPointers, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        if (this.trigger(\"touchMove\", event) === false) {\n          event.preventDefault();\n          return;\n        }\n\n        // Disable touch action if current zoom level is below base level\n        if (\n          currentPointers.length < 2 &&\n          this.option(\"panOnlyZoomed\") === true &&\n          this.content.width <= this.viewport.width &&\n          this.content.height <= this.viewport.height &&\n          this.transform.scale <= this.option(\"baseScale\")\n        ) {\n          return;\n        }\n\n        if (currentPointers.length > 1 && (!this.option(\"zoom\") || this.option(\"pinchToZoom\") === false)) {\n          return;\n        }\n\n        const prevMidpoint = getMidpoint(previousPointers[0], previousPointers[1]);\n        const newMidpoint = getMidpoint(currentPointers[0], currentPointers[1]);\n\n        const panX = newMidpoint.clientX - prevMidpoint.clientX;\n        const panY = newMidpoint.clientY - prevMidpoint.clientY;\n\n        const prevDistance = getDistance(previousPointers[0], previousPointers[1]);\n        const newDistance = getDistance(currentPointers[0], currentPointers[1]);\n\n        const scaleDiff = prevDistance && newDistance ? newDistance / prevDistance : 1;\n\n        this.dragOffset.x += panX;\n        this.dragOffset.y += panY;\n\n        this.dragOffset.scale *= scaleDiff;\n\n        this.dragOffset.time = Date.now() - this.dragPosition.time;\n\n        const axisToLock = this.dragStart.scale === 1 && this.option(\"lockAxis\");\n\n        if (axisToLock && !this.lockAxis) {\n          if (Math.abs(this.dragOffset.x) < 6 && Math.abs(this.dragOffset.y) < 6) {\n            event.preventDefault();\n            return;\n          }\n\n          const angle = Math.abs((Math.atan2(this.dragOffset.y, this.dragOffset.x) * 180) / Math.PI);\n\n          this.lockAxis = angle > 45 && angle < 135 ? \"y\" : \"x\";\n        }\n\n        if (axisToLock !== \"xy\" && this.lockAxis === \"y\") {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        event.stopImmediatePropagation();\n\n        if (this.lockAxis) {\n          this.dragOffset[this.lockAxis === \"x\" ? \"y\" : \"x\"] = 0;\n        }\n\n        this.$container.classList.add(this.option(\"draggingClass\"));\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"y\")) {\n          this.dragPosition.x = this.dragStart.x + this.dragOffset.x;\n        }\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"x\")) {\n          this.dragPosition.y = this.dragStart.y + this.dragOffset.y;\n        }\n\n        this.dragPosition.scale = this.dragStart.scale * this.dragOffset.scale;\n\n        if (currentPointers.length > 1) {\n          const startPoint = getMidpoint(pointerTracker.startPointers[0], pointerTracker.startPointers[1]);\n\n          const xPos = startPoint.clientX - this.dragStart.rect.x;\n          const yPos = startPoint.clientY - this.dragStart.rect.y;\n\n          const { deltaX, deltaY } = this.getZoomDelta(this.content.scale * this.dragOffset.scale, xPos, yPos);\n\n          this.dragPosition.x -= deltaX;\n          this.dragPosition.y -= deltaY;\n\n          this.dragPosition.midPoint = newMidpoint;\n        } else {\n          this.setDragResistance();\n        }\n\n        // Update final position\n        this.transform = {\n          x: this.dragPosition.x,\n          y: this.dragPosition.y,\n          scale: this.dragPosition.scale,\n        };\n\n        this.startAnimation();\n      },\n      end: (pointer, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        this._dragOffset = { ...this.dragOffset };\n\n        if (pointerTracker.currentPointers.length) {\n          this.resetDragPosition();\n\n          return;\n        }\n\n        this.state = \"decel\";\n        this.friction = this.option(\"decelFriction\");\n\n        this.recalculateTransform();\n\n        this.$container.classList.remove(this.option(\"draggingClass\"));\n\n        if (this.trigger(\"touchEnd\", event) === false) {\n          return;\n        }\n\n        if (this.state !== \"decel\") {\n          return;\n        }\n\n        // * Check if scaled content past limits\n\n        // Below minimum\n        const minScale = this.option(\"minScale\");\n\n        if (this.transform.scale < minScale) {\n          this.zoomTo(minScale, { friction: 0.64 });\n\n          return;\n        }\n\n        // Exceed maximum\n        const maxScale = this.option(\"maxScale\");\n\n        if (this.transform.scale - maxScale > 0.01) {\n          const last = this.dragPosition.midPoint || pointer;\n          const rect = this.$content.getClientRects()[0];\n\n          this.zoomTo(maxScale, {\n            friction: 0.64,\n            x: last.clientX - rect.left,\n            y: last.clientY - rect.top,\n          });\n\n          return;\n        }\n      },\n    });\n\n    this.pointerTracker = pointerTracker;\n  }\n\n  initObserver() {\n    if (this.resizeObserver) {\n      return;\n    }\n\n    this.resizeObserver = new ResizeObserver(() => {\n      if (this.updateTimer) {\n        return;\n      }\n\n      this.updateTimer = setTimeout(() => {\n        const rect = this.$container.getBoundingClientRect();\n\n        if (!(rect.width && rect.height)) {\n          this.updateTimer = null;\n          return;\n        }\n\n        // Check to see if there are any changes\n        if (Math.abs(rect.width - this.container.width) > 1 || Math.abs(rect.height - this.container.height) > 1) {\n          if (this.isAnimating()) {\n            this.endAnimation(true);\n          }\n\n          this.updateMetrics();\n\n          this.panTo({\n            x: this.content.x,\n            y: this.content.y,\n            scale: this.option(\"baseScale\"),\n            friction: 0,\n          });\n        }\n\n        this.updateTimer = null;\n      }, this.updateRate);\n    });\n\n    this.resizeObserver.observe(this.$container);\n  }\n\n  /**\n   * Restore drag related variables to default values\n   */\n  resetDragPosition() {\n    this.lockAxis = null;\n    this.friction = this.option(\"friction\");\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    const { x, y, scale } = this.content;\n\n    this.dragStart = {\n      rect: this.$content.getBoundingClientRect(),\n      x,\n      y,\n      scale,\n    };\n\n    this.dragPosition = {\n      ...this.dragPosition,\n      x,\n      y,\n      scale,\n    };\n\n    this.dragOffset = {\n      x: 0,\n      y: 0,\n      scale: 1,\n      time: 0,\n    };\n  }\n\n  /**\n   * Trigger update events before/after resizing content and viewport\n   * @param {Boolean} silently Should trigger `afterUpdate` event at the end\n   */\n  updateMetrics(silently) {\n    if (silently !== true) {\n      this.trigger(\"beforeUpdate\");\n    }\n\n    const $container = this.$container;\n    const $content = this.$content;\n    const $viewport = this.$viewport;\n\n    const contentIsImage = $content instanceof HTMLImageElement;\n    const contentIsZoomable = this.option(\"zoom\");\n    const shouldResizeParent = this.option(\"resizeParent\", contentIsZoomable);\n\n    let width = this.option(\"width\");\n    let height = this.option(\"height\");\n\n    let origWidth = width || getFullWidth($content);\n    let origHeight = height || getFullHeight($content);\n\n    Object.assign($content.style, {\n      width: width ? `${width}px` : \"\",\n      height: height ? `${height}px` : \"\",\n      maxWidth: \"\",\n      maxHeight: \"\",\n    });\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: \"\", height: \"\" });\n    }\n\n    const ratio = this.option(\"ratio\");\n\n    origWidth = round(origWidth * ratio);\n    origHeight = round(origHeight * ratio);\n\n    width = origWidth;\n    height = origHeight;\n\n    const contentRect = $content.getBoundingClientRect();\n    const viewportRect = $viewport.getBoundingClientRect();\n\n    const containerRect = $viewport == $container ? viewportRect : $container.getBoundingClientRect();\n\n    let viewportWidth = Math.max($viewport.offsetWidth, round(viewportRect.width));\n    let viewportHeight = Math.max($viewport.offsetHeight, round(viewportRect.height));\n\n    let viewportStyles = window.getComputedStyle($viewport);\n    viewportWidth -= parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight);\n    viewportHeight -= parseFloat(viewportStyles.paddingTop) + parseFloat(viewportStyles.paddingBottom);\n\n    this.viewport.width = viewportWidth;\n    this.viewport.height = viewportHeight;\n\n    if (contentIsZoomable) {\n      if (Math.abs(origWidth - contentRect.width) > 0.1 || Math.abs(origHeight - contentRect.height) > 0.1) {\n        const rez = calculateAspectRatioFit(\n          origWidth,\n          origHeight,\n          Math.min(origWidth, contentRect.width),\n          Math.min(origHeight, contentRect.height)\n        );\n\n        width = round(rez.width);\n        height = round(rez.height);\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        transform: \"\",\n      });\n    }\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: `${width}px`, height: `${height}px` });\n\n      this.viewport = { ...this.viewport, width, height };\n    }\n\n    if (contentIsImage && contentIsZoomable && typeof this.options.maxScale !== \"function\") {\n      const maxScale = this.option(\"maxScale\");\n\n      this.options.maxScale = function () {\n        return this.content.origWidth > 0 && this.content.fitWidth > 0\n          ? this.content.origWidth / this.content.fitWidth\n          : maxScale;\n      };\n    }\n\n    this.content = {\n      ...this.content,\n      origWidth,\n      origHeight,\n      fitWidth: width,\n      fitHeight: height,\n      width,\n      height,\n      scale: 1,\n      isZoomable: contentIsZoomable,\n    };\n\n    this.container = { width: containerRect.width, height: containerRect.height };\n\n    if (silently !== true) {\n      this.trigger(\"afterUpdate\");\n    }\n  }\n\n  /**\n   * Increase zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would increase scale from 1 to 1.5\n   */\n  zoomIn(step) {\n    this.zoomTo(this.content.scale + (step || this.option(\"step\")));\n  }\n\n  /**\n   * Decrease zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would decrease scale from 1.5 to 1\n   */\n  zoomOut(step) {\n    this.zoomTo(this.content.scale - (step || this.option(\"step\")));\n  }\n\n  /**\n   * Toggles zoom level between max and base levels\n   * @param {Object} [options] Additional options\n   */\n  toggleZoom(props = {}) {\n    const maxScale = this.option(\"maxScale\");\n    const baseScale = this.option(\"baseScale\");\n\n    const scale = this.content.scale > baseScale + (maxScale - baseScale) * 0.5 ? baseScale : maxScale;\n\n    this.zoomTo(scale, props);\n  }\n\n  /**\n   * Animate to given zoom level\n   * @param {Number} scale New zoom level\n   * @param {Object} [options] Additional options\n   */\n  zoomTo(scale = this.option(\"baseScale\"), { x = null, y = null } = {}) {\n    scale = Math.max(Math.min(scale, this.option(\"maxScale\")), this.option(\"minScale\"));\n\n    // Adjust zoom position\n    const currentScale = round(this.content.scale / (this.content.width / this.content.fitWidth), 10000000);\n\n    if (x === null) {\n      x = this.content.width * currentScale * 0.5;\n    }\n\n    if (y === null) {\n      y = this.content.height * currentScale * 0.5;\n    }\n\n    const { deltaX, deltaY } = this.getZoomDelta(scale, x, y);\n\n    x = this.content.x - deltaX;\n    y = this.content.y - deltaY;\n\n    this.panTo({ x, y, scale, friction: this.option(\"zoomFriction\") });\n  }\n\n  /**\n   * Calculate difference for top/left values if content would scale at given coordinates\n   * @param {Number} scale\n   * @param {Number} x\n   * @param {Number} y\n   * @returns {Object}\n   */\n  getZoomDelta(scale, x = 0, y = 0) {\n    const currentWidth = this.content.fitWidth * this.content.scale;\n    const currentHeight = this.content.fitHeight * this.content.scale;\n\n    const percentXInCurrentBox = x > 0 && currentWidth ? x / currentWidth : 0;\n    const percentYInCurrentBox = y > 0 && currentHeight ? y / currentHeight : 0;\n\n    const nextWidth = this.content.fitWidth * scale;\n    const nextHeight = this.content.fitHeight * scale;\n\n    const deltaX = (nextWidth - currentWidth) * percentXInCurrentBox;\n    const deltaY = (nextHeight - currentHeight) * percentYInCurrentBox;\n\n    return { deltaX, deltaY };\n  }\n\n  /**\n   * Animate to given positon and/or zoom level\n   * @param {Object} [options] Additional options\n   */\n  panTo({\n    x = this.content.x,\n    y = this.content.y,\n    scale,\n    friction = this.option(\"friction\"),\n    ignoreBounds = false,\n  } = {}) {\n    scale = scale || this.content.scale || 1;\n\n    if (!ignoreBounds) {\n      const { boundX, boundY } = this.getBounds(scale);\n\n      if (boundX) {\n        x = Math.max(Math.min(x, boundX.to), boundX.from);\n      }\n\n      if (boundY) {\n        y = Math.max(Math.min(y, boundY.to), boundY.from);\n      }\n    }\n\n    this.friction = friction;\n\n    this.transform = {\n      ...this.transform,\n      x,\n      y,\n      scale,\n    };\n\n    if (friction) {\n      this.state = \"panning\";\n\n      this.velocity = {\n        x: (1 / this.friction - 1) * (x - this.content.x),\n        y: (1 / this.friction - 1) * (y - this.content.y),\n        scale: (1 / this.friction - 1) * (scale - this.content.scale),\n      };\n\n      this.startAnimation();\n    } else {\n      this.endAnimation();\n    }\n  }\n\n  /**\n   * Start animation loop\n   */\n  startAnimation() {\n    if (!this.rAF) {\n      this.trigger(\"startAnimation\");\n    } else {\n      cancelAnimationFrame(this.rAF);\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Process animation frame\n   */\n  animate() {\n    this.setEdgeForce();\n    this.setDragForce();\n\n    this.velocity.x *= this.friction;\n    this.velocity.y *= this.friction;\n\n    this.velocity.scale *= this.friction;\n\n    this.content.x += this.velocity.x;\n    this.content.y += this.velocity.y;\n\n    this.content.scale += this.velocity.scale;\n\n    if (this.isAnimating()) {\n      this.setTransform();\n    } else if (this.state !== \"pointerdown\") {\n      this.endAnimation();\n\n      return;\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Calculate boundaries\n   */\n  getBounds(scale) {\n    let boundX = this.boundX;\n    let boundY = this.boundY;\n\n    if (boundX !== undefined && boundY !== undefined) {\n      return { boundX, boundY };\n    }\n\n    boundX = { from: 0, to: 0 };\n    boundY = { from: 0, to: 0 };\n\n    scale = scale || this.transform.scale;\n\n    const width = this.content.fitWidth * scale;\n    const height = this.content.fitHeight * scale;\n\n    const viewportWidth = this.viewport.width;\n    const viewportHeight = this.viewport.height;\n\n    if (width < viewportWidth) {\n      const deltaX = round((viewportWidth - width) * 0.5);\n\n      boundX.from = deltaX;\n      boundX.to = deltaX;\n    } else {\n      boundX.from = round(viewportWidth - width);\n    }\n\n    if (height < viewportHeight) {\n      const deltaY = (viewportHeight - height) * 0.5;\n\n      boundY.from = deltaY;\n      boundY.to = deltaY;\n    } else {\n      boundY.from = round(viewportHeight - height);\n    }\n\n    return { boundX, boundY };\n  }\n\n  /**\n   * Change animation velocity if boundary is reached\n   */\n  setEdgeForce() {\n    if (this.state !== \"decel\") {\n      return;\n    }\n\n    const bounceForce = this.option(\"bounceForce\");\n\n    const { boundX, boundY } = this.getBounds(Math.max(this.transform.scale, this.content.scale));\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.content.x < boundX.from;\n      pastRight = this.content.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.content.y < boundY.from;\n      pastBottom = this.content.y > boundY.to;\n    }\n\n    if (pastLeft || pastRight) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.content.x;\n\n      let force = distance * bounceForce;\n\n      const restX = this.content.x + (this.velocity.x + force) / this.friction;\n\n      if (restX >= boundX.from && restX <= boundX.to) {\n        force += this.velocity.x;\n      }\n\n      this.velocity.x = force;\n\n      this.recalculateTransform();\n    }\n\n    if (pastTop || pastBottom) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.content.y;\n\n      let force = distance * bounceForce;\n\n      const restY = this.content.y + (force + this.velocity.y) / this.friction;\n\n      if (restY >= boundY.from && restY <= boundY.to) {\n        force += this.velocity.y;\n      }\n\n      this.velocity.y = force;\n\n      this.recalculateTransform();\n    }\n  }\n\n  /**\n   * Change dragging position if boundary is reached\n   */\n  setDragResistance() {\n    if (this.state !== \"pointerdown\") {\n      return;\n    }\n\n    const { boundX, boundY } = this.getBounds(this.dragPosition.scale);\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.dragPosition.x < boundX.from;\n      pastRight = this.dragPosition.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.dragPosition.y < boundY.from;\n      pastBottom = this.dragPosition.y > boundY.to;\n    }\n\n    if ((pastLeft || pastRight) && !(pastLeft && pastRight)) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.dragPosition.x;\n\n      this.dragPosition.x = bound - distance * 0.3;\n    }\n\n    if ((pastTop || pastBottom) && !(pastTop && pastBottom)) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.dragPosition.y;\n\n      this.dragPosition.y = bound - distance * 0.3;\n    }\n  }\n\n  /**\n   * Set velocity to move content to drag position\n   */\n  setDragForce() {\n    if (this.state === \"pointerdown\") {\n      this.velocity.x = this.dragPosition.x - this.content.x;\n      this.velocity.y = this.dragPosition.y - this.content.y;\n      this.velocity.scale = this.dragPosition.scale - this.content.scale;\n    }\n  }\n\n  /**\n   * Update end values based on current velocity and friction;\n   */\n  recalculateTransform() {\n    this.transform.x = this.content.x + this.velocity.x / (1 / this.friction - 1);\n    this.transform.y = this.content.y + this.velocity.y / (1 / this.friction - 1);\n    this.transform.scale = this.content.scale + this.velocity.scale / (1 / this.friction - 1);\n  }\n\n  /**\n   * Check if content is currently animating\n   * @returns {Boolean}\n   */\n  isAnimating() {\n    return !!(\n      this.friction &&\n      (Math.abs(this.velocity.x) > 0.05 || Math.abs(this.velocity.y) > 0.05 || Math.abs(this.velocity.scale) > 0.05)\n    );\n  }\n\n  /**\n   * Set content `style.transform` value based on current animation frame\n   */\n  setTransform(final) {\n    let x, y, scale;\n\n    if (final) {\n      x = round(this.transform.x);\n      y = round(this.transform.y);\n\n      scale = this.transform.scale;\n\n      this.content = { ...this.content, x, y, scale };\n    } else {\n      x = round(this.content.x);\n      y = round(this.content.y);\n\n      scale = this.content.scale / (this.content.width / this.content.fitWidth);\n\n      this.content = { ...this.content, x, y };\n    }\n\n    this.trigger(\"beforeTransform\");\n\n    x = round(this.content.x);\n    y = round(this.content.y);\n\n    if (final && this.option(\"zoom\")) {\n      let width;\n      let height;\n\n      width = round(this.content.fitWidth * scale);\n      height = round(this.content.fitHeight * scale);\n\n      this.content.width = width;\n      this.content.height = height;\n\n      this.transform = { ...this.transform, width, height, scale };\n\n      Object.assign(this.$content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        maxWidth: \"none\",\n        maxHeight: \"none\",\n        transform: `translate3d(${x}px, ${y}px, 0) scale(1)`,\n      });\n    } else {\n      this.$content.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\n    }\n\n    this.trigger(\"afterTransform\");\n  }\n\n  /**\n   * Stop animation loop\n   */\n  endAnimation(silently) {\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    this.setTransform(true);\n\n    this.state = \"ready\";\n\n    this.handleCursor();\n\n    if (silently !== true) {\n      this.trigger(\"endAnimation\");\n    }\n  }\n\n  /**\n   * Update the class name depending on whether the content is scaled\n   */\n  handleCursor() {\n    const draggableClass = this.option(\"draggableClass\");\n\n    if (!draggableClass || !this.option(\"touch\")) {\n      return;\n    }\n\n    if (\n      this.option(\"panOnlyZoomed\") == true &&\n      this.content.width <= this.viewport.width &&\n      this.content.height <= this.viewport.height &&\n      this.transform.scale <= this.option(\"baseScale\")\n    ) {\n      this.$container.classList.remove(draggableClass);\n    } else {\n      this.$container.classList.add(draggableClass);\n    }\n  }\n\n  /**\n   * Remove observation and detach event listeners\n   */\n  detachEvents() {\n    this.$content.removeEventListener(\"load\", this.onLoad);\n\n    this.$container.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.removeEventListener(\"click\", this.onClick, { passive: false });\n\n    if (this.pointerTracker) {\n      this.pointerTracker.stop();\n      this.pointerTracker = null;\n    }\n\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = null;\n    }\n  }\n\n  /**\n   * Clean up\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    clearTimeout(this.updateTimer);\n    this.updateTimer = null;\n\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.detachEvents();\n\n    this.detachPlugins();\n\n    this.resetDragPosition();\n  }\n}\n\n// Expose version\nPanzoom.version = \"__VERSION__\";\n\n// Static properties are a recent addition that dont work in all browsers yet\nPanzoom.Plugins = Plugins;\n", "/**\n * Throttling enforces a maximum number of times a function can be called over time\n * @param {Function} func Callback function\n * @param {Integer} limit Milliseconds\n * @returns {Function}\n */\nexport const throttle = (func, limit) => {\n  let lastCall = 0;\n\n  return function (...args) {\n    const now = new Date().getTime();\n\n    if (now - lastCall < limit) {\n      return;\n    }\n\n    lastCall = now;\n\n    return func(...args);\n  };\n};\n", "const defaults = {\n  prevTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M15 3l-9 9 9 9\"/></svg>',\n  nextTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M9 3l9 9-9 9\"/></svg>',\n\n  classNames: {\n    main: \"carousel__nav\",\n    button: \"carousel__button\",\n\n    next: \"is-next\",\n    prev: \"is-prev\",\n  },\n};\n\nexport class Navigation {\n  constructor(carousel) {\n    this.$container = null;\n\n    this.$prev = null;\n    this.$next = null;\n\n    this.carousel = carousel;\n\n    this.onRefresh = this.onRefresh.bind(this);\n  }\n\n  /**\n   * Shortcut to get option for this plugin\n   * @param {String} name option name\n   * @returns option value\n   */\n  option(name) {\n    return this.carousel.option(`Navigation.${name}`);\n  }\n\n  /**\n   * Creates and returns new button element with default class names and click event\n   * @param {String} type\n   */\n  createButton(type) {\n    const $btn = document.createElement(\"button\");\n\n    $btn.setAttribute(\"title\", this.carousel.localize(`{{${type.toUpperCase()}}}`));\n\n    const classNames = this.option(\"classNames.button\") + \" \" + this.option(`classNames.${type}`);\n\n    $btn.classList.add(...classNames.split(\" \"));\n    $btn.setAttribute(\"tabindex\", \"0\");\n    $btn.innerHTML = this.carousel.localize(this.option(`${type}Tpl`));\n\n    $btn.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.carousel[`slide${type === \"next\" ? \"Next\" : \"Prev\"}`]();\n    });\n\n    return $btn;\n  }\n\n  /**\n   * Build necessary DOM elements\n   */\n  build() {\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$container.classList.add(...this.option(\"classNames.main\").split(\" \"));\n\n      this.carousel.$container.appendChild(this.$container);\n    }\n\n    if (!this.$next) {\n      this.$next = this.createButton(\"next\");\n\n      this.$container.appendChild(this.$next);\n    }\n\n    if (!this.$prev) {\n      this.$prev = this.createButton(\"prev\");\n\n      this.$container.appendChild(this.$prev);\n    }\n  }\n\n  /**\n   *  Process carousel `refresh` and `change` events to enable/disable buttons if needed\n   */\n  onRefresh() {\n    const pageCount = this.carousel.pages.length;\n\n    if (\n      pageCount <= 1 ||\n      (pageCount > 1 &&\n        this.carousel.elemDimWidth < this.carousel.wrapDimWidth &&\n        !Number.isInteger(this.carousel.option(\"slidesPerPage\")))\n    ) {\n      this.cleanup();\n\n      return;\n    }\n\n    this.build();\n\n    this.$prev.removeAttribute(\"disabled\");\n    this.$next.removeAttribute(\"disabled\");\n\n    if (this.carousel.option(\"infiniteX\", this.carousel.option(\"infinite\"))) {\n      return;\n    }\n\n    if (this.carousel.page <= 0) {\n      this.$prev.setAttribute(\"disabled\", \"\");\n    }\n\n    if (this.carousel.page >= pageCount - 1) {\n      this.$next.setAttribute(\"disabled\", \"\");\n    }\n  }\n\n  cleanup() {\n    if (this.$prev) {\n      this.$prev.remove();\n    }\n\n    this.$prev = null;\n\n    if (this.$next) {\n      this.$next.remove();\n    }\n\n    this.$next = null;\n\n    if (this.$container) {\n      this.$container.remove();\n    }\n\n    this.$container = null;\n  }\n\n  attach() {\n    this.carousel.on(\"refresh change\", this.onRefresh);\n  }\n\n  detach() {\n    this.carousel.off(\"refresh change\", this.onRefresh);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nNavigation.defaults = defaults;\n", "const defaults = {\n  // The minimum number of slides to display dots\n  minSlideCount: 2,\n};\n\nexport class Dots {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.$list = null;\n\n    this.events = {\n      change: this.onChange.bind(this),\n      refresh: this.onRefresh.bind(this),\n    };\n  }\n\n  /**\n   * Build wrapping DOM element containing all dots\n   */\n  buildList() {\n    if (this.carousel.pages.length < this.carousel.option(\"Dots.minSlideCount\")) {\n      return;\n    }\n\n    const $list = document.createElement(\"ol\");\n\n    $list.classList.add(\"carousel__dots\");\n\n    $list.addEventListener(\"click\", (e) => {\n      if (!(\"page\" in e.target.dataset)) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      const page = parseInt(e.target.dataset.page, 10);\n      const carousel = this.carousel;\n\n      if (page === carousel.page) {\n        return;\n      }\n\n      if (carousel.pages.length < 3 && carousel.option(\"infinite\")) {\n        carousel[page == 0 ? \"slidePrev\" : \"slideNext\"]();\n      } else {\n        carousel.slideTo(page);\n      }\n    });\n\n    this.$list = $list;\n\n    this.carousel.$container.appendChild($list);\n    this.carousel.$container.classList.add(\"has-dots\");\n\n    return $list;\n  }\n\n  /**\n   * Remove wrapping DOM element\n   */\n  removeList() {\n    if (this.$list) {\n      this.$list.parentNode.removeChild(this.$list);\n      this.$list = null;\n    }\n\n    this.carousel.$container.classList.remove(\"has-dots\");\n  }\n\n  /**\n   * Remove existing dots and create fresh ones\n   */\n  rebuildDots() {\n    let $list = this.$list;\n\n    const listExists = !!$list;\n    const pagesCount = this.carousel.pages.length;\n\n    if (pagesCount < 2) {\n      if (listExists) {\n        this.removeList();\n      }\n\n      return;\n    }\n\n    if (!listExists) {\n      $list = this.buildList();\n    }\n\n    // Remove existing dots\n    const dotCount = this.$list.children.length;\n\n    if (dotCount > pagesCount) {\n      for (let i = pagesCount; i < dotCount; i++) {\n        this.$list.removeChild(this.$list.lastChild);\n      }\n\n      return;\n    }\n\n    // Create fresh DOM elements (dots) for each page\n    for (let index = dotCount; index < pagesCount; index++) {\n      const $dot = document.createElement(\"li\");\n\n      $dot.classList.add(\"carousel__dot\");\n      $dot.dataset.page = index;\n\n      $dot.setAttribute(\"role\", \"button\");\n      $dot.setAttribute(\"tabindex\", \"0\");\n      $dot.setAttribute(\"title\", this.carousel.localize(\"{{GOTO}}\", [[\"%d\", index + 1]]));\n\n      $dot.addEventListener(\"keydown\", (event) => {\n        const code = event.code;\n\n        let $el;\n\n        if (code === \"Enter\" || code === \"NumpadEnter\") {\n          $el = $dot;\n        } else if (code === \"ArrowRight\") {\n          $el = $dot.nextSibling;\n        } else if (code === \"ArrowLeft\") {\n          $el = $dot.previousSibling;\n        }\n\n        $el && $el.click();\n      });\n\n      this.$list.appendChild($dot);\n    }\n\n    this.setActiveDot();\n  }\n\n  /**\n   * Mark active dot by toggling class name\n   */\n  setActiveDot() {\n    if (!this.$list) {\n      return;\n    }\n\n    this.$list.childNodes.forEach(($dot) => {\n      $dot.classList.remove(\"is-selected\");\n    });\n\n    const $activeDot = this.$list.childNodes[this.carousel.page];\n\n    if ($activeDot) {\n      $activeDot.classList.add(\"is-selected\");\n    }\n  }\n\n  /**\n   * Process carousel `change` event\n   */\n  onChange() {\n    this.setActiveDot();\n  }\n\n  /**\n   * Process carousel `refresh` event\n   */\n  onRefresh() {\n    this.rebuildDots();\n  }\n\n  attach() {\n    this.carousel.on(this.events);\n  }\n\n  detach() {\n    this.removeList();\n\n    this.carousel.off(this.events);\n    this.carousel = null;\n  }\n}\n", "const defaults = {\n  friction: 0.92,\n};\n\nexport class Sync {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.selectedIndex = null;\n    this.friction = 0;\n\n    this.onNavReady = this.onNavReady.bind(this);\n    this.onNavClick = this.onNavClick.bind(this);\n    this.onNavCreateSlide = this.onNavCreateSlide.bind(this);\n\n    this.onTargetChange = this.onTargetChange.bind(this);\n  }\n\n  /**\n   * Make this one as main carousel and selected carousel as navigation\n   * @param {Object} nav Carousel\n   */\n  addAsTargetFor(nav) {\n    this.target = this.carousel;\n    this.nav = nav;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Make this one as navigation carousel for selected carousel\n   * @param {Object} target\n   */\n  addAsNavFor(target) {\n    this.target = target;\n    this.nav = this.carousel;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Attach event listeners on both carousels\n   */\n  attachEvents() {\n    this.nav.options.initialSlide = this.target.options.initialPage;\n\n    this.nav.on(\"ready\", this.onNavReady);\n    this.nav.on(\"createSlide\", this.onNavCreateSlide);\n    this.nav.on(\"Panzoom.click\", this.onNavClick);\n\n    this.target.on(\"change\", this.onTargetChange);\n    this.target.on(\"Panzoom.afterUpdate\", this.onTargetChange);\n  }\n\n  /**\n   * Process main carousel `ready` event; bind events and set initial page\n   */\n  onNavReady() {\n    this.onTargetChange(true);\n  }\n\n  /**\n   * Process main carousel `click` event\n   * @param {Object} panzoom\n   * @param {Object} event\n   */\n  onNavClick(carousel, panzoom, event) {\n    const clickedNavSlide = event.target.closest(\".carousel__slide\");\n\n    if (!clickedNavSlide) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    const selectedNavIndex = parseInt(clickedNavSlide.dataset.index, 10);\n    const selectedSyncPage = this.target.findPageForSlide(selectedNavIndex);\n\n    if (this.target.page !== selectedSyncPage) {\n      this.target.slideTo(selectedSyncPage, { friction: this.friction });\n    }\n\n    this.markSelectedSlide(selectedNavIndex);\n  }\n\n  /**\n   * Process main carousel `createSlide` event\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onNavCreateSlide(carousel, slide) {\n    if (slide.index === this.selectedIndex) {\n      this.markSelectedSlide(slide.index);\n    }\n  }\n\n  /**\n   * Process target carousel `change` event\n   * @param {Object} target\n   */\n  onTargetChange() {\n    const targetIndex = this.target.pages[this.target.page].indexes[0];\n    const selectedNavPage = this.nav.findPageForSlide(targetIndex);\n\n    this.nav.slideTo(selectedNavPage);\n\n    this.markSelectedSlide(targetIndex);\n  }\n\n  /**\n   * Toggle classname for slides that marks currently selected slides\n   * @param {Number} selectedIndex\n   */\n  markSelectedSlide(selectedIndex) {\n    this.selectedIndex = selectedIndex;\n\n    [...this.nav.slides].filter((slide) => slide.$el && slide.$el.classList.remove(\"is-nav-selected\"));\n\n    const slide = this.nav.slides[selectedIndex];\n\n    if (slide && slide.$el) slide.$el.classList.add(\"is-nav-selected\");\n  }\n\n  attach(carousel) {\n    const sync = carousel.options.Sync;\n\n    if (!sync.target && !sync.nav) {\n      return;\n    }\n\n    if (sync.target) {\n      this.addAsNavFor(sync.target);\n    } else if (sync.nav) {\n      this.addAsTargetFor(sync.nav);\n    }\n\n    this.friction = sync.friction;\n  }\n\n  detach() {\n    if (this.nav) {\n      this.nav.off(\"ready\", this.onNavReady);\n      this.nav.off(\"Panzoom.click\", this.onNavClick);\n      this.nav.off(\"createSlide\", this.onNavCreateSlide);\n    }\n\n    if (this.target) {\n      this.target.off(\"Panzoom.afterUpdate\", this.onTargetChange);\n      this.target.off(\"change\", this.onTargetChange);\n    }\n  }\n}\n\n// Expose defaults\nSync.defaults = defaults;\n", "import { Navigation } from \"./Navigation/Navigation.js\";\nimport { Dots } from \"./Dots/Dots.js\";\nimport { Sync } from \"./Sync/Sync.js\";\n\nexport const Plugins = { Navigation, Dots, Sync };\n", "export default {\r\n  NEXT: \"Next slide\",\r\n  PREV: \"Previous slide\",\r\n  GOTO: \"Go to slide #%d\",\r\n};\r\n", "import { Base } from \"../shared/Base/Base.js\";\r\nimport { Panzoom } from \"../Panzoom/Panzoom.js\";\r\n\r\nimport { extend } from \"../shared/utils/extend.js\";\r\nimport { round } from \"../shared/utils/round.js\";\r\nimport { throttle } from \"../shared/utils/throttle.js\";\r\n\r\nimport { Plugins } from \"./plugins/index.js\";\r\n\r\n// Default language\r\nimport en from \"./l10n/en.js\";\r\n\r\nconst defaults = {\r\n  // Virtual slides. Each object should have at least `html` property that will be used to set content,\r\n  // example: `slides: [{html: 'First slide'}, {html: 'Second slide'}]`\r\n  slides: [],\r\n\r\n  // Number of slides to preload before/after visible slides\r\n  preload: 0,\r\n\r\n  // Number of slides to group into the page,\r\n  // if `auto` - group all slides that fit into the viewport\r\n  slidesPerPage: \"auto\",\r\n\r\n  // Index of initial page\r\n  initialPage: null,\r\n\r\n  // Index of initial slide\r\n  initialSlide: null,\r\n\r\n  // Panzoom friction while changing page\r\n  friction: 0.92,\r\n\r\n  // Should center active page\r\n  center: true,\r\n\r\n  // Should carousel scroll infinitely\r\n  infinite: true,\r\n\r\n  // Should the gap be filled before first and after last slide if `infinite: false`\r\n  fill: true,\r\n\r\n  // Should Carousel settle at any position after a swipe.\r\n  dragFree: false,\r\n\r\n  // Prefix for CSS classes, must be the same as the  SCSS `$carousel-prefix` variable\r\n  prefix: \"\",\r\n\r\n  // Class names for DOM elements (without prefix)\r\n  classNames: {\r\n    viewport: \"carousel__viewport\",\r\n    track: \"carousel__track\",\r\n    slide: \"carousel__slide\",\r\n\r\n    // Classname toggled for slides inside current page\r\n    slideSelected: \"is-selected\",\r\n  },\r\n\r\n  // Localization of strings\r\n  l10n: en,\r\n};\r\n\r\nexport class Carousel extends Base {\r\n  /**\r\n   * Carousel constructor\r\n   * @constructs Carousel\r\n   * @param {HTMLElement} $container - Carousel container\r\n   * @param {Object} [options] - Options for Carousel\r\n   */\r\n  constructor($container, options = {}) {\r\n    options = extend(true, {}, defaults, options);\r\n\r\n    super(options);\r\n\r\n    this.state = \"init\";\r\n\r\n    this.$container = $container;\r\n\r\n    if (!(this.$container instanceof HTMLElement)) {\r\n      throw new Error(\"No root element provided\");\r\n    }\r\n\r\n    this.slideNext = throttle(this.slideNext.bind(this), 250, true);\r\n    this.slidePrev = throttle(this.slidePrev.bind(this), 250, true);\r\n\r\n    this.init();\r\n\r\n    $container.__Carousel = this;\r\n  }\r\n\r\n  /**\r\n   * Perform initialization\r\n   */\r\n  init() {\r\n    this.pages = [];\r\n    this.page = this.pageIndex = null;\r\n    this.prevPage = this.prevPageIndex = null;\r\n\r\n    this.attachPlugins(Carousel.Plugins);\r\n\r\n    this.trigger(\"init\");\r\n\r\n    this.initLayout();\r\n\r\n    this.initSlides();\r\n\r\n    this.updateMetrics();\r\n\r\n    if (this.$track && this.pages.length) {\r\n      this.$track.style.transform = `translate3d(${this.pages[this.page].left * -1}px, 0px, 0) scale(1)`;\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n\r\n    this.initPanzoom();\r\n\r\n    this.state = \"ready\";\r\n\r\n    this.trigger(\"ready\");\r\n  }\r\n\r\n  /**\r\n   * Initialize layout; create necessary elements\r\n   */\r\n  initLayout() {\r\n    const prefix = this.option(\"prefix\");\r\n    const classNames = this.option(\"classNames\");\r\n\r\n    this.$viewport = this.option(\"viewport\") || this.$container.querySelector(`.${prefix}${classNames.viewport}`);\r\n\r\n    if (!this.$viewport) {\r\n      this.$viewport = document.createElement(\"div\");\r\n      this.$viewport.classList.add(...(prefix + classNames.viewport).split(\" \"));\r\n\r\n      this.$viewport.append(...this.$container.childNodes);\r\n\r\n      this.$container.appendChild(this.$viewport);\r\n    }\r\n\r\n    this.$track = this.option(\"track\") || this.$container.querySelector(`.${prefix}${classNames.track}`);\r\n\r\n    if (!this.$track) {\r\n      this.$track = document.createElement(\"div\");\r\n      this.$track.classList.add(...(prefix + classNames.track).split(\" \"));\r\n\r\n      this.$track.append(...this.$viewport.childNodes);\r\n\r\n      this.$viewport.appendChild(this.$track);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fill `slides` array with objects from existing nodes and/or `slides` option\r\n   */\r\n  initSlides() {\r\n    this.slides = [];\r\n\r\n    // Get existing slides from the DOM\r\n    const elems = this.$viewport.querySelectorAll(`.${this.option(\"prefix\")}${this.option(\"classNames.slide\")}`);\r\n\r\n    elems.forEach((el) => {\r\n      const slide = {\r\n        $el: el,\r\n        isDom: true,\r\n      };\r\n\r\n      this.slides.push(slide);\r\n\r\n      this.trigger(\"createSlide\", slide, this.slides.length);\r\n    });\r\n\r\n    // Add virtual slides, but do not create DOM elements yet,\r\n    // because they will be created dynamically based on current carousel position\r\n    if (Array.isArray(this.options.slides)) {\r\n      this.slides = extend(true, [...this.slides], this.options.slides);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do all calculations related to slide size and paging\r\n   */\r\n  updateMetrics() {\r\n    // Calculate content width, viewport width\r\n    // ===\r\n    let contentWidth = 0;\r\n    let indexes = [];\r\n    let lastSlideWidth;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n      const slideWidth = slide.isDom || !lastSlideWidth ? this.getSlideMetrics($el) : lastSlideWidth;\r\n\r\n      slide.index = index;\r\n      slide.width = slideWidth;\r\n      slide.left = contentWidth;\r\n\r\n      lastSlideWidth = slideWidth;\r\n      contentWidth += slideWidth;\r\n\r\n      indexes.push(index);\r\n    });\r\n\r\n    let viewportWidth = Math.max(this.$track.offsetWidth, round(this.$track.getBoundingClientRect().width));\r\n\r\n    let viewportStyles = getComputedStyle(this.$track);\r\n    viewportWidth = viewportWidth - (parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight));\r\n\r\n    this.contentWidth = contentWidth;\r\n    this.viewportWidth = viewportWidth;\r\n\r\n    // Split slides into pages\r\n    // ===\r\n    const pages = [];\r\n    const slidesPerPage = this.option(\"slidesPerPage\");\r\n\r\n    if (Number.isInteger(slidesPerPage) && contentWidth > viewportWidth) {\r\n      // Fixed number of slides in the page\r\n      for (let i = 0; i < this.slides.length; i += slidesPerPage) {\r\n        pages.push({\r\n          indexes: indexes.slice(i, i + slidesPerPage),\r\n          slides: this.slides.slice(i, i + slidesPerPage),\r\n        });\r\n      }\r\n    } else {\r\n      // Slides that fit inside viewport\r\n      let currentPage = 0;\r\n      let currentWidth = 0;\r\n\r\n      for (let i = 0; i < this.slides.length; i += 1) {\r\n        let slide = this.slides[i];\r\n\r\n        // Add next page\r\n        if (!pages.length || currentWidth + slide.width > viewportWidth) {\r\n          pages.push({\r\n            indexes: [],\r\n            slides: [],\r\n          });\r\n\r\n          currentPage = pages.length - 1;\r\n          currentWidth = 0;\r\n        }\r\n\r\n        currentWidth += slide.width;\r\n\r\n        pages[currentPage].indexes.push(i);\r\n        pages[currentPage].slides.push(slide);\r\n      }\r\n    }\r\n\r\n    const shouldCenter = this.option(\"center\");\r\n    const shouldFill = this.option(\"fill\");\r\n\r\n    // Calculate width and start position for each page\r\n    // ===\r\n    pages.forEach((page, index) => {\r\n      page.index = index;\r\n      page.width = page.slides.reduce((sum, slide) => sum + slide.width, 0);\r\n\r\n      page.left = page.slides[0].left;\r\n\r\n      if (shouldCenter) {\r\n        page.left += (viewportWidth - page.width) * 0.5 * -1;\r\n      }\r\n\r\n      if (shouldFill && !this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n        page.left = Math.max(page.left, 0);\r\n        page.left = Math.min(page.left, contentWidth - viewportWidth);\r\n      }\r\n    });\r\n\r\n    // Merge pages\r\n    // ===\r\n    const rez = [];\r\n    let prevPage;\r\n\r\n    pages.forEach((page2) => {\r\n      const page = { ...page2 };\r\n\r\n      if (prevPage && page.left === prevPage.left) {\r\n        prevPage.width += page.width;\r\n\r\n        prevPage.slides = [...prevPage.slides, ...page.slides];\r\n        prevPage.indexes = [...prevPage.indexes, ...page.indexes];\r\n      } else {\r\n        page.index = rez.length;\r\n\r\n        prevPage = page;\r\n\r\n        rez.push(page);\r\n      }\r\n    });\r\n\r\n    this.pages = rez;\r\n\r\n    let page = this.page;\r\n\r\n    if (page === null) {\r\n      const initialSlide = this.option(\"initialSlide\");\r\n\r\n      if (initialSlide !== null) {\r\n        page = this.findPageForSlide(initialSlide);\r\n      } else {\r\n        page = parseInt(this.option(\"initialPage\", 0), 10) || 0;\r\n      }\r\n\r\n      if (!rez[page]) {\r\n        page = rez.length && page > rez.length ? rez[rez.length - 1].index : 0;\r\n      }\r\n\r\n      this.page = page;\r\n      this.pageIndex = page;\r\n    }\r\n\r\n    this.updatePanzoom();\r\n\r\n    this.trigger(\"refresh\");\r\n  }\r\n\r\n  /**\r\n   * Calculate slide element width (including left, right margins)\r\n   * @param {Object} node\r\n   * @returns {Number} Width in px\r\n   */\r\n  getSlideMetrics(node) {\r\n    if (!node) {\r\n      const firstSlide = this.slides[0];\r\n\r\n      node = document.createElement(\"div\");\r\n\r\n      node.dataset.isTestEl = 1;\r\n      node.style.visibility = \"hidden\";\r\n      node.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n      // Assume all slides have the same custom class, if any\r\n      if (firstSlide.customClass) {\r\n        node.classList.add(...firstSlide.customClass.split(\" \"));\r\n      }\r\n\r\n      this.$track.prepend(node);\r\n    }\r\n\r\n    let width = Math.max(node.offsetWidth, round(node.getBoundingClientRect().width));\r\n\r\n    // Add left/right margin\r\n    const style = node.currentStyle || window.getComputedStyle(node);\r\n    width = width + (parseFloat(style.marginLeft) || 0) + (parseFloat(style.marginRight) || 0);\r\n\r\n    if (node.dataset.isTestEl) {\r\n      node.remove();\r\n    }\r\n\r\n    return width;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Integer} index Index of the slide\r\n   * @returns {Integer|null} Index of the page if found, or null\r\n   */\r\n  findPageForSlide(index) {\r\n    index = parseInt(index, 10) || 0;\r\n\r\n    const page = this.pages.find((page) => {\r\n      return page.indexes.indexOf(index) > -1;\r\n    });\r\n\r\n    return page ? page.index : null;\r\n  }\r\n\r\n  /**\r\n   * Slide to next page, if possible\r\n   */\r\n  slideNext() {\r\n    this.slideTo(this.pageIndex + 1);\r\n  }\r\n\r\n  /**\r\n   * Slide to previous page, if possible\r\n   */\r\n  slidePrev() {\r\n    this.slideTo(this.pageIndex - 1);\r\n  }\r\n\r\n  /**\r\n   * Slides carousel to given page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Object} [params] - Additional options\r\n   */\r\n  slideTo(page, params = {}) {\r\n    const { x = this.setPage(page, true) * -1, y = 0, friction = this.option(\"friction\") } = params;\r\n\r\n    if (this.Panzoom.content.x === x && !this.Panzoom.velocity.x && friction) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.panTo({\r\n      x,\r\n      y,\r\n      friction,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    if (this.state === \"ready\" && this.Panzoom.state === \"ready\") {\r\n      this.trigger(\"settle\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialise main Panzoom instance\r\n   */\r\n  initPanzoom() {\r\n    if (this.Panzoom) {\r\n      this.Panzoom.destroy();\r\n    }\r\n\r\n    // Create fresh object containing options for Pazoom instance\r\n    const options = extend(\r\n      true,\r\n      {},\r\n      {\r\n        // Track element will be set as Panzoom $content\r\n        content: this.$track,\r\n        wrapInner: false,\r\n        resizeParent: false,\r\n\r\n        // Disable any user interaction\r\n        zoom: false,\r\n        click: false,\r\n\r\n        // Right now, only horizontal navigation is supported\r\n        lockAxis: \"x\",\r\n\r\n        x: this.pages.length ? this.pages[this.page].left * -1 : 0,\r\n        centerOnStart: false,\r\n\r\n        // Make `textSelection` option more easy to customize\r\n        textSelection: () => this.option(\"textSelection\", false),\r\n\r\n        // Disable dragging if content (e.g. all slides) fits inside viewport\r\n        panOnlyZoomed: function () {\r\n          return this.content.width <= this.viewport.width;\r\n        },\r\n      },\r\n      this.option(\"Panzoom\")\r\n    );\r\n\r\n    // Create new Panzoom instance\r\n    this.Panzoom = new Panzoom(this.$container, options);\r\n\r\n    this.Panzoom.on({\r\n      // Bubble events\r\n      \"*\": (name, ...details) => this.trigger(`Panzoom.${name}`, ...details),\r\n      // The rest of events to be processed\r\n      afterUpdate: () => {\r\n        this.updatePage();\r\n      },\r\n      beforeTransform: this.onBeforeTransform.bind(this),\r\n      touchEnd: this.onTouchEnd.bind(this),\r\n      endAnimation: () => {\r\n        this.trigger(\"settle\");\r\n      },\r\n    });\r\n\r\n    // The contents of the slides may cause the page scroll bar to appear, so the carousel width may change\r\n    // and slides have to be repositioned\r\n    this.updateMetrics();\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  updatePanzoom() {\r\n    if (!this.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.content = {\r\n      ...this.Panzoom.content,\r\n      fitWidth: this.contentWidth,\r\n      origWidth: this.contentWidth,\r\n      width: this.contentWidth,\r\n    };\r\n\r\n    if (this.pages.length > 1 && this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundX = null;\r\n    } else if (this.pages.length) {\r\n      this.Panzoom.boundX = {\r\n        from: this.pages[this.pages.length - 1].left * -1,\r\n        to: this.pages[0].left * -1,\r\n      };\r\n    }\r\n\r\n    if (this.option(\"infiniteY\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundY = null;\r\n    } else {\r\n      this.Panzoom.boundY = {\r\n        from: 0,\r\n        to: 0,\r\n      };\r\n    }\r\n\r\n    this.Panzoom.handleCursor();\r\n  }\r\n\r\n  manageSlideVisiblity() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    let currentX = this.Panzoom ? this.Panzoom.content.x * -1 : this.pages.length ? this.pages[this.page].left : 0;\r\n\r\n    const preload = this.option(\"preload\");\r\n    const infinite = this.option(\"infiniteX\", this.option(\"infinite\"));\r\n\r\n    const paddingLeft = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-left\"));\r\n    const paddingRight = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-right\"));\r\n\r\n    // Check visibility of each slide\r\n    this.slides.forEach((slide) => {\r\n      let leftBoundary, rightBoundary;\r\n\r\n      let hasDiff = 0;\r\n\r\n      // #1 - slides in current viewport; this does not include infinite items\r\n      leftBoundary = currentX - paddingLeft;\r\n      rightBoundary = currentX + viewportWidth + paddingRight;\r\n\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n      rightBoundary += preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideCurrentInterval = slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from previous interval\r\n      leftBoundary = currentX + contentWidth - paddingLeft;\r\n      rightBoundary = currentX + contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insidePrevInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from next interval\r\n      leftBoundary = currentX - contentWidth - paddingLeft;\r\n      rightBoundary = currentX - contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideNextInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // Create virtual slides that should be visible or preloaded, remove others\r\n      if (insidePrevInterval || insideCurrentInterval || insideNextInterval) {\r\n        this.createSlideEl(slide);\r\n\r\n        if (insideCurrentInterval) {\r\n          hasDiff = 0;\r\n        }\r\n\r\n        if (insidePrevInterval) {\r\n          hasDiff = -1;\r\n        }\r\n\r\n        if (insideNextInterval) {\r\n          hasDiff = 1;\r\n        }\r\n\r\n        // Bring preloaded slides back to viewport, if needed\r\n        if (slide.left + slide.width > currentX && slide.left <= currentX + viewportWidth + paddingRight) {\r\n          hasDiff = 0;\r\n        }\r\n      } else {\r\n        this.removeSlideEl(slide);\r\n      }\r\n\r\n      slide.hasDiff = hasDiff;\r\n    });\r\n\r\n    // Reposition slides for continuity\r\n    let nextIndex = 0;\r\n    let nextPos = 0;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      let updatedX = 0;\r\n\r\n      if (slide.$el) {\r\n        if (index !== nextIndex || slide.hasDiff) {\r\n          updatedX = nextPos + slide.hasDiff * contentWidth;\r\n        } else {\r\n          nextPos = 0;\r\n        }\r\n\r\n        slide.$el.style.left = Math.abs(updatedX) > 0.1 ? `${nextPos + slide.hasDiff * contentWidth}px` : \"\";\r\n\r\n        nextIndex++;\r\n      } else {\r\n        nextPos += slide.width;\r\n      }\r\n    });\r\n\r\n    this.markSelectedSlides();\r\n  }\r\n\r\n  /**\r\n   * Creates main DOM element for virtual slides,\r\n   * lazy loads images inside regular slides\r\n   * @param {Object} slide\r\n   */\r\n  createSlideEl(slide) {\r\n    if (!slide) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$el) {\r\n      let curentIndex = slide.$el.dataset.index;\r\n\r\n      if (!curentIndex || parseInt(curentIndex, 10) !== slide.index) {\r\n        slide.$el.dataset.index = slide.index;\r\n\r\n        // Lazy load images\r\n        // ===\r\n        slide.$el.querySelectorAll(\"[data-lazy-srcset]\").forEach((node) => {\r\n          node.srcset = node.dataset.lazySrcset;\r\n        });\r\n\r\n        slide.$el.querySelectorAll(\"[data-lazy-src]\").forEach((node) => {\r\n          let lazySrc = node.dataset.lazySrc;\r\n\r\n          if (node instanceof HTMLImageElement) {\r\n            node.src = lazySrc;\r\n          } else {\r\n            node.style.backgroundImage = `url('${lazySrc}')`;\r\n          }\r\n        });\r\n\r\n        // Lazy load slide background image\r\n        // ===\r\n        let lazySrc;\r\n\r\n        if ((lazySrc = slide.$el.dataset.lazySrc)) {\r\n          slide.$el.style.backgroundImage = `url('${lazySrc}')`;\r\n        }\r\n\r\n        slide.state = \"ready\";\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    const div = document.createElement(\"div\");\r\n\r\n    div.dataset.index = slide.index;\r\n    div.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n    if (slide.customClass) {\r\n      div.classList.add(...slide.customClass.split(\" \"));\r\n    }\r\n\r\n    if (slide.html) {\r\n      div.innerHTML = slide.html;\r\n    }\r\n\r\n    const allElelements = [];\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      if (slide.$el) {\r\n        allElelements.push(index);\r\n      }\r\n    });\r\n\r\n    // Find a place in DOM to insert an element\r\n    const goal = slide.index;\r\n    let refSlide = null;\r\n\r\n    if (allElelements.length) {\r\n      let refIndex = allElelements.reduce((prev, curr) =>\r\n        Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev\r\n      );\r\n      refSlide = this.slides[refIndex];\r\n    }\r\n\r\n    this.$track.insertBefore(\r\n      div,\r\n      refSlide && refSlide.$el ? (refSlide.index < slide.index ? refSlide.$el.nextSibling : refSlide.$el) : null\r\n    );\r\n\r\n    slide.$el = div;\r\n\r\n    this.trigger(\"createSlide\", slide, goal);\r\n\r\n    return slide;\r\n  }\r\n\r\n  /**\r\n   * Removes main DOM element of given slide\r\n   * @param {Object} slide\r\n   */\r\n  removeSlideEl(slide) {\r\n    if (slide.$el && !slide.isDom) {\r\n      this.trigger(\"removeSlide\", slide);\r\n\r\n      slide.$el.remove();\r\n      slide.$el = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles selected class name and aria-hidden attribute for slides based on visibility\r\n   */\r\n  markSelectedSlides() {\r\n    const selectedClass = this.option(\"classNames.slideSelected\");\r\n    const attr = \"aria-hidden\";\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n\r\n      if (!$el) {\r\n        return;\r\n      }\r\n\r\n      const page = this.pages[this.page];\r\n\r\n      if (page && page.indexes && page.indexes.indexOf(index) > -1) {\r\n        if (selectedClass && !$el.classList.contains(selectedClass)) {\r\n          $el.classList.add(selectedClass);\r\n          this.trigger(\"selectSlide\", slide);\r\n        }\r\n\r\n        $el.removeAttribute(attr);\r\n      } else {\r\n        if (selectedClass && $el.classList.contains(selectedClass)) {\r\n          $el.classList.remove(selectedClass);\r\n          this.trigger(\"unselectSlide\", slide);\r\n        }\r\n\r\n        $el.setAttribute(attr, true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform all calculations and center current page\r\n   */\r\n  updatePage() {\r\n    this.updateMetrics();\r\n\r\n    this.slideTo(this.page, { friction: 0 });\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.beforeTransform` event to remove slides moved out of viewport and\r\n   * to create necessary ones\r\n   */\r\n  onBeforeTransform() {\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.manageInfiniteTrack();\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  /**\r\n   * Seamlessly flip position of infinite carousel, if needed; this way x position stays low\r\n   */\r\n  manageInfiniteTrack() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    if (!this.option(\"infiniteX\", this.option(\"infinite\")) || this.pages.length < 2 || contentWidth < viewportWidth) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = this.Panzoom;\r\n\r\n    let isFlipped = false;\r\n\r\n    if (panzoom.content.x < (contentWidth - viewportWidth) * -1) {\r\n      panzoom.content.x += contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex - this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (panzoom.content.x > viewportWidth) {\r\n      panzoom.content.x -= contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex + this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (isFlipped && panzoom.state === \"pointerdown\") {\r\n      panzoom.resetDragPosition();\r\n    }\r\n\r\n    return isFlipped;\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.touchEnd` event; slide to next/prev page if needed\r\n   * @param {object} panzoom\r\n   */\r\n  onTouchEnd(panzoom, event) {\r\n    const dragFree = this.option(\"dragFree\");\r\n\r\n    // If this is a quick horizontal flick, slide to next/prev slide\r\n    if (\r\n      !dragFree &&\r\n      this.pages.length > 1 &&\r\n      panzoom.dragOffset.time < 350 &&\r\n      Math.abs(panzoom.dragOffset.y) < 1 &&\r\n      Math.abs(panzoom.dragOffset.x) > 5\r\n    ) {\r\n      this[panzoom.dragOffset.x < 0 ? \"slideNext\" : \"slidePrev\"]();\r\n      return;\r\n    }\r\n\r\n    // Set the slide at the end of the animation as the current one,\r\n    // or slide to closest page\r\n    if (dragFree) {\r\n      const [, nextPageIndex] = this.getPageFromPosition(panzoom.transform.x * -1);\r\n      this.setPage(nextPageIndex);\r\n    } else {\r\n      this.slideToClosest();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Slides to the closest page (useful, if carousel is changed manually)\r\n   * @param {Object} [params] - Object containing additional options\r\n   */\r\n  slideToClosest(params = {}) {\r\n    let [, nextPageIndex] = this.getPageFromPosition(this.Panzoom.content.x * -1);\r\n\r\n    this.slideTo(nextPageIndex, params);\r\n  }\r\n\r\n  /**\r\n   * Returns index of closest page to given x position\r\n   * @param {Number} xPos\r\n   */\r\n  getPageFromPosition(xPos) {\r\n    const pageCount = this.pages.length;\r\n    const center = this.option(\"center\");\r\n\r\n    if (center) {\r\n      xPos += this.viewportWidth * 0.5;\r\n    }\r\n\r\n    const interval = Math.floor(xPos / this.contentWidth);\r\n\r\n    xPos -= interval * this.contentWidth;\r\n\r\n    let slide = this.slides.find((slide) => slide.left <= xPos && slide.left + slide.width > xPos);\r\n\r\n    if (slide) {\r\n      let pageIndex = this.findPageForSlide(slide.index);\r\n\r\n      return [pageIndex, pageIndex + interval * pageCount];\r\n    }\r\n\r\n    return [0, 0];\r\n  }\r\n\r\n  /**\r\n   * Changes active page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Boolean} toClosest - to closest page based on scroll distance (for infinite navigation)\r\n   */\r\n  setPage(page, toClosest) {\r\n    let nextPosition = 0;\r\n    let pageIndex = parseInt(page, 10) || 0;\r\n\r\n    const prevPage = this.page,\r\n      prevPageIndex = this.pageIndex,\r\n      pageCount = this.pages.length;\r\n\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    page = ((pageIndex % pageCount) + pageCount) % pageCount;\r\n\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n      const nextInterval = Math.floor(pageIndex / pageCount) || 0,\r\n        elemDimWidth = contentWidth;\r\n\r\n      nextPosition = this.pages[page].left + nextInterval * elemDimWidth;\r\n\r\n      if (toClosest === true && pageCount > 2) {\r\n        let currPosition = this.Panzoom.content.x * -1;\r\n\r\n        // * Find closest interval\r\n        const decreasedPosition = nextPosition - elemDimWidth,\r\n          increasedPosition = nextPosition + elemDimWidth,\r\n          diff1 = Math.abs(currPosition - nextPosition),\r\n          diff2 = Math.abs(currPosition - decreasedPosition),\r\n          diff3 = Math.abs(currPosition - increasedPosition);\r\n\r\n        if (diff3 < diff1 && diff3 <= diff2) {\r\n          nextPosition = increasedPosition;\r\n          pageIndex += pageCount;\r\n        } else if (diff2 < diff1 && diff2 < diff3) {\r\n          nextPosition = decreasedPosition;\r\n          pageIndex -= pageCount;\r\n        }\r\n      }\r\n    } else {\r\n      page = pageIndex = Math.max(0, Math.min(pageIndex, pageCount - 1));\r\n\r\n      nextPosition = this.pages.length ? this.pages[page].left : 0;\r\n    }\r\n\r\n    this.page = page;\r\n    this.pageIndex = pageIndex;\r\n\r\n    if (prevPage !== null && page !== prevPage) {\r\n      this.prevPage = prevPage;\r\n      this.prevPageIndex = prevPageIndex;\r\n\r\n      this.trigger(\"change\", page, prevPage);\r\n    }\r\n\r\n    return nextPosition;\r\n  }\r\n\r\n  /**\r\n   * Clean up\r\n   */\r\n  destroy() {\r\n    this.state = \"destroy\";\r\n\r\n    this.slides.forEach((slide) => {\r\n      this.removeSlideEl(slide);\r\n    });\r\n\r\n    this.slides = [];\r\n\r\n    this.Panzoom.destroy();\r\n\r\n    this.detachPlugins();\r\n  }\r\n}\r\n\r\n// Expose version\r\nCarousel.version = \"__VERSION__\";\r\n\r\n// Static properties are a recent addition that dont work in all browsers yet\r\nCarousel.Plugins = Plugins;\r\n", "import { isScrollable } from \"../../../../src/shared/utils/isScrollable.js\";\n\nexport class ScrollLock {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n    this.viewport = null;\n\n    this.pendingUpdate = null;\n\n    for (const methodName of [\"onReady\", \"onResize\", \"onTouchstart\", \"onTouchmove\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Process `initLayout` event to attach event listeners and resize viewport if needed\n   */\n  onReady() {\n    //* Support Visual Viewport API\n    // https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API\n    const viewport = window.visualViewport;\n\n    if (viewport) {\n      this.viewport = viewport;\n      this.startY = 0;\n\n      viewport.addEventListener(\"resize\", this.onResize);\n\n      this.updateViewport();\n    }\n\n    //* Prevent bouncing while scrolling on mobile devices\n    window.addEventListener(\"touchstart\", this.onTouchstart, { passive: false });\n    window.addEventListener(\"touchmove\", this.onTouchmove, { passive: false });\n\n    //* Prevent window scrolling with mouse wheel\n    window.addEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  /**\n   * Handle `resize` event to call `updateViewport`\n   */\n  onResize() {\n    this.updateViewport();\n  }\n\n  /**\n   * Scale $container proportionally to actually fit inside browser,\n   * e.g., disable viewport zooming\n   */\n  updateViewport() {\n    const fancybox = this.fancybox,\n      viewport = this.viewport,\n      scale = viewport.scale || 1,\n      $container = fancybox.$container;\n\n    if (!$container) {\n      return;\n    }\n\n    let width = \"\",\n      height = \"\",\n      transform = \"\";\n\n    if (scale - 1 > 0.1) {\n      width = `${viewport.width * scale}px`;\n      height = `${viewport.height * scale}px`;\n      transform = `translate3d(${viewport.offsetLeft}px, ${viewport.offsetTop}px, 0) scale(${1 / scale})`;\n    }\n\n    $container.style.width = width;\n    $container.style.height = height;\n    $container.style.transform = transform;\n  }\n\n  /**\n   * Handle `touchstart` event to mark drag start position\n   * @param {Object} event\n   */\n  onTouchstart(event) {\n    this.startY = event.touches ? event.touches[0].screenY : event.screenY;\n  }\n\n  /**\n   * Handle `touchmove` event to fix scrolling on mobile devices (iOS)\n   * @param {Object} event\n   */\n  onTouchmove(event) {\n    const startY = this.startY;\n    const zoom = window.innerWidth / window.document.documentElement.clientWidth;\n\n    if (!event.cancelable) {\n      return;\n    }\n\n    if (event.touches.length > 1 || zoom !== 1) {\n      return;\n    }\n\n    const el = isScrollable(event.composedPath()[0]);\n\n    if (!el) {\n      event.preventDefault();\n      return;\n    }\n\n    const style = window.getComputedStyle(el);\n    const height = parseInt(style.getPropertyValue(\"height\"), 10);\n\n    const curY = event.touches ? event.touches[0].screenY : event.screenY;\n\n    const isAtTop = startY <= curY && el.scrollTop === 0;\n    const isAtBottom = startY >= curY && el.scrollHeight - el.scrollTop === height;\n\n    if (isAtTop || isAtBottom) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   */\n  onWheel(event) {\n    if (!isScrollable(event.composedPath()[0])) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Clean everything up\n   */\n  cleanup() {\n    if (this.pendingUpdate) {\n      cancelAnimationFrame(this.pendingUpdate);\n      this.pendingUpdate = null;\n    }\n\n    const viewport = this.viewport;\n\n    if (viewport) {\n      viewport.removeEventListener(\"resize\", this.onResize);\n      this.viewport = null;\n    }\n\n    window.removeEventListener(\"touchstart\", this.onTouchstart, false);\n    window.removeEventListener(\"touchmove\", this.onTouchmove, false);\n\n    window.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  attach() {\n    this.fancybox.on(\"initLayout\", this.onReady);\n  }\n\n  detach() {\n    this.fancybox.off(\"initLayout\", this.onReady);\n\n    this.cleanup();\n  }\n}\n", "import { extend } from \"../../../shared/utils/extend.js\";\nimport { Carousel } from \"../../../Carousel/Carousel.js\";\n\nconst defaults = {\n  // The minimum number of images in the gallery to display thumbnails\n  minSlideCount: 2,\n\n  // Minimum screen height to display thumbnails\n  minScreenHeight: 500,\n\n  // Automatically show thumbnails when opened\n  autoStart: true,\n\n  // Keyboard shortcut to toggle thumbnail container\n  key: \"t\",\n\n  // Customize Carousel instance\n  Carousel: {},\n\n  tpl: `<div class=\"fancybox__thumb\" style=\"background-image:url('{{src}}')\"></div>`,\n};\n\nexport class Thumbs {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    this.$container = null;\n    this.state = \"init\";\n\n    for (const methodName of [\"onPrepare\", \"onClosing\", \"onKeydown\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      prepare: this.onPrepare,\n      closing: this.onClosing,\n      keydown: this.onKeydown,\n    };\n  }\n\n  /**\n   * Process `prepare` event to build the layout\n   */\n  onPrepare() {\n    // Get slides, skip if the total number is less than the minimum\n    const slides = this.getSlides();\n\n    if (slides.length < this.fancybox.option(\"Thumbs.minSlideCount\")) {\n      this.state = \"disabled\";\n      return;\n    }\n\n    if (\n      this.fancybox.option(\"Thumbs.autoStart\") === true &&\n      this.fancybox.Carousel.Panzoom.content.height >= this.fancybox.option(\"Thumbs.minScreenHeight\")\n    ) {\n      this.build();\n    }\n  }\n\n  /**\n   * Process `closing` event to disable all events\n   */\n  onClosing() {\n    if (this.Carousel) {\n      this.Carousel.Panzoom.detachEvents();\n    }\n  }\n\n  /**\n   * Process `keydown` event to enable thumbnail list toggling using keyboard key\n   * @param {Object} fancybox\n   * @param {String} key\n   */\n  onKeydown(fancybox, key) {\n    if (key === fancybox.option(\"Thumbs.key\")) {\n      this.toggle();\n    }\n  }\n\n  /**\n   * Build layout and init thumbnail Carousel\n   */\n  build() {\n    if (this.$container) {\n      return;\n    }\n\n    // Create wrapping element and append to layout\n    const $container = document.createElement(\"div\");\n\n    $container.classList.add(\"fancybox__thumbs\");\n\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel.nextSibling);\n\n    // Initialise thumbnail carousel with all slides\n    this.Carousel = new Carousel(\n      $container,\n      extend(\n        true,\n        {\n          Dots: false,\n          Navigation: false,\n          Sync: {\n            friction: 0,\n          },\n          infinite: false,\n          center: true,\n          fill: true,\n          dragFree: true,\n          slidesPerPage: 1,\n          preload: 1,\n        },\n        this.fancybox.option(\"Thumbs.Carousel\"),\n        {\n          Sync: {\n            target: this.fancybox.Carousel,\n          },\n          slides: this.getSlides(),\n        }\n      )\n    );\n\n    // Slide carousel on wheel event\n    this.Carousel.Panzoom.on(\"wheel\", (panzoom, event) => {\n      event.preventDefault();\n\n      this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\n    });\n\n    this.$container = $container;\n\n    this.state = \"visible\";\n  }\n\n  /**\n   * Process all fancybox slides to get all thumbnail images\n   */\n  getSlides() {\n    const slides = [];\n\n    for (const slide of this.fancybox.items) {\n      const thumb = slide.thumb;\n\n      if (thumb) {\n        slides.push({\n          html: this.fancybox.option(\"Thumbs.tpl\").replace(/\\{\\{src\\}\\}/gi, thumb),\n          customClass: `has-thumb has-${slide.type || \"image\"}`,\n        });\n      }\n    }\n\n    return slides;\n  }\n\n  /**\n   * Toggle visibility of thumbnail list\n   * Tip: you can use `Fancybox.getInstance().plugins.Thumbs.toggle()` from anywhere in your code\n   */\n  toggle() {\n    if (this.state === \"visible\") {\n      this.hide();\n    } else if (this.state === \"hidden\") {\n      this.show();\n    } else {\n      this.build();\n    }\n  }\n\n  /**\n   * Show thumbnail list\n   */\n  show() {\n    if (this.state === \"hidden\") {\n      this.$container.style.display = \"\";\n\n      this.Carousel.Panzoom.attachEvents();\n\n      this.state = \"visible\";\n    }\n  }\n\n  /**\n   * Hide thumbnail list\n   */\n  hide() {\n    if (this.state === \"visible\") {\n      this.Carousel.Panzoom.detachEvents();\n\n      this.$container.style.display = \"none\";\n\n      this.state = \"hidden\";\n    }\n  }\n\n  /**\n   * Reset the state\n   */\n  cleanup() {\n    if (this.Carousel) {\n      this.Carousel.destroy();\n      this.Carousel = null;\n    }\n\n    if (this.$container) {\n      this.$container.remove();\n      this.$container = null;\n    }\n\n    this.state = \"init\";\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nThumbs.defaults = defaults;\n", "import { extend } from \"../../../shared/utils/extend.js\";\n\nconst buildURLQuery = (src, obj) => {\n  const url = new URL(src);\n  const params = new URLSearchParams(url.search);\n\n  let rez = new URLSearchParams();\n\n  for (const [key, value] of [...params, ...Object.entries(obj)]) {\n    // Youtube\n    if (key === \"t\") {\n      rez.set(\"start\", parseInt(value));\n    } else {\n      rez.set(key, value);\n    }\n  }\n\n  // Convert to 'foo=1&bar=2&baz=3'\n  rez = rez.toString();\n\n  // Vimeo\n  // https://vimeo.zendesk.com/hc/en-us/articles/360000121668-Starting-playback-at-a-specific-timecode\n  let matches = src.match(/#t=((.*)?\\d+s)/);\n\n  if (matches) {\n    rez += `#t=${matches[1]}`;\n  }\n\n  return rez;\n};\n\nconst defaults = {\n  // General options for any video content (Youtube, Vimeo, HTML5 video)\n  video: {\n    autoplay: true,\n    ratio: 16 / 9,\n  },\n  // Youtube embed parameters\n  youtube: {\n    autohide: 1,\n    fs: 1,\n    rel: 0,\n    hd: 1,\n    wmode: \"transparent\",\n    enablejsapi: 1,\n    html5: 1,\n  },\n  // Vimeo embed parameters\n  vimeo: {\n    hd: 1,\n    show_title: 1,\n    show_byline: 1,\n    show_portrait: 0,\n    fullscreen: 1,\n  },\n  // HTML5 video parameters\n  html5video: {\n    tpl: `<video class=\"fancybox__html5video\" playsinline controls controlsList=\"nodownload\" poster=\"{{poster}}\">\n  <source src=\"{{src}}\" type=\"{{format}}\" />Sorry, your browser doesn't support embedded videos.</video>`,\n    format: \"\",\n  },\n};\n\nexport class Html {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\n      \"onInit\",\n      \"onReady\",\n\n      \"onCreateSlide\",\n      \"onRemoveSlide\",\n\n      \"onSelectSlide\",\n      \"onUnselectSlide\",\n\n      \"onRefresh\",\n\n      // For communication with iframed video (youtube/vimeo)\n      \"onMessage\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      init: this.onInit,\n      ready: this.onReady,\n\n      \"Carousel.createSlide\": this.onCreateSlide,\n      \"Carousel.removeSlide\": this.onRemoveSlide,\n\n      \"Carousel.selectSlide\": this.onSelectSlide,\n      \"Carousel.unselectSlide\": this.onUnselectSlide,\n\n      \"Carousel.refresh\": this.onRefresh,\n    };\n  }\n\n  /**\n   * Check if each gallery item has type when fancybox starts\n   */\n  onInit() {\n    for (const slide of this.fancybox.items) {\n      this.processType(slide);\n    }\n  }\n\n  /**\n   * Set content type for the slide\n   * @param {Object} slide\n   */\n  processType(slide) {\n    // Add support for `new Fancybox({items : [{html : 'smth'}]});`\n    if (slide.html) {\n      slide.src = slide.html;\n      slide.type = \"html\";\n\n      delete slide.html;\n\n      return;\n    }\n\n    const src = slide.src || \"\";\n\n    let type = slide.type || this.fancybox.options.type,\n      rez = null;\n\n    if (src && typeof src !== \"string\") {\n      return;\n    }\n\n    if (\n      (rez = src.match(\n        /(?:youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(?:watch\\?(?:.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(?:.*)|[\\w-]{11}|\\?listType=(?:.*)&list=(?:.*))(?:.*)/i\n      ))\n    ) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.youtube\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://www.youtube-nocookie.com/embed/${videoId}?${params}`;\n      slide.thumb = slide.thumb || `https://i.ytimg.com/vi/${videoId}/mqdefault.jpg`;\n      slide.vendor = \"youtube\";\n\n      type = \"video\";\n    } else if ((rez = src.match(/^.+vimeo.com\\/(?:\\/)?([\\d]+)(.*)?/))) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.vimeo\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://player.vimeo.com/video/${videoId}?${params}`;\n      slide.vendor = \"vimeo\";\n\n      type = \"video\";\n    } else if (\n      (rez = src.match(\n        /(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:(?:(?:maps\\/(?:place\\/(?:.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(?:\\?ll=))(.*)?/i\n      ))\n    ) {\n      slide.src = `//maps.google.${rez[1]}/?ll=${(rez[2]\n        ? rez[2] + \"&z=\" + Math.floor(rez[3]) + (rez[4] ? rez[4].replace(/^\\//, \"&\") : \"\")\n        : rez[4] + \"\"\n      ).replace(/\\?/, \"&\")}&output=${rez[4] && rez[4].indexOf(\"layer=c\") > 0 ? \"svembed\" : \"embed\"}`;\n\n      type = \"map\";\n    } else if ((rez = src.match(/(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:maps\\/search\\/)(.*)/i))) {\n      slide.src = `//maps.google.${rez[1]}/maps?q=${rez[2].replace(\"query=\", \"q=\").replace(\"api=1\", \"\")}&output=embed`;\n\n      type = \"map\";\n    }\n\n    // Guess content type\n    if (!type) {\n      if (src.charAt(0) === \"#\") {\n        type = \"inline\";\n      } else if ((rez = src.match(/\\.(mp4|mov|ogv|webm)((\\?|#).*)?$/i))) {\n        type = \"html5video\";\n\n        slide.format = slide.format || \"video/\" + (rez[1] === \"ogv\" ? \"ogg\" : rez[1]);\n      } else if (src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i)) {\n        type = \"image\";\n      } else if (src.match(/\\.(pdf)((\\?|#).*)?$/i)) {\n        type = \"pdf\";\n      }\n    }\n\n    slide.type = type || this.fancybox.option(\"defaultType\", \"image\");\n\n    if (type === \"html5video\" || type === \"video\") {\n      slide.video = extend({}, this.fancybox.option(\"Html.video\"), slide.video);\n\n      if (slide._width && slide._height) {\n        slide.ratio = parseFloat(slide._width) / parseFloat(slide._height);\n      } else {\n        slide.ratio = slide.ratio || slide.video.ratio || defaults.video.ratio;\n      }\n    }\n  }\n\n  /**\n   * Start loading content when Fancybox is ready\n   */\n  onReady() {\n    this.fancybox.Carousel.slides.forEach((slide) => {\n      if (slide.$el) {\n        this.setContent(slide);\n\n        if (slide.index === this.fancybox.getSlide().index) {\n          this.playVideo(slide);\n        }\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.createSlide` event to create image content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onCreateSlide(fancybox, carousel, slide) {\n    if (this.fancybox.state !== \"ready\") {\n      return;\n    }\n\n    this.setContent(slide);\n  }\n\n  /**\n   * Retrieve and set slide content\n   * @param {Object} slide\n   */\n  loadInlineContent(slide) {\n    let $content;\n\n    if (slide.src instanceof HTMLElement) {\n      $content = slide.src;\n    } else if (typeof slide.src === \"string\") {\n      const tmp = slide.src.split(\"#\", 2);\n      const id = tmp.length === 2 && tmp[0] === \"\" ? tmp[1] : tmp[0];\n\n      $content = document.getElementById(id);\n    }\n\n    if ($content) {\n      if (slide.type === \"clone\" || $content.$placeHolder) {\n        $content = $content.cloneNode(true);\n        let attrId = $content.getAttribute(\"id\");\n\n        attrId = attrId ? `${attrId}--clone` : `clone-${this.fancybox.id}-${slide.index}`;\n\n        $content.setAttribute(\"id\", attrId);\n      } else {\n        const $placeHolder = document.createElement(\"div\");\n        $placeHolder.classList.add(\"fancybox-placeholder\");\n        $content.parentNode.insertBefore($placeHolder, $content);\n        $content.$placeHolder = $placeHolder;\n      }\n\n      this.fancybox.setContent(slide, $content);\n    } else {\n      this.fancybox.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n    }\n  }\n\n  /**\n   * Makes AJAX request and sets response as slide content\n   * @param {Object} slide\n   */\n  loadAjaxContent(slide) {\n    const fancybox = this.fancybox;\n    const xhr = new XMLHttpRequest();\n\n    fancybox.showLoading(slide);\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === XMLHttpRequest.DONE) {\n        if (fancybox.state === \"ready\") {\n          fancybox.hideLoading(slide);\n\n          if (xhr.status === 200) {\n            fancybox.setContent(slide, xhr.responseText);\n          } else {\n            fancybox.setError(slide, xhr.status === 404 ? \"{{AJAX_NOT_FOUND}}\" : \"{{AJAX_FORBIDDEN}}\");\n          }\n        }\n      }\n    };\n\n    const data = slide.ajax || null;\n\n    xhr.open(data ? \"POST\" : \"GET\", slide.src);\n    xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n    xhr.send(data);\n\n    slide.xhr = xhr;\n  }\n\n  /**\n   * Creates iframe as slide content, preloads if needed before displaying\n   * @param {Object} slide\n   */\n  loadIframeContent(slide) {\n    const fancybox = this.fancybox;\n    const $iframe = document.createElement(\"iframe\");\n\n    $iframe.className = \"fancybox__iframe\";\n\n    $iframe.setAttribute(\"id\", `fancybox__iframe_${fancybox.id}_${slide.index}`);\n\n    $iframe.setAttribute(\"allow\", \"autoplay; fullscreen\");\n    $iframe.setAttribute(\"scrolling\", \"auto\");\n\n    slide.$iframe = $iframe;\n\n    if (slide.type !== \"iframe\" || slide.preload === false) {\n      $iframe.setAttribute(\"src\", slide.src);\n\n      this.fancybox.setContent(slide, $iframe);\n\n      this.resizeIframe(slide);\n\n      return;\n    }\n\n    fancybox.showLoading(slide);\n\n    const $content = document.createElement(\"div\");\n    $content.style.visibility = \"hidden\";\n\n    this.fancybox.setContent(slide, $content);\n\n    $content.appendChild($iframe);\n\n    $iframe.onerror = () => {\n      fancybox.setError(slide, \"{{IFRAME_ERROR}}\");\n    };\n\n    $iframe.onload = () => {\n      fancybox.hideLoading(slide);\n\n      let isFirstLoad = false;\n\n      if (!$iframe.isReady) {\n        $iframe.isReady = true;\n        isFirstLoad = true;\n      }\n\n      if (!$iframe.src.length) {\n        return;\n      }\n\n      $iframe.parentNode.style.visibility = \"\";\n\n      this.resizeIframe(slide);\n\n      if (isFirstLoad) {\n        fancybox.revealContent(slide);\n      }\n    };\n\n    $iframe.setAttribute(\"src\", slide.src);\n  }\n\n  /**\n   * Set CSS max/min width/height properties of the content to have the correct aspect ratio\n   * @param {Object} slide\n   */\n  setAspectRatio(slide) {\n    const $content = slide.$content;\n    const ratio = slide.ratio;\n\n    if (!$content) {\n      return;\n    }\n\n    let width = slide._width;\n    let height = slide._height;\n\n    if (ratio || (width && height)) {\n      Object.assign($content.style, {\n        width: width && height ? \"100%\" : \"\",\n        height: width && height ? \"100%\" : \"\",\n        maxWidth: \"\",\n        maxHeight: \"\",\n      });\n\n      let maxWidth = $content.offsetWidth;\n      let maxHeight = $content.offsetHeight;\n\n      width = width || maxWidth;\n      height = height || maxHeight;\n\n      // Resize to fit\n      if (width > maxWidth || height > maxHeight) {\n        let maxRatio = Math.min(maxWidth / width, maxHeight / height);\n\n        width = width * maxRatio;\n        height = height * maxRatio;\n      }\n\n      // Recheck ratio\n      if (Math.abs(width / height - ratio) > 0.01) {\n        if (ratio < width / height) {\n          width = height * ratio;\n        } else {\n          height = width / ratio;\n        }\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n      });\n    }\n  }\n\n  /**\n   * Adjust the width and height of the iframe according to the content dimensions, or defined sizes\n   * @param {Object} slide\n   */\n  resizeIframe(slide) {\n    const $iframe = slide.$iframe;\n\n    if (!$iframe) {\n      return;\n    }\n\n    let width_ = slide._width || 0;\n    let height_ = slide._height || 0;\n\n    if (width_ && height_) {\n      slide.autoSize = false;\n    }\n\n    const $parent = $iframe.parentNode;\n    const parentStyle = $parent && $parent.style;\n\n    if (slide.preload !== false && slide.autoSize !== false && parentStyle) {\n      try {\n        const compStyles = window.getComputedStyle($parent),\n          paddingX = parseFloat(compStyles.paddingLeft) + parseFloat(compStyles.paddingRight),\n          paddingY = parseFloat(compStyles.paddingTop) + parseFloat(compStyles.paddingBottom);\n\n        const document = $iframe.contentWindow.document,\n          $html = document.getElementsByTagName(\"html\")[0],\n          $body = document.body;\n\n        // Allow content to expand horizontally\n        parentStyle.width = \"\";\n\n        // Get rid of vertical scrollbar\n        $body.style.overflow = \"hidden\";\n\n        width_ = width_ || $html.scrollWidth + paddingX;\n\n        parentStyle.width = `${width_}px`;\n\n        $body.style.overflow = \"\";\n\n        parentStyle.flex = \"0 0 auto\";\n        parentStyle.height = `${$body.scrollHeight}px`;\n\n        height_ = $html.scrollHeight + paddingY;\n      } catch (error) {\n        //\n      }\n    }\n\n    if (width_ || height_) {\n      const newStyle = {\n        flex: \"0 1 auto\",\n      };\n\n      if (width_) {\n        newStyle.width = `${width_}px`;\n      }\n\n      if (height_) {\n        newStyle.height = `${height_}px`;\n      }\n\n      Object.assign(parentStyle, newStyle);\n    }\n  }\n\n  /**\n   * Process `Carousel.onRefresh` event,\n   * trigger iframe autosizing and set content aspect ratio for each slide\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onRefresh(fancybox, carousel) {\n    carousel.slides.forEach((slide) => {\n      if (!slide.$el) {\n        return;\n      }\n\n      if (slide.$iframe) {\n        this.resizeIframe(slide);\n      }\n\n      if (slide.ratio) {\n        this.setAspectRatio(slide);\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.onCreateSlide` event to set content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  setContent(slide) {\n    if (!slide || slide.isDom) {\n      return;\n    }\n\n    switch (slide.type) {\n      case \"html\":\n        this.fancybox.setContent(slide, slide.src);\n        break;\n\n      case \"html5video\":\n        this.fancybox.setContent(\n          slide,\n          this.fancybox\n            .option(\"Html.html5video.tpl\")\n            .replace(/\\{\\{src\\}\\}/gi, slide.src)\n            .replace(\"{{format}}\", slide.format || (slide.html5video && slide.html5video.format) || \"\")\n            .replace(\"{{poster}}\", slide.poster || slide.thumb || \"\")\n        );\n\n        break;\n\n      case \"inline\":\n      case \"clone\":\n        this.loadInlineContent(slide);\n        break;\n\n      case \"ajax\":\n        this.loadAjaxContent(slide);\n        break;\n\n      case \"pdf\":\n      case \"video\":\n      case \"map\":\n        slide.preload = false;\n\n      case \"iframe\":\n        this.loadIframeContent(slide);\n\n        break;\n    }\n\n    if (slide.ratio) {\n      this.setAspectRatio(slide);\n    }\n  }\n\n  /**\n   * Process `Carousel.onSelectSlide` event to start video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onSelectSlide(fancybox, carousel, slide) {\n    if (fancybox.state === \"ready\") {\n      this.playVideo(slide);\n    }\n  }\n\n  /**\n   * Attempts to begin playback of the media\n   * @param {Object} slide\n   */\n  playVideo(slide) {\n    if (slide.type === \"html5video\" && slide.video.autoplay) {\n      try {\n        const $video = slide.$el.querySelector(\"video\");\n\n        if ($video) {\n          const promise = $video.play();\n\n          if (promise !== undefined) {\n            promise\n              .then(() => {\n                // Autoplay started\n              })\n              .catch((error) => {\n                // Autoplay was prevented.\n                $video.muted = true;\n                $video.play();\n              });\n          }\n        }\n      } catch (err) {}\n    }\n\n    if (slide.type !== \"video\" || !(slide.$iframe && slide.$iframe.contentWindow)) {\n      return;\n    }\n\n    // This function will be repeatedly called to check\n    // if video iframe has been loaded to send message to start the video\n    const poller = () => {\n      if (slide.state === \"done\" && slide.$iframe && slide.$iframe.contentWindow) {\n        let command;\n\n        if (slide.$iframe.isReady) {\n          if (slide.video && slide.video.autoplay) {\n            if (slide.vendor == \"youtube\") {\n              command = {\n                event: \"command\",\n                func: \"playVideo\",\n              };\n            } else {\n              command = {\n                method: \"play\",\n                value: \"true\",\n              };\n            }\n          }\n\n          if (command) {\n            slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n          }\n\n          return;\n        }\n\n        if (slide.vendor === \"youtube\") {\n          command = {\n            event: \"listening\",\n            id: slide.$iframe.getAttribute(\"id\"),\n          };\n\n          slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n        }\n      }\n\n      slide.poller = setTimeout(poller, 250);\n    };\n\n    poller();\n  }\n\n  /**\n   * Process `Carousel.onUnselectSlide` event to pause video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onUnselectSlide(fancybox, carousel, slide) {\n    if (slide.type === \"html5video\") {\n      try {\n        slide.$el.querySelector(\"video\").pause();\n      } catch (error) {}\n\n      return;\n    }\n\n    let command = false;\n\n    if (slide.vendor == \"vimeo\") {\n      command = {\n        method: \"pause\",\n        value: \"true\",\n      };\n    } else if (slide.vendor === \"youtube\") {\n      command = {\n        event: \"command\",\n        func: \"pauseVideo\",\n      };\n    }\n\n    if (command && slide.$iframe && slide.$iframe.contentWindow) {\n      slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n    }\n\n    clearTimeout(slide.poller);\n  }\n\n  /**\n   * Process `Carousel.onRemoveSlide` event to do clean up\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onRemoveSlide(fancybox, carousel, slide) {\n    // Abort ajax request if exists\n    if (slide.xhr) {\n      slide.xhr.abort();\n      slide.xhr = null;\n    }\n\n    // Unload iframe content if exists\n    if (slide.$iframe) {\n      slide.$iframe.onload = slide.$iframe.onerror = null;\n\n      slide.$iframe.src = \"//about:blank\";\n      slide.$iframe = null;\n    }\n\n    // Clear inline content\n    const $content = slide.$content;\n\n    if (slide.type === \"inline\" && $content) {\n      $content.classList.remove(\"fancybox__content\");\n\n      if ($content.style.display !== \"none\") {\n        $content.style.display = \"none\";\n      }\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    const $placeHolder = $content && $content.$placeHolder;\n\n    if ($placeHolder) {\n      $placeHolder.parentNode.insertBefore($content, $placeHolder);\n      $placeHolder.remove();\n      $content.$placeHolder = null;\n    }\n  }\n\n  /**\n   * Process `window.message` event to mark video iframe element as `ready`\n   * @param {Object} e - Event\n   */\n  onMessage(e) {\n    try {\n      let data = JSON.parse(e.data);\n\n      if (e.origin === \"https://player.vimeo.com\") {\n        if (data.event === \"ready\") {\n          for (let $iframe of document.getElementsByClassName(\"fancybox__iframe\")) {\n            if ($iframe.contentWindow === e.source) {\n              $iframe.isReady = 1;\n            }\n          }\n        }\n      } else if (e.origin === \"https://www.youtube-nocookie.com\") {\n        if (data.event === \"onReady\") {\n          document.getElementById(data.id).isReady = 1;\n        }\n      }\n    } catch (ex) {}\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n\n    window.addEventListener(\"message\", this.onMessage, false);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    window.removeEventListener(\"message\", this.onMessage, false);\n  }\n}\n\n// Expose defaults\nHtml.defaults = defaults;\n", "import { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Panzoom } from \"../../../Panzoom/Panzoom.js\";\r\n\r\nconst defaults = {\r\n  // Class name for slide element indicating that content can be zoomed in\r\n  canZoomInClass: \"can-zoom_in\",\r\n\r\n  // Class name for slide element indicating that content can be zoomed out\r\n  canZoomOutClass: \"can-zoom_out\",\r\n\r\n  // Do zoom animation from thumbnail image when starting or closing fancybox\r\n  zoom: true,\r\n\r\n  // Animate opacity while zooming\r\n  zoomOpacity: \"auto\", // \"auto\" | true | false,\r\n\r\n  // Zoom animation friction\r\n  zoomFriction: 0.82,\r\n\r\n  // Disable zoom animation if thumbnail is visible only partly\r\n  ignoreCoveredThumbnail: false,\r\n\r\n  // Enable guestures\r\n  touch: true,\r\n\r\n  // Action to be performed when user clicks on the image\r\n  click: \"toggleZoom\", // \"toggleZoom\" | \"next\" | \"close\" | null\r\n\r\n  // Action to be performed when double-click event is detected on the image\r\n  doubleClick: null, // \"toggleZoom\" | null\r\n\r\n  // Action to be performed when user rotates a wheel button on a pointing device\r\n  wheel: \"zoom\", // \"zoom\" | \"slide\" | \"close\" | null\r\n\r\n  // How image should be resized to fit its container\r\n  fit: \"contain\", // \"contain\" | \"contain-w\" | \"cover\"\r\n\r\n  // Should create wrapping element around the image\r\n  wrap: false,\r\n\r\n  // Custom Panzoom options\r\n  Panzoom: {\r\n    ratio: 1,\r\n  },\r\n};\r\n\r\nexport class Image {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    for (const methodName of [\r\n      // Fancybox\r\n      \"onReady\",\r\n      \"onClosing\",\r\n      \"onDone\",\r\n\r\n      // Fancybox.Carousel\r\n      \"onPageChange\",\r\n      \"onCreateSlide\",\r\n      \"onRemoveSlide\",\r\n\r\n      // Image load/error\r\n      \"onImageStatusChange\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      ready: this.onReady,\r\n      closing: this.onClosing,\r\n      done: this.onDone,\r\n\r\n      \"Carousel.change\": this.onPageChange,\r\n      \"Carousel.createSlide\": this.onCreateSlide,\r\n      \"Carousel.removeSlide\": this.onRemoveSlide,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle `ready` event to start loading content\r\n   */\r\n  onReady() {\r\n    this.fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$el) {\r\n        this.setContent(slide);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle `done` event to update cursor\r\n   * @param {Object} fancybox\r\n   * @param {Object} slide\r\n   */\r\n  onDone(fancybox, slide) {\r\n    this.handleCursor(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `closing` event to clean up all slides and to start zoom-out animation\r\n   * @param {Object} fancybox\r\n   */\r\n  onClosing(fancybox) {\r\n    clearTimeout(this.clickTimer);\r\n    this.clickTimer = null;\r\n\r\n    // Remove events\r\n    fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$image) {\r\n        slide.state = \"destroy\";\r\n      }\r\n\r\n      if (slide.Panzoom) {\r\n        slide.Panzoom.detachEvents();\r\n      }\r\n    });\r\n\r\n    // If possible, start the zoom animation, it will interrupt the default closing process\r\n    if (this.fancybox.state === \"closing\" && this.canZoom(fancybox.getSlide())) {\r\n      this.zoomOut();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process `Carousel.createSlide` event to create image content\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onCreateSlide(fancybox, carousel, slide) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    this.setContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.removeSlide` event to do clean up the slide\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onRemoveSlide(fancybox, carousel, slide) {\r\n    if (slide.$image) {\r\n      slide.$el.classList.remove(fancybox.option(\"Image.canZoomInClass\"));\r\n\r\n      slide.$image.remove();\r\n      slide.$image = null;\r\n    }\r\n\r\n    if (slide.Panzoom) {\r\n      slide.Panzoom.destroy();\r\n      slide.Panzoom = null;\r\n    }\r\n\r\n    if (slide.$el && slide.$el.dataset) {\r\n      delete slide.$el.dataset.imageFit;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build DOM elements and add event listeners\r\n   * @param {Object} slide\r\n   */\r\n  setContent(slide) {\r\n    // Check if this slide should contain an image\r\n    if (slide.isDom || slide.html || (slide.type && slide.type !== \"image\")) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$image) {\r\n      return;\r\n    }\r\n\r\n    slide.type = \"image\";\r\n    slide.state = \"loading\";\r\n\r\n    // * Build layout\r\n    // Container\r\n    const $content = document.createElement(\"div\");\r\n    $content.style.visibility = \"hidden\";\r\n\r\n    // Image element\r\n    const $image = document.createElement(\"img\");\r\n\r\n    $image.addEventListener(\"load\", (event) => {\r\n      event.stopImmediatePropagation();\r\n\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.addEventListener(\"error\", () => {\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.src = slide.src;\r\n    $image.alt = \"\";\r\n    $image.draggable = false;\r\n\r\n    $image.classList.add(\"fancybox__image\");\r\n\r\n    if (slide.srcset) {\r\n      $image.setAttribute(\"srcset\", slide.srcset);\r\n    }\r\n\r\n    if (slide.sizes) {\r\n      $image.setAttribute(\"sizes\", slide.sizes);\r\n    }\r\n\r\n    slide.$image = $image;\r\n\r\n    const shouldWrap = this.fancybox.option(\"Image.wrap\");\r\n\r\n    if (shouldWrap) {\r\n      const $wrap = document.createElement(\"div\");\r\n      $wrap.classList.add(typeof shouldWrap === \"string\" ? shouldWrap : \"fancybox__image-wrap\");\r\n\r\n      $wrap.appendChild($image);\r\n\r\n      $content.appendChild($wrap);\r\n\r\n      slide.$wrap = $wrap;\r\n    } else {\r\n      $content.appendChild($image);\r\n    }\r\n\r\n    // Set data attribute if other that default\r\n    // for example, set `[data-image-fit=\"contain-w\"]`\r\n    slide.$el.dataset.imageFit = this.fancybox.option(\"Image.fit\");\r\n\r\n    // Append content\r\n    this.fancybox.setContent(slide, $content);\r\n\r\n    // Display loading icon\r\n    if ($image.complete || $image.error) {\r\n      this.onImageStatusChange(slide);\r\n    } else {\r\n      this.fancybox.showLoading(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle image state change, display error or start revealing image\r\n   * @param {Object} slide\r\n   */\r\n  onImageStatusChange(slide) {\r\n    const $image = slide.$image;\r\n\r\n    if (!$image || slide.state !== \"loading\") {\r\n      return;\r\n    }\r\n\r\n    if (!($image.complete && $image.naturalWidth && $image.naturalHeight)) {\r\n      this.fancybox.setError(slide, \"{{IMAGE_ERROR}}\");\r\n\r\n      return;\r\n    }\r\n\r\n    this.fancybox.hideLoading(slide);\r\n\r\n    if (this.fancybox.option(\"Image.fit\") === \"contain\") {\r\n      this.initSlidePanzoom(slide);\r\n    }\r\n\r\n    // Add `wheel` and `click` event handler\r\n    slide.$el.addEventListener(\"wheel\", (event) => this.onWheel(slide, event), { passive: false });\r\n    slide.$content.addEventListener(\"click\", (event) => this.onClick(slide, event), { passive: false });\r\n\r\n    this.revealContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Make image zoomable and draggable using Panzoom\r\n   * @param {Object} slide\r\n   */\r\n  initSlidePanzoom(slide) {\r\n    if (slide.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    //* Initialize Panzoom\r\n    slide.Panzoom = new Panzoom(\r\n      slide.$el,\r\n      extend(true, this.fancybox.option(\"Image.Panzoom\", {}), {\r\n        viewport: slide.$wrap,\r\n        content: slide.$image,\r\n\r\n        width: slide._width,\r\n        height: slide._height,\r\n\r\n        wrapInner: false,\r\n\r\n        // Allow to select caption text\r\n        textSelection: true,\r\n\r\n        // Toggle gestures\r\n        touch: this.fancybox.option(\"Image.touch\"),\r\n\r\n        // This will prevent click conflict with fancybox main carousel\r\n        panOnlyZoomed: true,\r\n\r\n        // Disable default click / wheel events as custom event listeners will replace them,\r\n        // because click and wheel events should work without Panzoom\r\n        click: false,\r\n        wheel: false,\r\n      })\r\n    );\r\n\r\n    slide.Panzoom.on(\"startAnimation\", () => {\r\n      this.fancybox.trigger(\"Image.startAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"endAnimation\", () => {\r\n      if (slide.state === \"zoomIn\") {\r\n        this.fancybox.done(slide);\r\n      }\r\n\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.endAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"afterUpdate\", () => {\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.afterUpdate\", slide);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Start zoom-in animation if possible, or simply reveal content\r\n   * @param {Object} slide\r\n   */\r\n  revealContent(slide) {\r\n    // Animate only on first run\r\n    if (\r\n      this.fancybox.Carousel.prevPage === null &&\r\n      slide.index === this.fancybox.options.startIndex &&\r\n      this.canZoom(slide)\r\n    ) {\r\n      this.zoomIn();\r\n    } else {\r\n      this.fancybox.revealContent(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get zoom info for selected slide\r\n   * @param {Object} slide\r\n   */\r\n  getZoomInfo(slide) {\r\n    const $thumb = slide.$thumb,\r\n      thumbRect = $thumb.getBoundingClientRect(),\r\n      thumbWidth = thumbRect.width,\r\n      thumbHeight = thumbRect.height,\r\n      //\r\n      contentRect = slide.$content.getBoundingClientRect(),\r\n      contentWidth = contentRect.width,\r\n      contentHeight = contentRect.height,\r\n      //\r\n      shiftedTop = contentRect.top - thumbRect.top,\r\n      shiftedLeft = contentRect.left - thumbRect.left;\r\n\r\n    // Check if need to update opacity\r\n    let opacity = this.fancybox.option(\"Image.zoomOpacity\");\r\n\r\n    if (opacity === \"auto\") {\r\n      opacity = Math.abs(thumbWidth / thumbHeight - contentWidth / contentHeight) > 0.1;\r\n    }\r\n\r\n    return {\r\n      top: shiftedTop,\r\n      left: shiftedLeft,\r\n      scale: contentWidth && thumbWidth ? thumbWidth / contentWidth : 1,\r\n      opacity: opacity,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Determine if it is possible to do zoom-in animation\r\n   */\r\n  canZoom(slide) {\r\n    const fancybox = this.fancybox,\r\n      $container = fancybox.$container;\r\n\r\n    if (window.visualViewport && window.visualViewport.scale !== 1) {\r\n      return false;\r\n    }\r\n\r\n    if (slide.Panzoom && !slide.Panzoom.content.width) {\r\n      return false;\r\n    }\r\n\r\n    if (!fancybox.option(\"Image.zoom\") || fancybox.option(\"Image.fit\") !== \"contain\") {\r\n      return false;\r\n    }\r\n\r\n    const $thumb = slide.$thumb;\r\n\r\n    if (!$thumb || slide.state === \"loading\") {\r\n      return false;\r\n    }\r\n\r\n    // * Check if thumbnail image is really visible\r\n    $container.classList.add(\"fancybox__no-click\");\r\n\r\n    const rect = $thumb.getBoundingClientRect();\r\n\r\n    let rez;\r\n\r\n    // Check if thumbnail image is actually visible on the screen\r\n    if (this.fancybox.option(\"Image.ignoreCoveredThumbnail\")) {\r\n      const visibleTopLeft = document.elementFromPoint(rect.left + 1, rect.top + 1) === $thumb;\r\n      const visibleBottomRight = document.elementFromPoint(rect.right - 1, rect.bottom - 1) === $thumb;\r\n\r\n      rez = visibleTopLeft && visibleBottomRight;\r\n    } else {\r\n      rez = document.elementFromPoint(rect.left + rect.width * 0.5, rect.top + rect.height * 0.5) === $thumb;\r\n    }\r\n\r\n    $container.classList.remove(\"fancybox__no-click\");\r\n\r\n    return rez;\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-in animation\r\n   */\r\n  zoomIn() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n    fancybox.trigger(\"reveal\", slide);\r\n\r\n    // Scale and move to start position\r\n    Panzoom.panTo({\r\n      x: left * -1,\r\n      y: top * -1,\r\n      scale: scale,\r\n      friction: 0,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    slide.$content.style.visibility = \"\";\r\n\r\n    slide.state = \"zoomIn\";\r\n\r\n    if (opacity === true) {\r\n      Panzoom.on(\"afterTransform\", (panzoom) => {\r\n        if (slide.state === \"zoomIn\" || slide.state === \"zoomOut\") {\r\n          panzoom.$content.style.opacity = Math.min(1, 1 - (1 - panzoom.content.scale) / (1 - scale));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Animate back to original position\r\n    Panzoom.panTo({\r\n      x: 0,\r\n      y: 0,\r\n      scale: 1,\r\n      friction: this.fancybox.option(\"Image.zoomFriction\"),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-out animation\r\n   */\r\n  zoomOut() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    if (!Panzoom) {\r\n      return;\r\n    }\r\n\r\n    slide.state = \"zoomOut\";\r\n    fancybox.state = \"customClosing\";\r\n\r\n    if (slide.$caption) {\r\n      slide.$caption.style.visibility = \"hidden\";\r\n    }\r\n\r\n    let friction = this.fancybox.option(\"Image.zoomFriction\");\r\n\r\n    const animatePosition = (event) => {\r\n      const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n      // Increase speed on the first run if opacity is not animated\r\n      if (!event && !opacity) {\r\n        friction *= 0.82;\r\n      }\r\n\r\n      Panzoom.panTo({\r\n        x: left * -1,\r\n        y: top * -1,\r\n        scale,\r\n        friction,\r\n        ignoreBounds: true,\r\n      });\r\n\r\n      // Gradually increase speed\r\n      friction *= 0.98;\r\n    };\r\n\r\n    // Page scrolling will cause thumbnail to change position on the display,\r\n    // therefore animation end position has to be recalculated after each page scroll\r\n    window.addEventListener(\"scroll\", animatePosition);\r\n\r\n    Panzoom.once(\"endAnimation\", () => {\r\n      window.removeEventListener(\"scroll\", animatePosition);\r\n      fancybox.destroy();\r\n    });\r\n\r\n    animatePosition();\r\n  }\r\n\r\n  /**\r\n   * Set the type of mouse cursor to indicate if content is zoomable\r\n   * @param {Object} slide\r\n   */\r\n  handleCursor(slide) {\r\n    if (slide.type !== \"image\" || !slide.$el) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n    const clickAction = this.fancybox.option(\"Image.click\", false, slide);\r\n    const touchIsEnabled = this.fancybox.option(\"Image.touch\");\r\n\r\n    const classList = slide.$el.classList;\r\n\r\n    const zoomInClass = this.fancybox.option(\"Image.canZoomInClass\");\r\n    const zoomOutClass = this.fancybox.option(\"Image.canZoomOutClass\");\r\n\r\n    classList.remove(zoomOutClass);\r\n    classList.remove(zoomInClass);\r\n\r\n    if (panzoom && clickAction === \"toggleZoom\") {\r\n      const canZoomIn =\r\n        panzoom && panzoom.content.scale === 1 && panzoom.option(\"maxScale\") - panzoom.content.scale > 0.01;\r\n\r\n      if (canZoomIn) {\r\n        classList.add(zoomInClass);\r\n      } else if (panzoom.content.scale > 1 && !touchIsEnabled) {\r\n        classList.add(zoomOutClass);\r\n      }\r\n    } else if (clickAction === \"close\") {\r\n      classList.add(zoomOutClass);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `wheel` event\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onWheel(slide, event) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.trigger(\"Image.wheel\", event) === false) {\r\n      return;\r\n    }\r\n\r\n    switch (this.fancybox.option(\"Image.wheel\")) {\r\n      case \"zoom\":\r\n        if (slide.state === \"done\") {\r\n          slide.Panzoom && slide.Panzoom.zoomWithWheel(event);\r\n        }\r\n\r\n        break;\r\n\r\n      case \"close\":\r\n        this.fancybox.close();\r\n\r\n        break;\r\n\r\n      case \"slide\":\r\n        this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\r\n\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `click` and `dblclick` events\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onClick(slide, event) {\r\n    // Check that clicks should be allowed\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n\r\n    if (\r\n      panzoom &&\r\n      (panzoom.dragPosition.midPoint ||\r\n        panzoom.dragOffset.x !== 0 ||\r\n        panzoom.dragOffset.y !== 0 ||\r\n        panzoom.dragOffset.scale !== 1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.Carousel.Panzoom.lockAxis) {\r\n      return false;\r\n    }\r\n\r\n    const process = (action) => {\r\n      switch (action) {\r\n        case \"toggleZoom\":\r\n          event.stopPropagation();\r\n\r\n          slide.Panzoom && slide.Panzoom.zoomWithClick(event);\r\n\r\n          break;\r\n\r\n        case \"close\":\r\n          this.fancybox.close();\r\n\r\n          break;\r\n\r\n        case \"next\":\r\n          event.stopPropagation();\r\n\r\n          this.fancybox.next();\r\n\r\n          break;\r\n      }\r\n    };\r\n\r\n    const clickAction = this.fancybox.option(\"Image.click\");\r\n    const dblclickAction = this.fancybox.option(\"Image.doubleClick\");\r\n\r\n    if (dblclickAction) {\r\n      if (this.clickTimer) {\r\n        clearTimeout(this.clickTimer);\r\n        this.clickTimer = null;\r\n\r\n        process(dblclickAction);\r\n      } else {\r\n        this.clickTimer = setTimeout(() => {\r\n          this.clickTimer = null;\r\n          process(clickAction);\r\n        }, 300);\r\n      }\r\n    } else {\r\n      process(clickAction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.change` event to reset zoom level for any zoomed in/out content\r\n   * and to revel content of the current page\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   */\r\n  onPageChange(fancybox, carousel) {\r\n    const currSlide = fancybox.getSlide();\r\n\r\n    carousel.slides.forEach((slide) => {\r\n      if (!slide.Panzoom || slide.state !== \"done\") {\r\n        return;\r\n      }\r\n\r\n      if (slide.index !== currSlide.index) {\r\n        slide.Panzoom.panTo({\r\n          x: 0,\r\n          y: 0,\r\n          scale: 1,\r\n          friction: 0.8,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nImage.defaults = defaults;\r\n", "import { canUseDOM } from \"../../../shared/utils/canUseDOM.js\";\n\nexport class Hash {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\"onChange\", \"onClosing\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      initCarousel: this.onChange,\n      \"Carousel.change\": this.onChange,\n      closing: this.onClosing,\n    };\n\n    this.hasCreatedHistory = false;\n    this.origHash = \"\";\n    this.timer = null;\n  }\n\n  /**\n   * Process `Carousel.ready` and `Carousel.change` events to update URL hash\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onChange(fancybox) {\n    const carousel = fancybox.Carousel;\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    const firstRun = carousel.prevPage === null;\n    const currentSlide = fancybox.getSlide();\n\n    const currentHash = new URL(document.URL).hash;\n\n    let newHash = false;\n\n    if (currentSlide.slug) {\n      newHash = \"#\" + currentSlide.slug;\n    } else {\n      const dataset = currentSlide.$trigger && currentSlide.$trigger.dataset;\n      const slug = fancybox.option(\"slug\") || (dataset && dataset.fancybox);\n\n      if (slug && slug.length && slug !== \"true\") {\n        newHash = \"#\" + slug + (carousel.slides.length > 1 ? \"-\" + (currentSlide.index + 1) : \"\");\n      }\n    }\n\n    if (firstRun) {\n      this.origHash = currentHash !== newHash ? currentHash : \"\";\n    }\n\n    if (newHash && currentHash !== newHash) {\n      this.timer = setTimeout(() => {\n        try {\n          window.history[firstRun ? \"pushState\" : \"replaceState\"](\n            {},\n            document.title,\n            window.location.pathname + window.location.search + newHash\n          );\n\n          if (firstRun) {\n            this.hasCreatedHistory = true;\n          }\n        } catch (e) {}\n      }, 300);\n    }\n  }\n\n  /**\n   * Process `closing` event to clean up\n   */\n  onClosing() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    // Skip if closing is triggered by pressing  browser back button or by changing hash manually\n    if (this.hasSilentClose === true) {\n      return;\n    }\n\n    // Restore original url\n    try {\n      window.history.replaceState(\n        {},\n        document.title,\n        window.location.pathname + window.location.search + (this.origHash || \"\")\n      );\n\n      return;\n    } catch (e) {}\n  }\n\n  attach(fancybox) {\n    fancybox.on(this.events);\n  }\n\n  detach(fancybox) {\n    fancybox.off(this.events);\n  }\n\n  /**\n   * Start fancybox from current URL hash,\n   * this will be called on page load OR/AND after changing URL hash\n   * @param {Class} Fancybox\n   */\n  static startFromUrl() {\n    const Fancybox = Hash.Fancybox;\n\n    if (!Fancybox || Fancybox.getInstance() || Fancybox.defaults.Hash === false) {\n      return;\n    }\n\n    const { hash, slug, index } = Hash.getParsedURL();\n\n    if (!slug) {\n      return;\n    }\n\n    // Support custom slug\n    // ===\n    let selectedElem = document.querySelector(`[data-slug=\"${hash}\"]`);\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n\n    if (Fancybox.getInstance()) {\n      return;\n    }\n\n    // If elements are not found by custom slug, use URL hash value as group name\n    // ===\n    const groupElems = document.querySelectorAll(`[data-fancybox=\"${slug}\"]`);\n\n    if (!groupElems.length) {\n      return;\n    }\n\n    if (index === null && groupElems.length === 1) {\n      selectedElem = groupElems[0];\n    } else if (index) {\n      selectedElem = groupElems[index - 1];\n    }\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n  }\n\n  /**\n   * Handle `hash` change, change gallery item to current index or start/close current instance\n   */\n  static onHashChange() {\n    const { slug, index } = Hash.getParsedURL();\n\n    const Fancybox = Hash.Fancybox;\n    const instance = Fancybox && Fancybox.getInstance();\n\n    if (instance && instance.plugins.Hash) {\n      // Check if hash matches currently active gallery\n      if (slug) {\n        const carousel = instance.Carousel;\n\n        /**\n         * Support manually opened gallery\n         */\n        if (slug === instance.option(\"slug\")) {\n          return carousel.slideTo(index - 1);\n        }\n\n        /**\n         * Check if URL hash matches `data-slug` value of active element\n         */\n        for (let slide of carousel.slides) {\n          if (slide.slug && slide.slug === slug) {\n            return carousel.slideTo(slide.index);\n          }\n        }\n\n        /**\n         * Check if URL hash matches `data-fancybox` value of active element\n         */\n        const slide = instance.getSlide();\n        const dataset = slide.$trigger && slide.$trigger.dataset;\n\n        if (dataset && dataset.fancybox === slug) {\n          return carousel.slideTo(index - 1);\n        }\n      }\n\n      /**\n       * Close if no matching element found\n       */\n      instance.plugins.Hash.hasSilentClose = true;\n\n      instance.close();\n    }\n\n    /**\n     * Attempt to start\n     */\n    Hash.startFromUrl();\n  }\n\n  /**\n   * Add event bindings that will start new Fancybox instance based in the current URL\n   */\n  static create(Fancybox) {\n    Hash.Fancybox = Fancybox;\n\n    function proceed() {\n      window.addEventListener(\"hashchange\", Hash.onHashChange, false);\n\n      Hash.startFromUrl();\n    }\n\n    if (canUseDOM) {\n      window.requestAnimationFrame(() => {\n        if (/complete|interactive|loaded/.test(document.readyState)) {\n          proceed();\n        } else {\n          document.addEventListener(\"DOMContentLoaded\", proceed);\n        }\n      });\n    }\n  }\n\n  static destroy() {\n    window.removeEventListener(\"hashchange\", Hash.onHashChange, false);\n  }\n\n  /**\n   * Helper method to split URL hash into useful pieces\n   */\n  static getParsedURL() {\n    const hash = window.location.hash.substr(1),\n      tmp = hash.split(\"-\"),\n      index = tmp.length > 1 && /^\\+?\\d+$/.test(tmp[tmp.length - 1]) ? parseInt(tmp.pop(-1), 10) || null : null,\n      slug = tmp.join(\"-\");\n\n    return {\n      hash,\n      slug,\n      index,\n    };\n  }\n}\n", "export const Fullscreen = {\r\n  pageXOffset: 0,\r\n  pageYOffset: 0,\r\n\r\n  element() {\r\n    return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement;\r\n  },\r\n\r\n  activate(element) {\r\n    Fullscreen.pageXOffset = window.pageXOffset;\r\n    Fullscreen.pageYOffset = window.pageYOffset;\r\n\r\n    if (element.requestFullscreen) {\r\n      element.requestFullscreen(); // W3C spec\r\n    } else if (element.mozRequestFullScreen) {\r\n      element.mozRequestFullScreen(); // Firefox\r\n    } else if (element.webkitRequestFullscreen) {\r\n      element.webkitRequestFullscreen(); // Safari\r\n    } else if (element.msRequestFullscreen) {\r\n      element.msRequestFullscreen(); // IE/Edge\r\n    }\r\n  },\r\n\r\n  deactivate() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n  },\r\n};\r\n", "export class Slideshow {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n    this.active = false;\r\n\r\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n  }\r\n\r\n  isActive() {\r\n    return this.active;\r\n  }\r\n\r\n  setTimer() {\r\n    if (!this.active || this.timer) {\r\n      return;\r\n    }\r\n\r\n    const delay = this.fancybox.option(\"slideshow.delay\", 3000);\r\n\r\n    this.timer = setTimeout(() => {\r\n      this.timer = null;\r\n\r\n      if (\r\n        !this.fancybox.option(\"infinite\") &&\r\n        this.fancybox.getSlide().index === this.fancybox.Carousel.slides.length - 1\r\n      ) {\r\n        this.fancybox.jumpTo(0, { friction: 0 });\r\n      } else {\r\n        this.fancybox.next();\r\n      }\r\n    }, delay);\r\n\r\n    let $progress = this.$progress;\r\n\r\n    if (!$progress) {\r\n      $progress = document.createElement(\"div\");\r\n      $progress.classList.add(\"fancybox__progress\");\r\n\r\n      this.fancybox.$carousel.parentNode.insertBefore($progress, this.fancybox.$carousel);\r\n\r\n      this.$progress = $progress;\r\n\r\n      $progress.offsetHeight; /* trigger reflow */\r\n    }\r\n\r\n    $progress.style.transitionDuration = `${delay}ms`;\r\n    $progress.style.transform = \"scaleX(1)\";\r\n  }\r\n\r\n  clearTimer() {\r\n    clearTimeout(this.timer);\r\n    this.timer = null;\r\n\r\n    if (this.$progress) {\r\n      this.$progress.style.transitionDuration = \"\";\r\n      this.$progress.style.transform = \"\";\r\n\r\n      this.$progress.offsetHeight; /* trigger reflow */\r\n    }\r\n  }\r\n\r\n  activate() {\r\n    if (this.active) {\r\n      return;\r\n    }\r\n\r\n    this.active = true;\r\n    this.fancybox.$container.classList.add(\"has-slideshow\");\r\n\r\n    if (this.fancybox.getSlide().state === \"done\") {\r\n      this.setTimer();\r\n    }\r\n\r\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  handleVisibilityChange() {\r\n    this.deactivate();\r\n  }\r\n\r\n  deactivate() {\r\n    this.active = false;\r\n\r\n    this.clearTimer();\r\n\r\n    this.fancybox.$container.classList.remove(\"has-slideshow\");\r\n\r\n    document.removeEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  toggle() {\r\n    if (this.active) {\r\n      this.deactivate();\r\n    } else if (this.fancybox.Carousel.slides.length > 1) {\r\n      this.activate();\r\n    }\r\n  }\r\n}\r\n", "import { isPlainObject } from \"../../../shared/utils/isPlainObject.js\";\r\nimport { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Fullscreen } from \"../../../shared/utils/Fullscreen.js\";\r\nimport { Slideshow } from \"../../../shared/utils/Slideshow.js\";\r\n\r\nconst defaults = {\r\n  // What toolbar items to display\r\n  display: [\r\n    \"counter\",\r\n    //\"prev\",\r\n    //\"next\",\r\n    //\"download\",\r\n    \"zoom\",\r\n    \"slideshow\",\r\n    \"fullscreen\",\r\n    \"thumbs\",\r\n    \"close\",\r\n  ],\r\n\r\n  // Only create a toolbar item if there is at least one image in the group\r\n  autoEnable: true,\r\n\r\n  // Toolbar items; can be links, buttons or `div` elements\r\n  items: {\r\n    counter: {\r\n      position: \"left\",\r\n      type: \"div\",\r\n      class: \"fancybox__counter\",\r\n      html: '<span data-fancybox-index=\"\"></span>&nbsp;/&nbsp;<span data-fancybox-count=\"\"></span>',\r\n      attr: { tabindex: -1 },\r\n    },\r\n    prev: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--prev\",\r\n      label: \"PREV\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M15 4l-8 8 8 8\"/></svg>',\r\n      attr: { \"data-fancybox-prev\": \"\" },\r\n    },\r\n    next: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--next\",\r\n      label: \"NEXT\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M8 4l8 8-8 8\"/></svg>',\r\n      attr: { \"data-fancybox-next\": \"\" },\r\n    },\r\n    fullscreen: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--fullscreen\",\r\n      label: \"TOGGLE_FULLSCREEN\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M3 8 V3h5\"></path><path d=\"M21 8V3h-5\"></path><path d=\"M8 21H3v-5\"></path><path d=\"M16 21h5v-5\"></path></g>\r\n                <g><path d=\"M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        if (Fullscreen.element()) {\r\n          Fullscreen.deactivate();\r\n        } else {\r\n          Fullscreen.activate(this.fancybox.$container);\r\n        }\r\n      },\r\n    },\r\n    slideshow: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--slideshow\",\r\n      label: \"TOGGLE_SLIDESHOW\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M6 4v16\"/><path d=\"M20 12L6 20\"/><path d=\"M20 12L6 4\"/></g>\r\n                <g><path d=\"M7 4v15M17 4v15\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        this.Slideshow.toggle();\r\n      },\r\n    },\r\n    zoom: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--zoom\",\r\n      label: \"TOGGLE_ZOOM\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><path d=\"M16 16 L21 21\"></svg>',\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        const panzoom = this.fancybox.getSlide().Panzoom;\r\n\r\n        if (panzoom) {\r\n          panzoom.toggleZoom();\r\n        }\r\n      },\r\n    },\r\n    download: {\r\n      type: \"link\",\r\n      label: \"DOWNLOAD\",\r\n      class: \"fancybox__button--download\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n      },\r\n    },\r\n    thumbs: {\r\n      type: \"button\",\r\n      label: \"TOGGLE_THUMBS\",\r\n      class: \"fancybox__button--thumbs\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"4\" cy=\"4\" r=\"1\" /><circle cx=\"12\" cy=\"4\" r=\"1\" transform=\"rotate(90 12 4)\"/><circle cx=\"20\" cy=\"4\" r=\"1\" transform=\"rotate(90 20 4)\"/><circle cx=\"4\" cy=\"12\" r=\"1\" transform=\"rotate(90 4 12)\"/><circle cx=\"12\" cy=\"12\" r=\"1\" transform=\"rotate(90 12 12)\"/><circle cx=\"20\" cy=\"12\" r=\"1\" transform=\"rotate(90 20 12)\"/><circle cx=\"4\" cy=\"20\" r=\"1\" transform=\"rotate(90 4 20)\"/><circle cx=\"12\" cy=\"20\" r=\"1\" transform=\"rotate(90 12 20)\"/><circle cx=\"20\" cy=\"20\" r=\"1\" transform=\"rotate(90 20 20)\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n\r\n        const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n        if (thumbs) {\r\n          thumbs.toggle();\r\n        }\r\n      },\r\n    },\r\n    close: {\r\n      type: \"button\",\r\n      label: \"CLOSE\",\r\n      class: \"fancybox__button--close\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M20 20L4 4m16 0L4 20\"></path></svg>',\r\n      attr: { \"data-fancybox-close\": \"\", tabindex: 0 },\r\n    },\r\n  },\r\n};\r\n\r\nexport class Toolbar {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    this.$container = null;\r\n    this.state = \"init\";\r\n\r\n    for (const methodName of [\r\n      \"onInit\",\r\n      \"onPrepare\",\r\n      \"onDone\",\r\n      \"onKeydown\",\r\n      \"onClosing\",\r\n      \"onChange\",\r\n      \"onSettle\",\r\n      \"onRefresh\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      init: this.onInit,\r\n      prepare: this.onPrepare,\r\n      done: this.onDone,\r\n      keydown: this.onKeydown,\r\n      closing: this.onClosing,\r\n\r\n      // Clear Slideshow when user strts to change current slide\r\n      \"Carousel.change\": this.onChange,\r\n\r\n      // Set timer after carousel changes current slide; deactive if last slide is reached\r\n      \"Carousel.settle\": this.onSettle,\r\n\r\n      // Deactivate Slideshow on user interaction\r\n      \"Carousel.Panzoom.touchStart\": () => this.onRefresh(),\r\n\r\n      \"Image.startAnimation\": (fancybox, slide) => this.onRefresh(slide),\r\n      \"Image.afterUpdate\": (fancybox, slide) => this.onRefresh(slide),\r\n    };\r\n  }\r\n\r\n  onInit() {\r\n    // Disable self if current group does not contain at least one image\r\n    if (this.fancybox.option(\"Toolbar.autoEnable\")) {\r\n      let hasImage = false;\r\n\r\n      for (const item of this.fancybox.items) {\r\n        if (item.type === \"image\") {\r\n          hasImage = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasImage) {\r\n        this.state = \"disabled\";\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Disable the creation of a close button, if one exists in the toolbar\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      const id = isPlainObject(key) ? key.id : key;\r\n\r\n      if (id === \"close\") {\r\n        this.fancybox.options.closeButton = false;\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onPrepare() {\r\n    const fancybox = this.fancybox;\r\n    // Skip if disabled\r\n    if (this.state !== \"init\") {\r\n      return;\r\n    }\r\n\r\n    this.build();\r\n\r\n    this.update();\r\n\r\n    this.Slideshow = new Slideshow(fancybox);\r\n\r\n    if (!fancybox.Carousel.prevPage) {\r\n      if (fancybox.option(\"slideshow.autoStart\")) {\r\n        this.Slideshow.activate();\r\n      }\r\n\r\n      if (fancybox.option(\"fullscreen.autoStart\") && !Fullscreen.element()) {\r\n        try {\r\n          Fullscreen.activate(fancybox.$container);\r\n        } catch (error) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  onFsChange() {\r\n    window.scrollTo(Fullscreen.pageXOffset, Fullscreen.pageYOffset);\r\n  }\r\n\r\n  onSettle() {\r\n    const fancybox = this.fancybox;\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slideshow && slideshow.isActive()) {\r\n      if (fancybox.getSlide().index === fancybox.Carousel.slides.length - 1 && !fancybox.option(\"infinite\")) {\r\n        slideshow.deactivate();\r\n      } else if (fancybox.getSlide().state === \"done\") {\r\n        slideshow.setTimer();\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange() {\r\n    this.update();\r\n\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n  }\r\n\r\n  onDone(fancybox, slide) {\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slide.index === fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (slideshow && slideshow.isActive()) {\r\n        if (!fancybox.option(\"infinite\") && slide.index === fancybox.Carousel.slides.length - 1) {\r\n          slideshow.deactivate();\r\n        } else {\r\n          slideshow.setTimer();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onRefresh(slide) {\r\n    if (!slide || slide.index === this.fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (this.Slideshow && this.Slideshow.isActive() && (!slide || slide.state === \"done\")) {\r\n        this.Slideshow.deactivate();\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeydown(fancybox, key, event) {\r\n    if (key === \" \" && this.Slideshow) {\r\n      this.Slideshow.toggle();\r\n\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  onClosing() {\r\n    if (this.Slideshow) {\r\n      this.Slideshow.deactivate();\r\n    }\r\n\r\n    document.removeEventListener(\"fullscreenchange\", this.onFsChange);\r\n  }\r\n\r\n  /**\r\n   * Create link, button or `div` element for the toolbar\r\n   * @param {Object} obj\r\n   * @returns HTMLElement\r\n   */\r\n  createElement(obj) {\r\n    let $el;\r\n\r\n    if (obj.type === \"div\") {\r\n      $el = document.createElement(\"div\");\r\n    } else {\r\n      $el = document.createElement(obj.type === \"link\" ? \"a\" : \"button\");\r\n      $el.classList.add(\"carousel__button\");\r\n    }\r\n\r\n    $el.innerHTML = obj.html;\r\n\r\n    $el.setAttribute(\"tabindex\", obj.tabindex || 0);\r\n\r\n    if (obj.class) {\r\n      $el.classList.add(...obj.class.split(\" \"));\r\n    }\r\n\r\n    for (const prop in obj.attr) {\r\n      $el.setAttribute(prop, obj.attr[prop]);\r\n    }\r\n\r\n    if (obj.label) {\r\n      $el.setAttribute(\"title\", this.fancybox.localize(`{{${obj.label}}}`));\r\n    }\r\n\r\n    if (obj.click) {\r\n      $el.addEventListener(\"click\", obj.click.bind(this));\r\n    }\r\n\r\n    if (obj.id === \"prev\") {\r\n      $el.setAttribute(\"data-fancybox-prev\", \"\");\r\n    }\r\n\r\n    if (obj.id === \"next\") {\r\n      $el.setAttribute(\"data-fancybox-next\", \"\");\r\n    }\r\n\r\n    const $svg = $el.querySelector(\"svg\");\r\n\r\n    if ($svg) {\r\n      $svg.setAttribute(\"role\", \"img\");\r\n      $svg.setAttribute(\"tabindex\", \"-1\");\r\n      $svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\r\n    }\r\n\r\n    return $el;\r\n  }\r\n\r\n  /**\r\n   * Create all DOM elements\r\n   */\r\n  build() {\r\n    this.cleanup();\r\n\r\n    const all_items = this.fancybox.option(\"Toolbar.items\");\r\n    const all_groups = [\r\n      {\r\n        position: \"left\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"center\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"right\",\r\n        items: [],\r\n      },\r\n    ];\r\n\r\n    const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n    // 1st step - group toolbar elements by position\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      let id, item;\r\n\r\n      if (isPlainObject(key)) {\r\n        id = key.id;\r\n        item = extend({}, all_items[id], key);\r\n      } else {\r\n        id = key;\r\n        item = all_items[id];\r\n      }\r\n\r\n      if ([\"counter\", \"next\", \"prev\", \"slideshow\"].includes(id) && this.fancybox.items.length < 2) {\r\n        continue;\r\n      }\r\n\r\n      if (id === \"fullscreen\") {\r\n        if (!document.fullscreenEnabled || window.fullScreen) {\r\n          continue;\r\n        }\r\n\r\n        document.addEventListener(\"fullscreenchange\", this.onFsChange);\r\n      }\r\n\r\n      if (id === \"thumbs\" && (!thumbs || thumbs.state === \"disabled\")) {\r\n        continue;\r\n      }\r\n\r\n      if (!item) {\r\n        continue;\r\n      }\r\n\r\n      let position = item.position || \"right\";\r\n\r\n      let group = all_groups.find((obj) => obj.position === position);\r\n\r\n      if (group) {\r\n        group.items.push(item);\r\n      }\r\n    }\r\n\r\n    // 2st step - create DOM elements\r\n    const $container = document.createElement(\"div\");\r\n    $container.classList.add(\"fancybox__toolbar\");\r\n\r\n    for (const group of all_groups) {\r\n      if (group.items.length) {\r\n        const $wrap = document.createElement(\"div\");\r\n        $wrap.classList.add(\"fancybox__toolbar__items\");\r\n        $wrap.classList.add(`fancybox__toolbar__items--${group.position}`);\r\n\r\n        for (const obj of group.items) {\r\n          $wrap.appendChild(this.createElement(obj));\r\n        }\r\n\r\n        $container.appendChild($wrap);\r\n      }\r\n    }\r\n\r\n    // Add toolbar container to DOM\r\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel);\r\n\r\n    this.$container = $container;\r\n  }\r\n\r\n  /**\r\n   * Update element state depending on index of current slide\r\n   */\r\n  update() {\r\n    const slide = this.fancybox.getSlide();\r\n    const idx = slide.index;\r\n    const cnt = this.fancybox.items.length;\r\n\r\n    // Download links\r\n    // ====\r\n    const src = slide.downloadSrc || (slide.type === \"image\" && !slide.error ? slide.src : null);\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"a.fancybox__button--download\")) {\r\n      if (src) {\r\n        $el.removeAttribute(\"disabled\");\r\n        $el.removeAttribute(\"tabindex\");\r\n\r\n        $el.setAttribute(\"href\", src);\r\n        $el.setAttribute(\"download\", src);\r\n        $el.setAttribute(\"target\", \"_blank\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n        $el.setAttribute(\"tabindex\", -1);\r\n\r\n        $el.removeAttribute(\"href\");\r\n        $el.removeAttribute(\"download\");\r\n      }\r\n    }\r\n\r\n    // Zoom button\r\n    // ===\r\n    const panzoom = slide.Panzoom;\r\n    const canZoom = panzoom && panzoom.option(\"maxScale\") > panzoom.option(\"baseScale\");\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\".fancybox__button--zoom\")) {\r\n      if (canZoom) {\r\n        $el.removeAttribute(\"disabled\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n      }\r\n    }\r\n\r\n    // Counter\r\n    // ====\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-index]\")) {\r\n      $el.innerHTML = slide.index + 1;\r\n    }\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-count]\")) {\r\n      $el.innerHTML = cnt;\r\n    }\r\n\r\n    // Disable previous/next links if gallery is not infinite and has reached start/end\r\n    // ===\r\n    if (!this.fancybox.option(\"infinite\")) {\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-prev]\")) {\r\n        if (idx === 0) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-next]\")) {\r\n        if (idx === cnt - 1) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  cleanup() {\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n\r\n    if (this.$container) {\r\n      this.$container.remove();\r\n    }\r\n\r\n    this.$container = null;\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n\r\n    this.cleanup();\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nToolbar.defaults = defaults;\r\n", "import { ScrollLock } from \"./ScrollLock/ScrollLock.js\";\nimport { Thumbs } from \"./Thumbs/Thumbs.js\";\nimport { Html } from \"./Html/Html.js\";\nimport { Image } from \"./Image/Image.js\";\nimport { Hash } from \"./Hash/Hash.js\";\nimport { Toolbar } from \"./Toolbar/Toolbar.js\";\n\nexport const Plugins = {\n  ScrollLock,\n  Thumbs,\n  Html,\n  Toolbar,\n  Image,\n  Hash,\n};\n", "export default {\r\n  CLOSE: \"Close\",\r\n  NEXT: \"Next\",\r\n  PREV: \"Previous\",\r\n  MODAL: \"You can close this modal content with the ESC key\",\r\n  ERROR: \"Something Went Wrong, Please Try Again Later\",\r\n  IMAGE_ERROR: \"Image Not Found\",\r\n  ELEMENT_NOT_FOUND: \"HTML Element Not Found\",\r\n  AJAX_NOT_FOUND: \"Error Loading AJAX : Not Found\",\r\n  AJAX_FORBIDDEN: \"Error Loading AJAX : Forbidden\",\r\n  IFRAME_ERROR: \"Error Loading Page\",\r\n  TOGGLE_ZOOM: \"Toggle zoom level\",\r\n  TOGGLE_THUMBS: \"Toggle thumbnails\",\r\n  TOGGLE_SLIDESHOW: \"Toggle slideshow\",\r\n  TOGGLE_FULLSCREEN: \"Toggle full-screen mode\",\r\n  DOWNLOAD: \"Download\",\r\n};\r\n", "import { extend } from \"../shared/utils/extend.js\";\nimport { canUseDOM } from \"../shared/utils/canUseDOM.js\";\nimport { FOCUSABLE_ELEMENTS, setFocusOn } from \"../shared/utils/setFocusOn.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Carousel } from \"../Carousel/Carousel.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\n// Default language\nimport en from \"./l10n/en.js\";\n\n// Default settings\nconst defaults = {\n  // Index of active slide on the start\n  startIndex: 0,\n\n  // Number of slides to preload before and after active slide\n  preload: 1,\n\n  // Should navigation be infinite\n  infinite: true,\n\n  // Class name to be applied to the content to reveal it\n  showClass: \"fancybox-zoomInUp\", // \"fancybox-fadeIn\" | \"fancybox-zoomInUp\" | false\n\n  // Class name to be applied to the content to hide it\n  hideClass: \"fancybox-fadeOut\", // \"fancybox-fadeOut\" | \"fancybox-zoomOutDown\" | false\n\n  // Should backdrop and UI elements fade in/out on start/close\n  animated: true,\n\n  // If browser scrollbar should be hidden\n  hideScrollbar: true,\n\n  // Element containing main structure\n  parentEl: null,\n\n  // Custom class name or multiple space-separated class names for the container\n  mainClass: null,\n\n  // Set focus on first focusable element after displaying content\n  autoFocus: true,\n\n  // Trap focus inside Fancybox\n  trapFocus: true,\n\n  // Set focus back to trigger element after closing Fancybox\n  placeFocusBack: true,\n\n  // Action to take when the user clicks on the backdrop\n  click: \"close\", // \"close\" | \"next\" | null\n\n  // Position of the close button - over the content or at top right corner of viewport\n  closeButton: \"inside\", // \"inside\" | \"outside\"\n\n  // Allow user to drag content up/down to close instance\n  dragToClose: true,\n\n  // Enable keyboard navigation\n  keyboard: {\n    Escape: \"close\",\n    Delete: \"close\",\n    Backspace: \"close\",\n    PageUp: \"next\",\n    PageDown: \"prev\",\n    ArrowUp: \"next\",\n    ArrowDown: \"prev\",\n    ArrowRight: \"next\",\n    ArrowLeft: \"prev\",\n  },\n\n  // HTML templates for various elements\n  template: {\n    // Close button icon\n    closeButton:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M20 20L4 4m16 0L4 20\"/></svg>',\n    // Loading indicator icon\n    spinner:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"50\" viewBox=\"25 25 50 50\" tabindex=\"-1\"><circle cx=\"50\" cy=\"50\" r=\"20\"/></svg>',\n\n    // Main container element\n    main: null,\n  },\n\n  /* Note: If the `template.main` option is not provided, the structure is generated as follows by default:\n  <div class=\"fancybox__container\" role=\"dialog\" aria-modal=\"true\" aria-hidden=\"true\" aria-label=\"{{MODAL}}\" tabindex=\"-1\">\n    <div class=\"fancybox__backdrop\"></div>\n    <div class=\"fancybox__carousel\"></div>\n  </div>\n  */\n\n  // Localization of strings\n  l10n: en,\n};\n\n// Object that contains all active instances of Fancybox\nconst instances = new Map();\n\n// Number of Fancybox instances created, it is used to generate new instance \"id\"\nlet called = 0;\n\nclass Fancybox extends Base {\n  /**\n   * Fancybox constructor\n   * @constructs Fancybox\n   * @param {Object} [options] - Options for Fancybox\n   */\n  constructor(items, options = {}) {\n    // Quick hack to fix variable naming collision\n    items = items.map((item) => {\n      if (item.width) item._width = item.width;\n      if (item.height) item._height = item.height;\n\n      return item;\n    });\n\n    super(extend(true, {}, defaults, options));\n\n    this.bindHandlers();\n\n    this.state = \"init\";\n\n    this.setItems(items);\n\n    this.attachPlugins(Fancybox.Plugins);\n\n    // \"init\" event marks the start of initialization and is available to plugins\n    this.trigger(\"init\");\n\n    if (this.option(\"hideScrollbar\") === true) {\n      this.hideScrollbar();\n    }\n\n    this.initLayout();\n\n    this.initCarousel();\n\n    this.attachEvents();\n\n    instances.set(this.id, this);\n\n    // \"prepare\" event will trigger the creation of additional layout elements, such as thumbnails and toolbar\n    this.trigger(\"prepare\");\n\n    this.state = \"ready\";\n\n    // \"ready\" event will trigger the content to load\n    this.trigger(\"ready\");\n\n    // Reveal container\n    this.$container.setAttribute(\"aria-hidden\", \"false\");\n\n    // Set focus on the first focusable element inside this instance\n    if (this.option(\"trapFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Override `option` method to get value from the current slide\n   * @param {String} name option name\n   * @param  {...any} rest optional extra parameters\n   * @returns {any}\n   */\n  option(name, ...rest) {\n    const slide = this.getSlide();\n\n    let value = slide ? slide[name] : undefined;\n\n    if (value !== undefined) {\n      if (typeof value === \"function\") {\n        value = value.call(this, this, ...rest);\n      }\n\n      return value;\n    }\n\n    return super.option(name, ...rest);\n  }\n\n  /**\n   * Bind event handlers for referencability\n   */\n  bindHandlers() {\n    for (const methodName of [\n      \"onMousedown\",\n      \"onKeydown\",\n      \"onClick\",\n\n      \"onFocus\",\n\n      \"onCreateSlide\",\n      \"onSettle\",\n\n      \"onTouchMove\",\n      \"onTouchEnd\",\n\n      \"onTransform\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Set up a functions that will be called whenever the specified event is delivered\n   */\n  attachEvents() {\n    document.addEventListener(\"mousedown\", this.onMousedown);\n    document.addEventListener(\"keydown\", this.onKeydown, true);\n\n    // Trap keyboard focus inside of the modal\n    if (this.option(\"trapFocus\")) {\n      document.addEventListener(\"focus\", this.onFocus, true);\n    }\n\n    this.$container.addEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Removes previously registered event listeners\n   */\n  detachEvents() {\n    document.removeEventListener(\"mousedown\", this.onMousedown);\n    document.removeEventListener(\"keydown\", this.onKeydown, true);\n\n    document.removeEventListener(\"focus\", this.onFocus, true);\n\n    this.$container.removeEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Initialize layout; create main container, backdrop nd layout for main carousel\n   */\n  initLayout() {\n    this.$root = this.option(\"parentEl\") || document.body;\n\n    // Container\n    let mainTemplate = this.option(\"template.main\");\n\n    if (mainTemplate) {\n      this.$root.insertAdjacentHTML(\"beforeend\", this.localize(mainTemplate));\n\n      this.$container = this.$root.querySelector(\".fancybox__container\");\n    }\n\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$root.appendChild(this.$container);\n    }\n\n    // Normally we would not need this, but Safari does not support `preventScroll:false` option for `focus` method\n    // and that causes layout issues\n    this.$container.onscroll = () => {\n      this.$container.scrollLeft = 0;\n      return false;\n    };\n\n    Object.entries({\n      class: \"fancybox__container\",\n      role: \"dialog\",\n      tabIndex: \"-1\",\n      \"aria-modal\": \"true\",\n      \"aria-hidden\": \"true\",\n      \"aria-label\": this.localize(\"{{MODAL}}\"),\n    }).forEach((args) => this.$container.setAttribute(...args));\n\n    if (this.option(\"animated\")) {\n      this.$container.classList.add(\"is-animated\");\n    }\n\n    // Backdrop\n    this.$backdrop = this.$container.querySelector(\".fancybox__backdrop\");\n\n    if (!this.$backdrop) {\n      this.$backdrop = document.createElement(\"div\");\n      this.$backdrop.classList.add(\"fancybox__backdrop\");\n\n      this.$container.appendChild(this.$backdrop);\n    }\n\n    // Carousel\n    this.$carousel = this.$container.querySelector(\".fancybox__carousel\");\n\n    if (!this.$carousel) {\n      this.$carousel = document.createElement(\"div\");\n      this.$carousel.classList.add(\"fancybox__carousel\");\n\n      this.$container.appendChild(this.$carousel);\n    }\n\n    // Make instance reference accessible\n    this.$container.Fancybox = this;\n\n    // Make sure the container has an ID\n    this.id = this.$container.getAttribute(\"id\");\n\n    if (!this.id) {\n      this.id = this.options.id || ++called;\n      this.$container.setAttribute(\"id\", \"fancybox-\" + this.id);\n    }\n\n    // Add custom class name to main element\n    const mainClass = this.option(\"mainClass\");\n\n    if (mainClass) {\n      this.$container.classList.add(...mainClass.split(\" \"));\n    }\n\n    // Add class name for <html> element\n    document.documentElement.classList.add(\"with-fancybox\");\n\n    this.trigger(\"initLayout\");\n\n    return this;\n  }\n\n  /**\n   * Prepares slides for the corousel\n   * @returns {Array} Slides\n   */\n  setItems(items) {\n    const slides = [];\n\n    for (const slide of items) {\n      const $trigger = slide.$trigger;\n\n      if ($trigger) {\n        const dataset = $trigger.dataset || {};\n\n        slide.src = dataset.src || $trigger.getAttribute(\"href\") || slide.src;\n        slide.type = dataset.type || slide.type;\n\n        // Support items without `src`, e.g., when `data-fancybox` attribute added directly to `<img>` element\n        if (!slide.src && $trigger instanceof HTMLImageElement) {\n          slide.src = $trigger.currentSrc || slide.$trigger.src;\n        }\n      }\n\n      // Check for thumbnail element\n      let $thumb = slide.$thumb;\n\n      if (!$thumb) {\n        let origTarget = slide.$trigger && slide.$trigger.origTarget;\n\n        if (origTarget) {\n          if (origTarget instanceof HTMLImageElement) {\n            $thumb = origTarget;\n          } else {\n            $thumb = origTarget.querySelector(\"img:not([aria-hidden])\");\n          }\n        }\n\n        if (!$thumb && slide.$trigger) {\n          $thumb =\n            slide.$trigger instanceof HTMLImageElement\n              ? slide.$trigger\n              : slide.$trigger.querySelector(\"img:not([aria-hidden])\");\n        }\n      }\n\n      slide.$thumb = $thumb || null;\n\n      // Get thumbnail image source\n      let thumb = slide.thumb;\n\n      if (!thumb && $thumb) {\n        thumb = $thumb.currentSrc || $thumb.src;\n\n        if (!thumb && $thumb.dataset) {\n          thumb = $thumb.dataset.lazySrc || $thumb.dataset.src;\n        }\n      }\n\n      // Assume we have image, then use it as thumbnail\n      if (!thumb && slide.type === \"image\") {\n        thumb = slide.src;\n      }\n\n      slide.thumb = thumb || null;\n\n      // Add empty caption to make things simpler\n      slide.caption = slide.caption || \"\";\n\n      slides.push(slide);\n    }\n\n    this.items = slides;\n  }\n\n  /**\n   * Initialize main Carousel that will be used to display the content\n   * @param {Array} slides\n   */\n  initCarousel() {\n    this.Carousel = new Carousel(\n      this.$carousel,\n      extend(\n        true,\n        {},\n        {\n          prefix: \"\",\n\n          classNames: {\n            viewport: \"fancybox__viewport\",\n            track: \"fancybox__track\",\n            slide: \"fancybox__slide\",\n          },\n\n          textSelection: true,\n          preload: this.option(\"preload\"),\n\n          friction: 0.88,\n\n          slides: this.items,\n          initialPage: this.options.startIndex,\n          slidesPerPage: 1,\n\n          infiniteX: this.option(\"infinite\"),\n          infiniteY: true,\n\n          l10n: this.option(\"l10n\"),\n\n          Dots: false,\n          Navigation: {\n            classNames: {\n              main: \"fancybox__nav\",\n              button: \"carousel__button\",\n\n              next: \"is-next\",\n              prev: \"is-prev\",\n            },\n          },\n\n          Panzoom: {\n            textSelection: true,\n\n            panOnlyZoomed: () => {\n              return (\n                this.Carousel && this.Carousel.pages && this.Carousel.pages.length < 2 && !this.option(\"dragToClose\")\n              );\n            },\n\n            lockAxis: () => {\n              if (this.Carousel) {\n                let rez = \"x\";\n\n                if (this.option(\"dragToClose\")) {\n                  rez += \"y\";\n                }\n\n                return rez;\n              }\n            },\n          },\n\n          on: {\n            \"*\": (name, ...details) => this.trigger(`Carousel.${name}`, ...details),\n            init: (carousel) => (this.Carousel = carousel),\n            createSlide: this.onCreateSlide,\n            settle: this.onSettle,\n          },\n        },\n\n        this.option(\"Carousel\")\n      )\n    );\n\n    if (this.option(\"dragToClose\")) {\n      this.Carousel.Panzoom.on({\n        // Stop further touch event handling if content is scaled\n        touchMove: this.onTouchMove,\n\n        // Update backdrop opacity depending on vertical distance\n        afterTransform: this.onTransform,\n\n        // Close instance if drag distance exceeds limit\n        touchEnd: this.onTouchEnd,\n      });\n    }\n\n    this.trigger(\"initCarousel\");\n\n    return this;\n  }\n\n  /**\n   * Process `createSlide` event to create caption element inside new slide\n   */\n  onCreateSlide(carousel, slide) {\n    let caption = slide.caption || \"\";\n\n    if (typeof this.options.caption === \"function\") {\n      caption = this.options.caption.call(this, this, this.Carousel, slide);\n    }\n\n    if (typeof caption === \"string\" && caption.length) {\n      const $caption = document.createElement(\"div\");\n      const id = `fancybox__caption_${this.id}_${slide.index}`;\n\n      $caption.className = \"fancybox__caption\";\n      $caption.innerHTML = caption;\n      $caption.setAttribute(\"id\", id);\n\n      slide.$caption = slide.$el.appendChild($caption);\n\n      slide.$el.classList.add(\"has-caption\");\n      slide.$el.setAttribute(\"aria-labelledby\", id);\n    }\n  }\n\n  /**\n   * Handle Carousel `settle` event\n   */\n  onSettle() {\n    if (this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Handle focus event\n   * @param {Event} event - Focus event\n   */\n  onFocus(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    this.focus(event);\n  }\n\n  /**\n   * Handle click event on the container\n   * @param {Event} event - Click event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let eventTarget = event.composedPath()[0];\n\n    if (eventTarget.matches(\"[data-fancybox-close]\")) {\n      event.preventDefault();\n      Fancybox.close(false, event);\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-next]\")) {\n      event.preventDefault();\n      Fancybox.next();\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-prev]\")) {\n      event.preventDefault();\n      Fancybox.prev();\n\n      return;\n    }\n\n    const activeElement = document.activeElement;\n\n    if (activeElement) {\n      if (activeElement.closest(\"[contenteditable]\")) {\n        return;\n      }\n\n      if (!eventTarget.matches(FOCUSABLE_ELEMENTS)) {\n        activeElement.blur();\n      }\n    }\n\n    // Skip if clicked inside content area\n    if (eventTarget.closest(\".fancybox__content\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (getSelection().toString().length) {\n      return;\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    const action = this.option(\"click\");\n\n    switch (action) {\n      case \"close\":\n        this.close();\n        break;\n      case \"next\":\n        this.next();\n        break;\n    }\n  }\n\n  /**\n   * Handle panzoom `touchMove` event; Disable dragging if content of current slide is scaled\n   */\n  onTouchMove() {\n    const panzoom = this.getSlide().Panzoom;\n\n    return panzoom && panzoom.content.scale !== 1 ? false : true;\n  }\n\n  /**\n   * Handle panzoom `touchEnd` event; close when quick flick up/down is detected\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTouchEnd(panzoom) {\n    const distanceY = panzoom.dragOffset.y;\n\n    if (Math.abs(distanceY) >= 150 || (Math.abs(distanceY) >= 35 && panzoom.dragOffset.time < 350)) {\n      if (this.option(\"hideClass\")) {\n        this.getSlide().hideClass = `fancybox-throwOut${panzoom.content.y < 0 ? \"Up\" : \"Down\"}`;\n      }\n\n      this.close();\n    } else if (panzoom.lockAxis === \"y\") {\n      panzoom.panTo({ y: 0 });\n    }\n  }\n\n  /**\n   * Handle `afterTransform` event; change backdrop opacity based on current y position of panzoom\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTransform(panzoom) {\n    const $backdrop = this.$backdrop;\n\n    if ($backdrop) {\n      const yPos = Math.abs(panzoom.content.y);\n      const opacity = yPos < 1 ? \"\" : Math.max(0.33, Math.min(1, 1 - (yPos / panzoom.content.fitHeight) * 1.5));\n\n      this.$container.style.setProperty(\"--fancybox-ts\", opacity ? \"0s\" : \"\");\n      this.$container.style.setProperty(\"--fancybox-opacity\", opacity);\n    }\n  }\n\n  /**\n   * Handle `mousedown` event to mark that the mouse is in use\n   */\n  onMousedown() {\n    if (this.state === \"ready\") {\n      document.body.classList.add(\"is-using-mouse\");\n    }\n  }\n\n  /**\n   * Handle `keydown` event; trap focus\n   * @param {Event} event Keydown event\n   */\n  onKeydown(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    document.body.classList.remove(\"is-using-mouse\");\n\n    const key = event.key;\n    const keyboard = this.option(\"keyboard\");\n\n    if (!keyboard || event.ctrlKey || event.altKey || event.shiftKey) {\n      return;\n    }\n\n    const target = event.composedPath()[0];\n\n    const classList = document.activeElement && document.activeElement.classList;\n    const isUIElement = classList && classList.contains(\"carousel__button\");\n\n    // Allow to close using Escape button\n    if (key !== \"Escape\" && !isUIElement) {\n      let ignoreElements =\n        event.target.isContentEditable ||\n        [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n      if (ignoreElements) {\n        return;\n      }\n    }\n\n    if (this.trigger(\"keydown\", key, event) === false) {\n      return;\n    }\n\n    const action = keyboard[key];\n\n    if (typeof this[action] === \"function\") {\n      this[action]();\n    }\n  }\n\n  /**\n   * Get the active slide. This will be the first slide from the current page of the main carousel.\n   */\n  getSlide() {\n    const carousel = this.Carousel;\n\n    if (!carousel) return null;\n\n    const page = carousel.page === null ? carousel.option(\"initialPage\") : carousel.page;\n    const pages = carousel.pages || [];\n\n    if (pages.length && pages[page]) {\n      return pages[page].slides[0];\n    }\n\n    return null;\n  }\n\n  /**\n   * Place focus on the first focusable element inside current slide\n   * @param {Event} [event] - Focus event\n   */\n  focus(event) {\n    if (Fancybox.ignoreFocusChange) {\n      return;\n    }\n\n    if ([\"init\", \"closing\", \"customClosing\", \"destroy\"].indexOf(this.state) > -1) {\n      return;\n    }\n\n    const $container = this.$container;\n    const currentSlide = this.getSlide();\n    const $currentSlide = currentSlide.state === \"done\" ? currentSlide.$el : null;\n\n    // Skip if the DOM element that is currently in focus is already inside the current slide\n    if ($currentSlide && $currentSlide.contains(document.activeElement)) {\n      return;\n    }\n\n    if (event) {\n      event.preventDefault();\n    }\n\n    Fancybox.ignoreFocusChange = true;\n\n    const allFocusableElems = Array.from($container.querySelectorAll(FOCUSABLE_ELEMENTS));\n\n    let enabledElems = [];\n    let $firstEl;\n\n    for (let node of allFocusableElems) {\n      // Enable element if it's visible and\n      // is inside the current slide or is outside main carousel (for example, inside the toolbar)\n      const isNodeVisible = node.offsetParent;\n      const isNodeInsideCurrentSlide = $currentSlide && $currentSlide.contains(node);\n      const isNodeOutsideCarousel = !this.Carousel.$viewport.contains(node);\n\n      if (isNodeVisible && (isNodeInsideCurrentSlide || isNodeOutsideCarousel)) {\n        enabledElems.push(node);\n\n        if (node.dataset.origTabindex !== undefined) {\n          node.tabIndex = node.dataset.origTabindex;\n          node.removeAttribute(\"data-orig-tabindex\");\n        }\n\n        if (\n          node.hasAttribute(\"autoFocus\") ||\n          (!$firstEl && isNodeInsideCurrentSlide && !node.classList.contains(\"carousel__button\"))\n        ) {\n          $firstEl = node;\n        }\n      } else {\n        // Element is either hidden or is inside preloaded slide (e.g., not inside current slide, but next/prev)\n        node.dataset.origTabindex =\n          node.dataset.origTabindex === undefined ? node.getAttribute(\"tabindex\") : node.dataset.origTabindex;\n\n        node.tabIndex = -1;\n      }\n    }\n\n    if (!event) {\n      if (this.option(\"autoFocus\") && $firstEl) {\n        setFocusOn($firstEl);\n      } else if (enabledElems.indexOf(document.activeElement) < 0) {\n        setFocusOn($container);\n      }\n    } else {\n      if (enabledElems.indexOf(event.target) > -1) {\n        this.lastFocus = event.target;\n      } else {\n        if (this.lastFocus === $container) {\n          setFocusOn(enabledElems[enabledElems.length - 1]);\n        } else {\n          setFocusOn($container);\n        }\n      }\n    }\n\n    this.lastFocus = document.activeElement;\n\n    Fancybox.ignoreFocusChange = false;\n  }\n\n  /**\n   * Hide vertical page scrollbar and adjust right padding value of `body` element to prevent content from shifting\n   * (otherwise the `body` element may become wider and the content may expand horizontally).\n   */\n  hideScrollbar() {\n    if (!canUseDOM) {\n      return;\n    }\n\n    const scrollbarWidth = window.innerWidth - document.documentElement.getBoundingClientRect().width;\n    const id = \"fancybox-style-noscroll\";\n\n    let $style = document.getElementById(id);\n\n    if ($style) {\n      return;\n    }\n\n    if (scrollbarWidth > 0) {\n      $style = document.createElement(\"style\");\n\n      $style.id = id;\n      $style.type = \"text/css\";\n      $style.innerHTML = `.compensate-for-scrollbar {padding-right: ${scrollbarWidth}px;}`;\n\n      document.getElementsByTagName(\"head\")[0].appendChild($style);\n\n      document.body.classList.add(\"compensate-for-scrollbar\");\n    }\n  }\n\n  /**\n   * Stop hiding vertical page scrollbar\n   */\n  revealScrollbar() {\n    document.body.classList.remove(\"compensate-for-scrollbar\");\n\n    const el = document.getElementById(\"fancybox-style-noscroll\");\n\n    if (el) {\n      el.remove();\n    }\n  }\n\n  /**\n   * Remove content for given slide\n   * @param {Object} slide - Carousel slide\n   */\n  clearContent(slide) {\n    // * Clear previously added content and class name\n    this.Carousel.trigger(\"removeSlide\", slide);\n\n    if (slide.$content) {\n      slide.$content.remove();\n      slide.$content = null;\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    if (slide._className) {\n      slide.$el.classList.remove(slide._className);\n    }\n  }\n\n  /**\n   * Set new content for given slide\n   * @param {Object} slide - Carousel slide\n   * @param {HTMLElement|String} html - HTML element or string containing HTML code\n   * @param {Object} [opts] - Options\n   */\n  setContent(slide, html, opts = {}) {\n    let $content;\n\n    const $el = slide.$el;\n\n    if (html instanceof HTMLElement) {\n      if ([\"img\", \"iframe\", \"video\", \"audio\"].indexOf(html.nodeName.toLowerCase()) > -1) {\n        $content = document.createElement(\"div\");\n        $content.appendChild(html);\n      } else {\n        $content = html;\n      }\n    } else {\n      const $fragment = document.createRange().createContextualFragment(html);\n\n      $content = document.createElement(\"div\");\n      $content.appendChild($fragment);\n    }\n\n    if (slide.filter && !slide.error) {\n      $content = $content.querySelector(slide.filter);\n    }\n\n    if (!($content instanceof Element)) {\n      this.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n\n      return;\n    }\n\n    // * Add class name indicating content type, for example `has-image`\n    slide._className = `has-${opts.suffix || slide.type || \"unknown\"}`;\n\n    $el.classList.add(slide._className);\n\n    // * Set content\n    $content.classList.add(\"fancybox__content\");\n\n    // Make sure that content is not hidden and will be visible\n    if ($content.style.display === \"none\" || getComputedStyle($content).getPropertyValue(\"display\") === \"none\") {\n      $content.style.display = slide.display || this.option(\"defaultDisplay\") || \"flex\";\n    }\n\n    if (slide.id) {\n      $content.setAttribute(\"id\", slide.id);\n    }\n\n    slide.$content = $content;\n\n    $el.prepend($content);\n\n    this.manageCloseButton(slide);\n\n    if (slide.state !== \"loading\") {\n      this.revealContent(slide);\n    }\n\n    return $content;\n  }\n\n  /**\n   * Create close button if needed\n   * @param {Object} slide\n   */\n  manageCloseButton(slide) {\n    const position = slide.closeButton === undefined ? this.option(\"closeButton\") : slide.closeButton;\n\n    if (!position || (position === \"top\" && this.$closeButton)) {\n      return;\n    }\n\n    const $btn = document.createElement(\"button\");\n\n    $btn.classList.add(\"carousel__button\", \"is-close\");\n    $btn.setAttribute(\"title\", this.options.l10n.CLOSE);\n    $btn.innerHTML = this.option(\"template.closeButton\");\n\n    $btn.addEventListener(\"click\", (e) => this.close(e));\n\n    if (position === \"inside\") {\n      // Remove existing one to avoid scope issues\n      if (slide.$closeButton) {\n        slide.$closeButton.remove();\n      }\n\n      slide.$closeButton = slide.$content.appendChild($btn);\n    } else {\n      this.$closeButton = this.$container.insertBefore($btn, this.$container.firstChild);\n    }\n  }\n\n  /**\n   * Make content visible for given slide and optionally start CSS animation\n   * @param {Object} slide - Carousel slide\n   */\n  revealContent(slide) {\n    this.trigger(\"reveal\", slide);\n\n    slide.$content.style.visibility = \"\";\n\n    // Add CSS class name that reveals content (default animation is \"fadeIn\")\n    let showClass = false;\n\n    if (\n      !(\n        slide.error ||\n        slide.state === \"loading\" ||\n        this.Carousel.prevPage !== null ||\n        slide.index !== this.options.startIndex\n      )\n    ) {\n      showClass = slide.showClass === undefined ? this.option(\"showClass\") : slide.showClass;\n    }\n\n    if (!showClass) {\n      this.done(slide);\n\n      return;\n    }\n\n    slide.state = \"animating\";\n\n    this.animateCSS(slide.$content, showClass, () => {\n      this.done(slide);\n    });\n  }\n\n  /**\n   * Add class name to given HTML element and wait for `animationend` event to execute callback\n   * @param {HTMLElement} $el\n   * @param {String} className\n   * @param {Function} callback - A callback to run\n   */\n  animateCSS($element, className, callback) {\n    if ($element) {\n      $element.dispatchEvent(new CustomEvent(\"animationend\", { bubbles: true, cancelable: true }));\n    }\n\n    if (!$element || !className) {\n      if (typeof callback === \"function\") {\n        callback();\n      }\n\n      return;\n    }\n\n    const handleAnimationEnd = function (event) {\n      if (event.currentTarget === this) {\n        $element.removeEventListener(\"animationend\", handleAnimationEnd);\n\n        if (callback) {\n          callback();\n        }\n\n        $element.classList.remove(className);\n      }\n    };\n\n    $element.addEventListener(\"animationend\", handleAnimationEnd);\n    $element.classList.add(className);\n  }\n\n  /**\n   * Mark given slide as `done`, e.g., content is loaded and displayed completely\n   * @param {Object} slide - Carousel slide\n   */\n  done(slide) {\n    slide.state = \"done\";\n\n    this.trigger(\"done\", slide);\n\n    // Trigger focus for current slide (and ignore preloaded slides)\n    const currentSlide = this.getSlide();\n\n    if (currentSlide && slide.index === currentSlide.index && this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Set error message as slide content\n   * @param {Object} slide - Carousel slide\n   * @param {String} message - Error message, can contain HTML code and template variables\n   */\n  setError(slide, message) {\n    slide.error = message;\n\n    this.hideLoading(slide);\n    this.clearContent(slide);\n\n    // Create new content\n    const div = document.createElement(\"div\");\n    div.classList.add(\"fancybox-error\");\n    div.innerHTML = this.localize(message || \"<p>{{ERROR}}</p>\");\n\n    this.setContent(slide, div, { suffix: \"error\" });\n  }\n\n  /**\n   * Create loading indicator inside given slide\n   * @param {Object} slide - Carousel slide\n   */\n  showLoading(slide) {\n    slide.state = \"loading\";\n\n    slide.$el.classList.add(\"is-loading\");\n\n    let $spinner = slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      return;\n    }\n\n    $spinner = document.createElement(\"div\");\n\n    $spinner.classList.add(\"fancybox__spinner\");\n    $spinner.innerHTML = this.option(\"template.spinner\");\n\n    $spinner.addEventListener(\"click\", () => {\n      if (!this.Carousel.Panzoom.velocity) this.close();\n    });\n\n    slide.$el.prepend($spinner);\n  }\n\n  /**\n   * Remove loading indicator from given slide\n   * @param {Object} slide - Carousel slide\n   */\n  hideLoading(slide) {\n    const $spinner = slide.$el && slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      $spinner.remove();\n\n      slide.$el.classList.remove(\"is-loading\");\n    }\n\n    if (slide.state === \"loading\") {\n      this.trigger(\"load\", slide);\n\n      slide.state = \"ready\";\n    }\n  }\n\n  /**\n   * Slide carousel to next page\n   */\n  next() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slideNext();\n    }\n  }\n\n  /**\n   * Slide carousel to previous page\n   */\n  prev() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slidePrev();\n    }\n  }\n\n  /**\n   * Slide carousel to selected page with optional parameters\n   * Examples:\n   *    Fancybox.getInstance().jumpTo(2);\n   *    Fancybox.getInstance().jumpTo(3, {friction: 0})\n   * @param  {...any} args - Arguments for Carousel `slideTo` method\n   */\n  jumpTo(...args) {\n    if (this.Carousel) this.Carousel.slideTo(...args);\n  }\n\n  /**\n   * Check if current instance is trying to close or is already closed\n   * @returns {Boolean}\n   */\n  isClosing() {\n    return [\"closing\", \"customClosing\", \"destroy\"].includes(this.state);\n  }\n\n  /**\n   * Check if the current instance is not blocked by another instance\n   * @returns {Boolean}\n   */\n  isTopmost() {\n    return Fancybox.getInstance().id == this.id;\n  }\n\n  /**\n   * Start closing the current instance\n   * @param {Event} [event] - Optional click event\n   */\n  close(event) {\n    if (event) event.preventDefault();\n\n    // First, stop further execution if this instance is already closing\n    // (this can happen if, for example, user clicks close button multiple times really fast)\n    if (this.isClosing()) {\n      return;\n    }\n\n    // Allow callbacks and/or plugins to prevent closing\n    if (this.trigger(\"shouldClose\", event) === false) {\n      return;\n    }\n\n    this.state = \"closing\";\n\n    this.Carousel.Panzoom.destroy();\n\n    this.detachEvents();\n\n    this.trigger(\"closing\", event);\n\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    // Trigger default CSS closing animation for backdrop and interface elements\n    this.$container.setAttribute(\"aria-hidden\", \"true\");\n\n    this.$container.classList.add(\"is-closing\");\n\n    // Clear inactive slides\n    const currentSlide = this.getSlide();\n\n    this.Carousel.slides.forEach((slide) => {\n      if (slide.$content && slide.index !== currentSlide.index) {\n        this.Carousel.trigger(\"removeSlide\", slide);\n      }\n    });\n\n    // Start default closing animation\n    if (this.state === \"closing\") {\n      const hideClass = currentSlide.hideClass === undefined ? this.option(\"hideClass\") : currentSlide.hideClass;\n\n      this.animateCSS(\n        currentSlide.$content,\n        hideClass,\n        () => {\n          this.destroy();\n        },\n        true\n      );\n    }\n  }\n\n  /**\n   * Clean up after closing fancybox\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    this.trigger(\"destroy\");\n\n    const $trigger = this.option(\"placeFocusBack\") ? this.option(\"triggerTarget\", this.getSlide().$trigger) : null;\n\n    // Destroy Carousel and then detach plugins;\n    // * Note: this order allows plugins to receive `removeSlide` event\n    this.Carousel.destroy();\n\n    this.detachPlugins();\n\n    this.Carousel = null;\n\n    this.options = {};\n    this.events = {};\n\n    this.$container.remove();\n\n    this.$container = this.$backdrop = this.$carousel = null;\n\n    if ($trigger) {\n      setFocusOn($trigger);\n    }\n\n    instances.delete(this.id);\n\n    const nextInstance = Fancybox.getInstance();\n\n    if (nextInstance) {\n      nextInstance.focus();\n      return;\n    }\n\n    document.documentElement.classList.remove(\"with-fancybox\");\n    document.body.classList.remove(\"is-using-mouse\");\n\n    this.revealScrollbar();\n  }\n\n  /**\n   * Create new Fancybox instance with provided options\n   * Example:\n   *   Fancybox.show([{ src : 'https://lipsum.app/id/1/300x225' }]);\n   * @param {Array} items - Gallery items\n   * @param {Object} [options] - Optional custom options\n   * @returns {Object} Fancybox instance\n   */\n  static show(items, options = {}) {\n    return new Fancybox(items, options);\n  }\n\n  /**\n   * Starts Fancybox if event target matches any opener or target is `trigger element`\n   * @param {Event} event - Click event\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromEvent(event, options = {}) {\n    //  Allow other scripts to prevent starting fancybox on click\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // Don't run if right-click\n    if (event.button && event.button !== 0) {\n      return;\n    }\n\n    // Ignore command/control + click\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    const origTarget = event.composedPath()[0];\n    let eventTarget = origTarget;\n\n    // Support `trigger` element, e.g., start fancybox from different DOM element, for example,\n    // to have one preview image for hidden image gallery\n    let triggerGroupName;\n\n    if (\n      eventTarget.matches(\"[data-fancybox-trigger]\") ||\n      (eventTarget = eventTarget.closest(\"[data-fancybox-trigger]\"))\n    ) {\n      options.triggerTarget = eventTarget;\n      triggerGroupName = eventTarget && eventTarget.dataset && eventTarget.dataset.fancyboxTrigger;\n    }\n\n    if (triggerGroupName) {\n      const triggerItems = document.querySelectorAll(`[data-fancybox=\"${triggerGroupName}\"]`);\n      const triggerIndex = parseInt(eventTarget.dataset.fancyboxIndex, 10) || 0;\n\n      eventTarget = triggerItems.length ? triggerItems[triggerIndex] : eventTarget;\n    }\n\n    // * Try to find matching openener\n    let matchingOpener;\n    let target;\n\n    Array.from(Fancybox.openers.keys())\n      .reverse()\n      .some((opener) => {\n        target = eventTarget || origTarget;\n\n        let found = false;\n\n        try {\n          if (target instanceof Element && (typeof opener === \"string\" || opener instanceof String)) {\n            // Chain closest() to event.target to find and return the parent element,\n            // regardless if clicking on the child elements (icon, label, etc)\n            found = target.matches(opener) || (target = target.closest(opener));\n          }\n        } catch (error) {}\n\n        if (found) {\n          event.preventDefault();\n          matchingOpener = opener;\n          return true;\n        }\n\n        return false;\n      });\n\n    let rez = false;\n\n    if (matchingOpener) {\n      options.event = event;\n      options.target = target;\n\n      target.origTarget = origTarget;\n\n      rez = Fancybox.fromOpener(matchingOpener, options);\n\n      // Check if the mouse is being used\n      // Waiting for better browser support for `:focus-visible` -\n      // https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n      const nextInstance = Fancybox.getInstance();\n\n      if (nextInstance && nextInstance.state === \"ready\" && event.detail) {\n        document.body.classList.add(\"is-using-mouse\");\n      }\n    }\n\n    return rez;\n  }\n\n  /**\n   * Starts Fancybox using selector\n   * @param {String} opener - Valid CSS selector string\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromOpener(opener, options = {}) {\n    // Callback function called once for each group element that\n    // 1) converts data attributes to boolean or JSON\n    // 2) removes values that could cause issues\n    const mapCallback = function (el) {\n      const falseValues = [\"false\", \"0\", \"no\", \"null\", \"undefined\"];\n      const trueValues = [\"true\", \"1\", \"yes\"];\n\n      const dataset = Object.assign({}, el.dataset);\n      const options = {};\n\n      for (let [key, value] of Object.entries(dataset)) {\n        if (key === \"fancybox\") {\n          continue;\n        }\n\n        if (key === \"width\" || key === \"height\") {\n          options[`_${key}`] = value;\n        } else if (typeof value === \"string\" || value instanceof String) {\n          if (falseValues.indexOf(value) > -1) {\n            options[key] = false;\n          } else if (trueValues.indexOf(options[key]) > -1) {\n            options[key] = true;\n          } else {\n            try {\n              options[key] = JSON.parse(value);\n            } catch (e) {\n              options[key] = value;\n            }\n          }\n        } else {\n          options[key] = value;\n        }\n      }\n\n      if (el instanceof Element) {\n        options.$trigger = el;\n      }\n\n      return options;\n    };\n\n    let items = [],\n      index = options.startIndex || 0,\n      target = options.target || null;\n\n    // Get options\n    // ===\n    options = extend({}, options, Fancybox.openers.get(opener));\n\n    // Get matching nodes\n    // ===\n    const groupAll = options.groupAll === undefined ? false : options.groupAll;\n\n    const groupAttr = options.groupAttr === undefined ? \"data-fancybox\" : options.groupAttr;\n    const groupValue = groupAttr && target ? target.getAttribute(`${groupAttr}`) : \"\";\n\n    if (!target || groupValue || groupAll) {\n      const $root = options.root || (target ? target.getRootNode() : document.body);\n\n      items = [].slice.call($root.querySelectorAll(opener));\n    }\n\n    if (target && !groupAll) {\n      if (groupValue) {\n        items = items.filter((el) => el.getAttribute(`${groupAttr}`) === groupValue);\n      } else {\n        items = [target];\n      }\n    }\n\n    if (!items.length) {\n      return false;\n    }\n\n    // Exit if current instance is triggered from the same element\n    // ===\n    const currentInstance = Fancybox.getInstance();\n\n    if (currentInstance && items.indexOf(currentInstance.options.$trigger) > -1) {\n      return false;\n    }\n\n    // Start Fancybox\n    // ===\n\n    // Get index of current item in the gallery\n    index = target ? items.indexOf(target) : index;\n\n    // Convert items in a format supported by fancybox\n    items = items.map(mapCallback);\n\n    // * Create new fancybox instance\n    return new Fancybox(\n      items,\n      extend({}, options, {\n        startIndex: index,\n        $trigger: target,\n      })\n    );\n  }\n\n  /**\n   * Attach a click handler function that starts Fancybox to the selected items, as well as to all future matching elements.\n   * @param {String} selector - Selector that should match trigger elements\n   * @param {Object} [options] - Custom options\n   */\n  static bind(selector, options = {}) {\n    function attachClickEvent() {\n      document.body.addEventListener(\"click\", Fancybox.fromEvent, false);\n    }\n\n    if (!canUseDOM) {\n      return;\n    }\n\n    if (!Fancybox.openers.size) {\n      if (/complete|interactive|loaded/.test(document.readyState)) {\n        attachClickEvent();\n      } else {\n        document.addEventListener(\"DOMContentLoaded\", attachClickEvent);\n      }\n    }\n\n    Fancybox.openers.set(selector, options);\n  }\n\n  /**\n   * Remove the click handler that was attached with `bind()`\n   * @param {String} selector - A selector which should match the one originally passed to .bind()\n   */\n  static unbind(selector) {\n    Fancybox.openers.delete(selector);\n\n    if (!Fancybox.openers.size) {\n      Fancybox.destroy();\n    }\n  }\n\n  /**\n   * Immediately destroy all instances (without closing animation) and clean up all bindings..\n   */\n  static destroy() {\n    let fb;\n\n    while ((fb = Fancybox.getInstance())) {\n      fb.destroy();\n    }\n\n    Fancybox.openers = new Map();\n\n    document.body.removeEventListener(\"click\", Fancybox.fromEvent, false);\n  }\n\n  /**\n   * Retrieve instance by identifier or the top most instance, if identifier is not provided\n   * @param {String|Numeric} [id] - Optional instance identifier\n   */\n  static getInstance(id) {\n    if (id) {\n      return instances.get(id);\n    }\n\n    const instance = Array.from(instances.values())\n      .reverse()\n      .find((instance) => {\n        if (!instance.isClosing()) {\n          return instance;\n        }\n\n        return false;\n      });\n\n    return instance || null;\n  }\n\n  /**\n   * Close all or topmost currently active instance.\n   * @param {boolean} [all] - All or only topmost active instance\n   * @param {any} [arguments] - Optional data\n   */\n  static close(all = true, args) {\n    if (all) {\n      for (const instance of instances.values()) {\n        instance.close(args);\n      }\n    } else {\n      const instance = Fancybox.getInstance();\n\n      if (instance) {\n        instance.close(args);\n      }\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to next page\n   */\n  static next() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.next();\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to previous page\n   */\n  static prev() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.prev();\n    }\n  }\n}\n\n// Expose version\nFancybox.version = \"__VERSION__\";\n\n// Expose defaults\nFancybox.defaults = defaults;\n\n// Expose openers\nFancybox.openers = new Map();\n\n// Add default plugins\nFancybox.Plugins = Plugins;\n\n// Auto init with default options\nFancybox.bind(\"[data-fancybox]\");\n\n// Prepare plugins\nfor (const [key, Plugin] of Object.entries(Fancybox.Plugins || {})) {\n  if (typeof Plugin.create === \"function\") {\n    Plugin.create(Fancybox);\n  }\n}\n\nexport { Fancybox };\n"],
  "mappings": "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",
  "names": ["defaults", "defaults", "slide", "Plugins", "defaults", "page", "lazySrc", "slide", "Plugins", "defaults", "defaults", "document", "defaults", "Panzoom", "Fancybox", "slide", "defaults", "fancybox", "Plugins", "en_default", "defaults", "en_default", "options", "instance", "Plugins"]
}
